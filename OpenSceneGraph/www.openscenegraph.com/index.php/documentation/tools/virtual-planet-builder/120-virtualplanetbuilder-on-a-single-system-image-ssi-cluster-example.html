<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb">

<head>
    <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<script type="text/javascript">
var siteurl='../../../../index.html';
var tmplurl='../../../../templates/ja_purity_ii/index.html';
var isRTL = false;
</script>

  /
	<meta name="keywords" content="scene graph
OpenGL
realtime graphics
OpenGL ES" />
	<meta name="author" content="J.P. Delport" />
	<meta name="description" content="Project website for OpenSceneGraph" />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>VirtualPlanetBuilder on a Single System Image (SSI) Cluster Example</title>
	<link href="../../../../index9853.css?jat3action=gzip&amp;jat3type=css&amp;jat3file=t3-assets%2Fcss_1550e.css" rel="stylesheet" type="text/css" />
	<script type="application/json" class="joomla-script-options new">{"csrf.token":"23c98af80d9697c7f09338eeb123284a","system.paths":{"root":"","base":""}}</script>
	<script src="../../../../indexbe82.php?jat3action=gzip&amp;jat3type=js&amp;jat3file=t3-assets%2Fjs_b0389.js" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(function($){ initTooltips(); $("body").on("subform-row-add", initTooltips); function initTooltips (event, container) { container = container || document;$(container).find(".hasTooltip").tooltip({"html": true,"container": "body"});} });jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	jQuery(function ($) {
		initChosen();
		$("body").on("subform-row-add", initChosen);

		function initChosen(event, container)
		{
			container = container || document;
			$(container).find(".advancedSelect").chosen({"disable_search_threshold":10,"search_contains":true,"allow_single_deselect":true,"placeholder_text_multiple":"Type or select some options","placeholder_text_single":"Select an option","no_results_text":"No results match"});
		}
	});
	
jQuery(document).ready(function() {
	var value, searchword = jQuery('#mod-finder-searchword90');

		// Get the current value.
		value = searchword.val();

		// If the current value equals the default value, clear it.
		searchword.on('focus', function ()
		{
			var el = jQuery(this);

			if (el.val() === 'Search ...')
			{
				el.val('');
			}
		});

		// If the current value is empty, set the previous value.
		searchword.on('blur', function ()
		{
			var el = jQuery(this);

			if (!el.val())
			{
				el.val(value);
			}
		});

		jQuery('#mod-finder-searchform90').on('submit', function (e)
		{
			e.stopPropagation();
			var advanced = jQuery('#mod-finder-advanced90');

			// Disable select boxes with no value selected.
			if (advanced.length)
			{
				advanced.find('select').each(function (index, el)
				{
					var el = jQuery(el);

					if (!el.val())
					{
						el.attr('disabled', 'disabled');
					}
				});
			}
		});
	var suggest = jQuery('#mod-finder-searchword90').autocomplete({
		serviceUrl: '/index.php/component/finder/?task=suggestions.suggest&amp;format=json&amp;tmpl=component',
		paramName: 'q',
		minChars: 1,
		maxHeight: 400,
		width: 300,
		zIndex: 9999,
		deferRequestBy: 500
	});});
	</script>

<!--[if ie]><link href="/plugins/system/jat3/jat3/base-themes/default/css/template-ie.css" type="text/css" rel="stylesheet" /><![endif]--> 
<!--[if ie 7]><link href="/plugins/system/jat3/jat3/base-themes/default/css/template-ie7.css" type="text/css" rel="stylesheet" /><![endif]--> 
<!--[if ie 7]><link href="/templates/ja_purity_ii/css/template-ie7.css" type="text/css" rel="stylesheet" /><![endif]--> 




<link href="../../../../plugins/system/jat3/jat3/base-themes/default/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />


<!--[if IE 7.0]>
<style>
.clearfix { display: inline-block; } /* IE7xhtml*/
</style>
<![endif]-->

<script language="javascript" type="text/javascript">
var rightCollapseDefault='show';
var excludeModules='38';
</script>
<script language="javascript" type="text/javascript" src="../../../../templates/ja_purity_ii/js/ja.rightcol.js"></script>

<style type="text/css">
#ja-header .main {
	background-image: url(../../../../templates/ja_purity_ii/images/header/header1.jpg);
}
</style>
    
    <style type="text/css">
/*dynamic css*/

    body.bd .main {width: 980px;}
    body.bd #ja-wrapper {min-width: 980px;}
</style></head>

<body id="bd" class="bd fs3 com_content">
<a name="Top" id="Top"></a>
<div id="ja-wrapper">


                <div id="ja-header"
            	class="wrap ">
                   <div class="main">
                           <div class="main-inner1 clearfix">
                <h1 class="logo">
    <a href="../../../../index.html" title="OpenSceneGraph"><span>OpenSceneGraph</span></a>
</h1>

<div id="ja-search">
    
<div class="finder">
	<form id="mod-finder-searchform90" action="https://www.openscenegraph.com/index.php/component/finder/search" method="get" class="form-search" role="search">
		<label for="mod-finder-searchword90" class="finder">Search</label><br /><input type="text" name="q" id="mod-finder-searchword90" class="search-query input-medium" size="25" value="" placeholder="Search ..."/><button class="btn btn-primary hasTooltip  finder" type="submit" title="Go"><span class="icon-search icon-white"></span>Search</button>
						<input type="hidden" name="Itemid" value="165" />	</form>
</div>

</div>                </div>
                            </div>
                        </div>
            <div id="ja-mainnav"
            	class="wrap ">
                   <div class="main">
                           <div class="main-inner1 clearfix">
                	<div class="ja-megamenu clearfix" id="ja-megamenu">
<ul class="megamenu level0"><li  class="mega first"><a href="../../../../index.html"  class="mega first" id="menu101" title="Home"><span class="menu-title">Home</span></a></li><li  class="mega haschild"><a href="../../../about.html"  class="mega haschild" id="menu104" title="About"><span class="menu-title">About</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../../about/features.html"  class="mega first" id="menu110" title="Features"><span class="menu-title">Features</span></a></li><li  class="mega"><a href="../../../about/licensing.html"  class="mega" id="menu111" title="Licensing"><span class="menu-title">Licensing</span></a></li><li  class="mega"><a href="../../../about/history.html"  class="mega" id="menu130" title="History"><span class="menu-title">History</span></a></li><li  class="mega"><a href="../../../about/software-patents.html"  class="mega" id="menu157" title="Software Patents"><span class="menu-title">Software Patents</span></a></li><li  class="mega last"><a href="../../../about/contributors.html"  class="mega last" id="menu163" title="Contributors"><span class="menu-title">Contributors</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild active"><a href="../../../documentation.html"  class="mega haschild active" id="menu105" title="Documentation"><span class="menu-title">Documentation</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../getting-started.html"  class="mega first" id="menu116" title="Getting Started"><span class="menu-title">Getting Started</span></a></li><li  class="mega haschild"><a href="../../platform-specifics.html"  class="mega haschild" id="menu115" title="Platform Specifics"><span class="menu-title">Platform Specifics</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../../platform-specifics/linux.html"  class="mega first" id="menu117" title="Linux"><span class="menu-title">Linux</span></a></li><li  class="mega"><a href="../../platform-specifics/windows.html"  class="mega" id="menu118" title="Windows"><span class="menu-title">Windows</span></a></li><li  class="mega"><a href="../../platform-specifics/mac-osx.html"  class="mega" id="menu119" title="Mac OSX"><span class="menu-title">Mac OSX</span></a></li><li  class="mega"><a href="../../platform-specifics/ios.html"  class="mega" id="menu120" title="iOS"><span class="menu-title">iOS</span></a></li><li  class="mega last"><a href="../../platform-specifics/android.html"  class="mega last" id="menu121" title="Android"><span class="menu-title">Android</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../guides.html"  class="mega haschild" id="menu161" title="Guides"><span class="menu-title">Guides</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../../guides/reference-guides.html"  class="mega first" id="menu148" title="Reference Guides"><span class="menu-title">Reference Guides</span></a></li><li  class="mega"><a href="../../guides/user-guides.html"  class="mega" id="menu147" title="User Guides"><span class="menu-title">User Guides</span></a></li><li  class="mega"><a href="../../guides/programming-guides.html"  class="mega" id="menu162" title="Programming Guides"><span class="menu-title">Programming Guides</span></a></li><li  class="mega last"><a href="../../guides/quick-start-guide.html"  class="mega last" id="menu164" title="Quick Start Guide"><span class="menu-title">Quick Start Guide</span></a></li></ul></div></div>
</div></div></li><li  class="mega"><a href="../../tutorials.html"  class="mega" id="menu126" title="Tutorials"><span class="menu-title">Tutorials</span></a></li><li  class="mega"><a href="../../books.html"  class="mega" id="menu127" title="Books"><span class="menu-title">Books</span></a></li><li  class="mega"><a href="../../debugging-tips.html"  class="mega" id="menu135" title="Debugging Tips"><span class="menu-title">Debugging Tips</span></a></li><li  class="mega"><a href="../../knowledge-base.html"  class="mega" id="menu141" title="Knowledge Base"><span class="menu-title">Knowledge Base</span></a></li><li  class="mega haschild active"><a href="../../tools.html"  class="mega haschild active" id="menu136" title="Tools"><span class="menu-title">Tools</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first active"><a href="../virtual-planet-builder.html"  class="mega first active" id="menu165" title="Virtual Planet Builder"><span class="menu-title">Virtual Planet Builder</span></a></li><li  class="mega last"><a href="http://osgmaxexp.wiki.sourceforge.net/"  class="mega last" id="menu166" title="osgExp"><span class="menu-title">osgExp</span></a></li></ul></div></div>
</div></div></li><li  class="mega last"><a href="http://trac.openscenegraph.org/projects/osg//browser"  class="mega last" id="menu167" title="Browse Source"><span class="menu-title">Browse Source</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../../download-section.html"  class="mega haschild" id="menu103" title="Downloads"><span class="menu-title">Downloads</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../../download-section/stable-releases.html"  class="mega first" id="menu113" title="Stable releases"><span class="menu-title">Stable releases</span></a></li><li  class="mega"><a href="../../../download-section/developer-releases.html"  class="mega" id="menu114" title="Developer releases"><span class="menu-title">Developer releases</span></a></li><li  class="mega"><a href="../../../download-section/code-repositories.html"  class="mega" id="menu142" title="Code Repositories"><span class="menu-title">Code Repositories</span></a></li><li  class="mega"><a href="../../../download-section/dependencies.html"  class="mega" id="menu138" title="Dependencies"><span class="menu-title">Dependencies</span></a></li><li  class="mega last"><a href="../../../download-section/data.html"  class="mega last" id="menu137" title="Data Resources"><span class="menu-title">Data Resources</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../../gallery.html"  class="mega haschild" id="menu102" title="Gallery"><span class="menu-title">Gallery</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../../gallery/use-cases.html"  class="mega first" id="menu139" title="Use cases"><span class="menu-title">Use cases</span></a></li><li  class="mega"><a href="../../../gallery/screenshots.html"  class="mega" id="menu128" title="Screenshots"><span class="menu-title">Screenshots</span></a></li><li  class="mega last"><a href="../../../gallery/video.html"  class="mega last" id="menu129" title="Videos"><span class="menu-title">Videos</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../../support.html"  class="mega haschild" id="menu106" title="Support"><span class="menu-title">Support</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../../support/faq.html"  class="mega first" id="menu125" title="FAQ"><span class="menu-title">FAQ</span></a></li><li  class="mega"><a href="../../../support/2012-04-25-09-35-21.html"  class="mega" id="menu123" title="Forum"><span class="menu-title">Forum</span></a></li><li  class="mega last"><a href="../../../support/professional-support.html"  class="mega last" id="menu124" title="Professional Support"><span class="menu-title">Professional Support</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../../community.html"  class="mega haschild" id="menu131" title="Community"><span class="menu-title">Community</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../../community/news.html"  class="mega first" id="menu112" title="News"><span class="menu-title">News</span></a></li><li  class="mega"><a href="../../../community/press-releases.html"  class="mega" id="menu158" title="Press Releases"><span class="menu-title">Press Releases</span></a></li><li  class="mega"><a href="../../../community/submission-protocol.html"  class="mega" id="menu134" title="Submission protocol"><span class="menu-title">Submission protocol</span></a></li><li  class="mega"><a href="../../../community/projects.html"  class="mega" id="menu132" title="Projects"><span class="menu-title">Projects</span></a></li><li  class="mega haschild"><a href="../../../community/jobs.html"  class="mega haschild" id="menu133" title="Jobs"><span class="menu-title">Jobs</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../../../community/jobs/job-offers.html"  class="mega first" id="menu149" title="Job Offers"><span class="menu-title">Job Offers</span></a></li><li  class="mega last"><a href="../../../community/jobs/job-requests.html"  class="mega last" id="menu150" title="Job Requests"><span class="menu-title">Job Requests</span></a></li></ul></div></div>
</div></div></li><li  class="mega"><a href="../../../community/events.html"  class="mega" id="menu145" title="Events"><span class="menu-title">Events</span></a></li><li  class="mega"><a href="../../../community/merchandising.html"  class="mega" id="menu146" title="Merchandising"><span class="menu-title">Merchandising</span></a></li><li  class="mega haschild"><a href="../../../community/maintainers-corner.html"  class="mega haschild" id="menu153" title="Maintainer's Corner"><span class="menu-title">Maintainer's Corner</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../../../community/maintainers-corner/information-for-maintainers.html"  class="mega first" id="menu156" title="Information for Maintainers"><span class="menu-title">Information for Maintainers</span></a></li><li  class="mega"><a href="../../../community/maintainers-corner/packaging-openscenegraph.html"  class="mega" id="menu155" title="Packaging OpenSceneGraph"><span class="menu-title">Packaging OpenSceneGraph</span></a></li><li  class="mega last"><a href="../../../community/maintainers-corner/package-maintainers.html"  class="mega last" id="menu154" title="Package Maintainers"><span class="menu-title">Package Maintainers</span></a></li></ul></div></div>
</div></div></li><li  class="mega last"><a href="../../../community/migration-tasks.html"  class="mega last" id="menu140" title="Migration Tasks"><span class="menu-title">Migration Tasks</span></a></li></ul></div></div>
</div></div></li><li  class="mega last"><a href="../../../login.html"  class="mega last" id="menu109" title="Login"><span class="menu-title">Login</span></a></li></ul>
</div>            <script type="text/javascript">
                var megamenu = new jaMegaMenuMoo ('ja-megamenu', {
                    'bgopacity': 0,
                    'delayHide': 300,
                    'slide'    : 0,
                    'fading'   : 0,
                    'direction': 'down',
                    'action'   : 'mouseover',
                    'tips'     : false,
                    'duration' : 300,
                    'hidestyle': 'fastwhenshow'
                });
            </script>
                            </div>
                            </div>
                        </div>
            
<!-- jdoc:include type="menu" level="0" / -->

<ul class="no-display">
    <li><a href="#ja-content" title="Skip to content">Skip to content</a></li>
</ul>
    <!-- MAIN CONTAINER -->
    <div id="ja-container" class="wrap ja-mf">
               <div class="main clearfix">
                   <div id="ja-mainbody" style="width:100%">
            <!-- CONTENT -->
            <div id="ja-main" style="width:100%">
            <div class="inner clearfix">

                <div id="system-message-container">
	</div>

                
                <div id="ja-contentwrap" class="clearfix ">
                    <div id="ja-content" class="column" style="width:100%">
                        <div id="ja-current-content" class="column" style="width:100%">
                            
                                                        <div id="ja-content-main" class="ja-content-main clearfix">
                                <div class="item-page clearfix">
	<h1 class="componentheading">
	Virtual Planet Builder	</h1>
	<h2 class="contentheading">
			<a href="120-virtualplanetbuilder-on-a-single-system-image-ssi-cluster-example.html">
		VirtualPlanetBuilder on a Single System Image (SSI) Cluster Example</a>
		</h2>

	
<div class="article-tools clearfix">
	<ul class="actions">
						<li class="print-icon">
			<a href="120-virtualplanetbuilder-on-a-single-system-image-ssi-cluster-example87e8.html?tmpl=component&amp;print=1" title="Print article < VirtualPlanetBuilder on a Single System Image (SSI) Cluster Example >" onclick="window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;" rel="nofollow">			<span class="icon-print" aria-hidden="true"></span>
		Print	</a>			</li>
		
					<li class="email-icon">
			<a href="../../../component/mailto/indexb026.html?tmpl=component&amp;template=ja_purity_ii&amp;link=ab40250dd7d739cb06398663b2bb5f72165af9ac" title="Email this link to a friend" onclick="window.open(this.href,'win2','width=400,height=550,menubar=yes,resizable=yes'); return false;" rel="nofollow">			<span class="icon-envelope" aria-hidden="true"></span>
		Email	</a>			</li>
				
				
		
	</ul>



	<dl class="article-info">
	<dt class="article-info-term">Details</dt>
	<dd class="category-name">
				Category: <span><a href="../virtual-planet-builder.html">Virtual Planet Builder</a></span>		</dd>
	<dd class="published">
	Published: <span>14 February 2013</span>	</dd>
	<dd class="createdby"> 
				Written by <span>J.P. Delport</span>	
	</dd>
	
	<dd class="hits">
	Hits: <span>17968</span>	</dd>
	</dl>
</div>


	<p id="VirtualPlanetBuilderonaSingleSystemImageSSIClusterExample">This page briefly describes the setup and procedure used to generated a large terrain database on a cluster of 8 nodes. This is definitely not the only way to use VirtualPlanetBuilder, but serves as a specific example.</p>
<p>I used OpenSceneGraph (rev 8413) and VirtualPlanetBuilder (rev 914) checked out from svn around June 2008.</p>
<h3>Prerequisites</h3>
<p>This section describes some aspects of the cluster setup that are related to running VirtualPlanetBuilder.</p>
<h4 id="PasswordlessSSH">Passwordless SSH</h4>
<p>VirtualPlanetBuilder by default uses <strong>ssh</strong> to execute <strong>osgdem</strong> commands on the compute nodes. You should therefore setup <strong>ssh</strong> so that the user that will run the <strong>vpbmaster</strong> command can login to the other machines without a password. I used public/private key pairs to do this. Consult Google for detailed instructions.</p>
<p>If all is setup correctly, you should be able to login from the node where you will run <strong>vpbmaster</strong> to any other node without a password, e.g.:</p>
<pre class="wiki">jpd@rootnode:~$ ssh node01
Linux node01 2.6.24 #1 SMP Wed Jul 9 16:58:57 SAST 2008 i686
Last login: Sat Jul 19 11:52:59 2008 from rootnode
jpd@node01:~$
</pre>
<h4 id="XServeronNodes">X Server on Nodes</h4>
<p>When <strong>osgdem</strong> executes on the compute nodes, it tries to open a window on display <strong>:0.0</strong>. An X server must therefore be running on the node (the first server on most Linux distros should default to :0.0). It is important to log in to the server. All the nodes in this example had an NVidia graphics card with the 169.12 driver installed.</p>
<p>To test if everything is working correctly, do something like the following:</p>
<pre class="wiki">jpd@rootnode:~$ ssh node01 "export DISPLAY=:0.0 ; xeyes"
</pre>
<p>The <strong>xeyes</strong> application should run and display its window on node01's X server.</p>
<h4 id="DataDirectories">Data Directories</h4>
<p>All nodes that will participate in the terrain building need to have access to the input data (readable) as well as access to a directory to store the output files (writable). In this example I will assume that a directory called "/glusterfs" is visible from all machines and is writable.</p>
<p>The following should for example display the same listing:</p>
<pre class="wiki">jpd@rootnode:~$ ls /glusterfs
jpd@rootnode:~$ ssh node05 "ls /glusterfs"
</pre>
<h3 id="VPBSetup">VPB Setup</h3>
<h4 id="DataReprojectionandTranslation">Data Reprojection and Translation</h4>
<p>VirtualPlanetBuilder seems happiest when all input data uses the same projection and datum. It is also a good idea to reproject the input data so that it can be used in future VirtualPlanetBuilder runs (yes, you will run it more than once ;).</p>
<p>For this example I used latlong and WGS84 for all the files and also converted everything to GeoTiff format. The following shows how I converted the stunning Blue Marble Next Generation (BMNG) data I downloaded from <a class="ext-link" href="http://mirrors.arsc.edu/nasa/world_500m/"><span class="icon">here</span></a>.</p>
<pre class="wiki">gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr -180 90 -90   0 world.topo.bathy.200407.3x21600x21600.A1.jpg A1.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr -90  90   0   0 world.topo.bathy.200407.3x21600x21600.B1.jpg B1.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr   0  90  90   0 world.topo.bathy.200407.3x21600x21600.C1.jpg C1.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr  90  90 180   0 world.topo.bathy.200407.3x21600x21600.D1.jpg D1.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr -180  0 -90 -90 world.topo.bathy.200407.3x21600x21600.A2.jpg A2.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr  -90  0   0 -90 world.topo.bathy.200407.3x21600x21600.B2.jpg B2.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr    0  0  90 -90 world.topo.bathy.200407.3x21600x21600.C2.jpg C2.tif
gdal_translate -of GTiff -a_srs "+proj=latlong +datum=WGS84" -a_ullr   90  0 180 -90 world.topo.bathy.200407.3x21600x21600.D2.jpg D2.tif
</pre>
<p>For most data that already has projection data included, the following command seemed to work:</p>
<pre class="wiki">gdalwarp -t_srs "+proj=latlong +datum=WGS84" -r bilinear $name ../reprojected/$newname
</pre>
<p>I usually place all reprojected data into separate directories that group them by layer. E.g. the converted BMNG tif files would be placed in a directory called "/glusterfs/BMNG".</p>
<h4 id="MachinePoolFile">Machine Pool File</h4>
<p>VirtualPlanetBuilder uses an input file to describe the list of machines that will be used during the build. Below is the simple one I used, called <strong>machinepool.txt</strong>.</p>
<pre class="wiki">Machine {
	hostname node01
	processes 1
}
Machine {
	hostname node02
	processes 1
}
Machine {
	hostname node03
	processes 1
}
Machine {
	hostname node04
	processes 1
}
Machine {
	hostname node05
	processes 1
}
Machine {
	hostname node06
	processes 1
}
Machine {
	hostname node07
	processes 1
}
Machine {
	hostname node08
	processes 1
}
</pre>
<p>The names specified in the file should be the names that are reachable using <strong>ssh</strong>. If you have multiple cores per machine with enough memory, you could try increasing the processes.</p>
<h3 id="CommandLine">Command Line</h3>
<p>Below is the command line that I used (all should be on one line when executing without the // comments):</p>
<pre class="wiki">vpbmaster --machines machinepool.txt                // Use the machine pool file described earlier
          --geocentric                              // I want a geocentric database
          -d /glusterfs/DTED                        // My elevation data can be found here (the directory contains only tifs)
          --layer 0 -t /glusterfs/BMNG              // On texture layer 0 I want the BMNG data
          --layer 0 -t /glusterfs/SPOT_reproj       // as well as some nice satellite photos
          --layer 1 -t /glusterfs/Maps_reproj       // On Layer 1 I want some 1:50000 scale maps
          --terrain --compressed                    // Use the new terrain format and compress the texture data
          -o spot_maps/terrain.ive                  // Put the output files under this directory
</pre>
<p>The command was executed from the master node in a directory that is visible to all nodes:</p>
<pre class="wiki">jpd@rootnode:~$ cd /glusterfs/generate
</pre>
<p>That's it. The <strong>vpbmaster</strong> command created 473 tasks and after 50 hours of processing created 1.5 million files with a total size of 487GB.</p>
<p>Below is a snippet of the output:</p>
<pre class="wiki">End of run: tasksPending=0 taskCompleted=473 taskRunning=0 tasksFailed=0
MachinePool::reportTimingStats()
    Machine : node01
        Task::type=''   minTime=616.267390      maxTime=5068.351865     averageTime=2751.044383 totalComputeTime=181568.929248  numTasks=66
    Machine : node02
        Task::type=''   minTime=761.555931      maxTime=25294.378808    averageTime=4027.837882 totalComputeTime=181252.704694  numTasks=45
    Machine : node03
        Task::type=''   minTime=702.828047      maxTime=4933.171209     averageTime=2936.182243 totalComputeTime=179107.116819  numTasks=61
    Machine : node04
        Task::type=''   minTime=605.509313      maxTime=5256.497770     averageTime=2794.609616 totalComputeTime=178855.015440  numTasks=64
    Machine : node05
        Task::type=''   minTime=704.703147      maxTime=5562.438701     averageTime=3005.987053 totalComputeTime=180359.223195  numTasks=60
    Machine : node06
        Task::type=''   minTime=658.961472      maxTime=10080.521703    averageTime=3329.892155 totalComputeTime=179814.176365  numTasks=54
    Machine : node07
        Task::type=''   minTime=702.050721      maxTime=5662.709409     averageTime=3052.297707 totalComputeTime=180085.564685  numTasks=59
    Machine : node08
        Task::type=''   minTime=703.251535      maxTime=5755.713908     averageTime=2803.070356 totalComputeTime=179396.502756  numTasks=64
Finished run successfully.
Total elapsed time = 181923.496816
</pre>
<h3 id="ClusterOverview">Cluster Overview</h3>
<p>The cluster used in this example consists of 9 machines connected using Gigabit Ethernet. The master (root) node contains all applications on its filesystem. The 8 other nodes are identical machines that boot over the network using NFS as their root filesystems. All nodes have NVidia 6 series PCI-Express graphics cards.</p>
<p>All nodes run Debian Lenny. By virtue of using the same NFS mount, all client nodes have identical software installed.</p>
<p>The 8 client nodes have a 500GB disk each. The disks are pooled into one large 4TB filesystem using the excellent <a class="ext-link" href="http://www.gluster.org/"><span class="icon">GlusterFS</span></a>. By mounting the GlusterFS filesystem from all nodes, they all see the exact same data.</p>
<h3>Misc Tips</h3>
<p> Use <strong>GNU screen</strong> to start the <strong>vpbmaster</strong> command. You can then monitor the progress over the network and save the command line output to review later.</p>
<p> <a class="ext-link" href="http://gridengine.sunsource.net/"><span class="icon">Sun Grid Engine</span></a> makes reprojecting hundreds of files in parallel easier. You just submit the whole batch at once using <strong>find -exec</strong> and a simple script.</p>
<p> Since <strong>ssh</strong> to all nodes is set up already, install <strong>dsh</strong> (distributed shell) on the root node. Running a single command on all nodes then become as easy as:</p>
<pre class="wiki">dsh -a "ls /glusterfs"
</pre>
<p>Using GNU/Linux and OpenSceneGraph is fun.</p>
<p>Enjoy.</p>
<p> </p> 
			
				
<ul class="pager pagenav">
	<li class="previous">
		<a class="hasTooltip" title="How to patch an existing database" aria-label="Previous article: How to patch an existing database" href="121-how-to-patch-an-existing-database.html" rel="prev">
			<span class="icon-chevron-left" aria-hidden="true"></span> <span aria-hidden="true">Prev</span>		</a>
	</li>
</ul>

	</div>                            </div>
                            
                                                    </div>

                                            </div>

                    
                </div>

                            </div>
            </div>
            <!-- //CONTENT -->
            
        </div>
                        </div>
                </div>
        <!-- //MAIN CONTAINER -->

                <div id="ja-navhelper"
            	class="wrap ">
                   <div class="main">
                           <div class="main-inner1 clearfix">
                <div class="ja-breadcrums">
    
</div>

<ul class="ja-links">
        <li class="top"><a href="javascript:scroll(0,0)" title="Back to top">Top</a></li>
</ul>

<ul class="no-display">
    <li><a href="#ja-content" title="Skip to content">Skip to content</a></li>
</ul>                </div>
                            </div>
                        </div>
                        <div id="ja-footer"
            	class="wrap ">
                   <div class="main clearfix">
           <div id="ja-poweredby" class="t3-logo t3-logo-light">
	<a href="http://t3.joomlart.com/" title="Powered By T3 Framework" target="_blank" rel="nofollow">Powered By T3 Framework</a>
</div>  	
<div class="ja-copyright">
	
</div>            </div>
                        </div>
            
</div>



</body>

</html>