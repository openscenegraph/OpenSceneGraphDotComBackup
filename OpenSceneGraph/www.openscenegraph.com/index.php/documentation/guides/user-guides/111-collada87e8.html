
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb">

<head>
    <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<script type="text/javascript">
var siteurl='../../../../index.html';
var tmplurl='../../../../templates/ja_purity_ii/index.html';
var isRTL = false;
</script>

  /
	<meta name="keywords" content="scene graph
OpenGL
realtime graphics
OpenGL ES" />
	<meta name="author" content="openscenegraph" />
	<meta name="robots" content="noindex, nofollow" />
	<meta name="description" content="Project website for OpenSceneGraph" />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>Collada</title>
	<link href="../../../../index4adc.css?jat3action=gzip&amp;jat3type=css&amp;jat3file=t3-assets%2Fcss_4ca7c.css" rel="stylesheet" type="text/css" />
	<script type="application/json" class="joomla-script-options new">{"csrf.token":"2c7c78b465edefa1ee5224c8b0248dca","system.paths":{"root":"","base":""}}</script>
	<script src="../../../../indexa945.php?jat3action=gzip&amp;jat3type=js&amp;jat3file=t3-assets%2Fjs_a0ffa.js" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	</script>

<!--[if ie]><link href="/plugins/system/jat3/jat3/base-themes/default/css/template-ie.css" type="text/css" rel="stylesheet" /><![endif]--> 
<!--[if ie 7]><link href="/plugins/system/jat3/jat3/base-themes/default/css/template-ie7.css" type="text/css" rel="stylesheet" /><![endif]--> 
<!--[if ie 7]><link href="/templates/ja_purity_ii/css/template-ie7.css" type="text/css" rel="stylesheet" /><![endif]--> 




<link href="../../../../plugins/system/jat3/jat3/base-themes/default/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />


<!--[if IE 7.0]>
<style>
.clearfix { display: inline-block; } /* IE7xhtml*/
</style>
<![endif]-->

<script language="javascript" type="text/javascript">
var rightCollapseDefault='show';
var excludeModules='38';
</script>
<script language="javascript" type="text/javascript" src="../../../../templates/ja_purity_ii/js/ja.rightcol.js"></script>

<style type="text/css">
#ja-header .main {
	background-image: url(../../../../templates/ja_purity_ii/images/header/header2.jpg);
}
</style></head>

<body id="bd" class="fs3 com_content contentpane">
    <div id="system-message-container">
	</div>

    <div class="item-page clearfix">
	<h2 class="contentheading">
			<a href="111-collada.html">
		Collada</a>
		</h2>

	
<div class="article-tools clearfix">
	<ul class="actions">
			<li>
		<a href="#" onclick="window.print();return false;">			<span class="icon-print" aria-hidden="true"></span>
		Print	</a>		</li>
		
	</ul>



	<dl class="article-info">
	<dt class="article-info-term">Details</dt>
	<dd class="category-name">
				Category: <span><a href="../user-guides.html">User Guides</a></span>		</dd>
	<dd class="published">
	Published: <span>06 February 2013</span>	</dd>
	<dd class="createdby"> 
				Written by <span>openscenegraph</span>	
	</dd>
	
	<dd class="hits">
	Hits: <span>18033</span>	</dd>
	</dl>
</div>


	<div id="content" class="wiki">
<div class="wikipage searchable">The Collada specification documents, forums, wiki, model bank and more can be found at the <a class="ext-link" href="http://www.collada.org/"><span class="icon">Official Collada website</span></a>.
<h3 id="Colladafeatures">Collada features<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#Colladafeatures" title="Link to this section"> </a></h3>
<table class="withborder">
<tbody>
<tr>
<td><strong>Collada features</strong></td>
<td><strong>Supported by OSG plugin</strong></td>
</tr>
<tr>
<td>Geometry</td>
<td>Yes</td>
</tr>
<tr>
<td>VisualScene</td>
<td>Yes</td>
</tr>
<tr>
<td>Materials</td>
<td>Yes, profile_COMMON</td>
</tr>
<tr>
<td>Animations</td>
<td>Yes, but writing is incomplete</td>
</tr>
<tr>
<td>PhysicsScene</td>
<td>No, OSG has no Physics support</td>
</tr>
</tbody>
</table>
<h3 id="Howtobuild">Building the Collada Plugin</h3>
<p>The OSG Collada plugin depends on the Open Source <a class="ext-link" href="http://sourceforge.net/projects/collada-dom"><span class="icon">Collada DOM library</span></a>. The current version of the DOM is 2.2. It can build a library for Collada version 1.4 or Collada version 1.5 documents. Both a static and a dynamic library can be build. The osg Collada plugin has only been tested to work with the 1.4 variants of the library. The Collada DOM library itself depends on (a part of) Boost, libxml2, pcre, pcrecpp, minizip, zlib. Precompiled libraries for different platforms and compilers are included in the Collada DOM download from sourceforge. As of December 2011, testing indicates that the plugin still does not work with the COLLADA DOM version 2.3.x, but does work with the 2.2.</p>
<p>In order to build the Collada OSG plugin CMake will try to find the DOM library by using the COLLADA_DIR environment variable. If CMake can not find it specify the COLLADA_DOM_ROOT and reconfigure. The precompiled dependencies used by the DOM will automatically be found and filled in. If only the static library is found CMake will use this and if only the dynamic library is found it will use that library. If both static and dynamic libraries are found it will by default pick the static library. If you switch on the advanced options in CMake you may overrule this setting by manually changing the COLLADA_USE_STATIC option.</p>
<p><strong>Step by step example for Windows and Visual Studio 2005</strong></p>
<ul>
<li><a class="ext-link" href="http://sourceforge.net/project/showfiles.php?group_id=157838&amp;package_id=270665&amp;release_id=644738"><span class="icon">Download collada-dom-2.2.zip</span></a> from Sourceforge</li>
<li>Unzip it into &lt;yourinstalldir&gt;</li>
<li>For Visual Studio 2005 open &lt;yourinstalldir&gt;/dom/projects/vc8-1.4/dom.sln and do &gt; Batch Build... &gt; Select all &gt; Build</li>
<li>Set the environment variable COLLADA_DIR to &lt;yourinstalldir&gt;</li>
<li>Open CMake &gt; configure &gt; adjust COLLADA_DOM_ROOT if not correct &gt; configure &gt; check other COLLADA_ variables &gt; OK</li>
<li>Build <span class="wiki">OpenSceneGraph</span> and the dae plugin</li>
<li>Running with a statically linked DOM &gt; Make sure the libxml2.dll can be found</li>
<li>Running with a dynamically linked DOM &gt; Make sure to libcollada14dom21xxx.dll can be found</li>
</ul>
<p><strong>Step by step example for Linux (likely similar strategy will work on other unices</strong></p>
<ul>
<li><a class="ext-link" href="http://sourceforge.net/project/showfiles.php?group_id=157838&amp;package_id=270665&amp;release_id=644738"><span class="icon">Download collada-dom-2.2.zip</span></a> from Sourceforge</li>
<li>Unzip it into &lt;yourinstalldir&gt;</li>
<li>cd &lt;yourinstalldir&gt;</li>
<li>cp Makefile.linux Makefile</li>
<li>make os=linux project=minizip</li>
<li>sudo make os=linux project=dom -C dom/</li>
<li>sudo make install</li>
</ul>
<h3 id="OptionstringsforColladareader">Option strings for Collada reader<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#OptionstringsforColladareader" title="Link to this section"> </a></h3>
<p>OSG plugins can be given optional string arguments to influence their behaviour. For the Collada reader one can specify the following option string:</p>
<table class="withborder">
<tbody>
<tr>
<td>StrictTransparency</td>
<td>Process transparent and transparency settings according to a strict interpretation of the Collada specification.</td>
</tr>
<tr>
<td>daeTessellateNone</td>
<td>Do not tessellate at all (Polygons are stored as GL_POLYGON - not suitable for concave polygons)</td>
</tr>
<tr>
<td>daeTessellatePolygonsAsTriFans</td>
<td>Tessellate the old way (default), interpreting polygons as triangle fans (faster, but does not work for concave polygons)</td>
</tr>
<tr>
<td>daeTessellatePolygons</td>
<td>Use full tessellation of polygons (slower, works for concave polygons)</td>
</tr>
<tr>
<td>daeUsePredefinedTextureUnits</td>
<td>Texture units have fixed uses (0: ambient occlusion, 1: main texture...). May create non contiguous units (default).</td>
</tr>
<tr>
<td>daeUsePredefinedTextureUnits</td>
<td>Texture units are created in sequence (contiguous units)."</td>
</tr>
</tbody>
</table>
<h3 id="PlugindatafortheColladareader">Plugin data for the Collada reader<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#PlugindatafortheColladareader" title="Link to this section"> </a></h3>
<p>OSG plugins can be given optional data arguments to influence their behaviour or receive feedback. For the Collada reader one can specify the following PluginData fields</p>
<table class="withborder">
<tbody>
<tr>
<td>DAE</td>
<td>A pointer to a previously allocated Collada DOM DAE object- this object will be used to read the dae file and can then be used to programmatically access the loaded DAE database.</td>
</tr>
<tr>
<td>DAE-DocumentURI</td>
<td>A pointer to a std::string object - This string will be set to the URI of the loaded document on exit</td>
</tr>
<tr>
<td>DAE-AssetUnitName</td>
<td>A pointer to a std::string object - This string will be set to the AssetUnitName from the Collada document</td>
</tr>
<tr>
<td>DAE-AssetUnitMeter</td>
<td>A pointer to a float - This will be set to the AssetUnitMeter value from the Collada document</td>
</tr>
<tr>
<td>DAE-AssetUp_axis</td>
<td>A pointer to a domUpAxisType - This will be set to the AssetUp_Axis from the Collada document</td>
</tr>
</tbody>
</table>
<h3 id="OptionstringsforColladawriter">Option strings for Collada writer<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#OptionstringsforColladawriter" title="Link to this section"> </a></h3>
<p>OSG plugins can be given optional string arguments to influence their behaviour. For the Collada writer one can specify the following options strings:</p>
<table class="withborder">
<tbody>
<tr>
<td>polygon</td>
<td>Use polygons instead of polylists for element</td>
</tr>
<tr>
<td>GoogleMode</td>
<td>Write files suitable for use by Google products. (Invert interpretation of A_ONE transparency as Google earth does)</td>
</tr>
<tr>
<td>NoExtras</td>
<td>Do not write any &lt;extra&gt; elements</td>
</tr>
<tr>
<td>daeEarthTex</td>
<td>DAE settings for writing earth textures</td>
</tr>
<tr>
<td>daeZUpAxis</td>
<td>Indicates the up axis is Z instead of Y</td>
</tr>
<tr>
<td>daeLinkOriginalTexturesNoForce</td>
<td>Writes reference to the original image if found, instead of writing the image in memory</td>
</tr>
<tr>
<td>daeLinkOriginalTexturesForce</td>
<td>Writes reference to the original image even if not found, instead of writing the image in memory</td>
</tr>
<tr>
<td>daeNamesUseCodepage</td>
<td>All names except filenames (materials, animation, geometries...) should be considered as encoded using current codepage (UTF8 if not). Filenames follow OSG_USE_UTF8_FILENAME.</td>
</tr>
</tbody>
</table>
<h3 id="PlugindatafortheColladawriter">Plugin data for the Collada writer<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#PlugindatafortheColladawriter" title="Link to this section"> </a></h3>
<p>OSG plugins can be given optional data arguments to influence their behaviour or receive feedback. For the Collada writer one can specify the following PluginData fields</p>
<table class="withborder">
<tbody>
<tr>
<td>DAE</td>
<td>A pointer to a previously allocated Collada DOM DAE object- this object will be used to write the dae file and can then be used to programmatically access the loaded DAE database.</td>
</tr>
<tr>
<td>DAE-DocumentURI</td>
<td>A pointer to a std::string object - This string will be set to the URI of the loaded document on exit</td>
</tr>
</tbody>
</table>
<h3 id="ExampleColladadaemodels">Example Collada dae models<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#ExampleColladadaemodels" title="Link to this section"> </a></h3>
<ul>
<li><a class="ext-link" href="https://collada.org/owl/"><span class="icon">Test Model Bank</span></a> Collection of test models from the Collada project</li>
<li><a class="ext-link" href="http://sketchup.google.com/3dwarehouse/"><span class="icon">Google 3D warehouse</span></a> Rename the kmz to zip and unzip to find the dae models.</li>
</ul>
<p>Of course you may also Google for data, but be aware that there are also a lot of invalid Collada files available on the web.</p>
<p>Collada data may be tested for corruption at three levels:</p>
<ol>
<li>Well-formedness; conform to the XML syntax rules. Most of the Collada XML data on the web will be well formed, because this is the easiest to catch by tools/parsers.</li>
<li>Validity; conform to the semantic rules specified in the Collada XML schema.</li>
<li>Coherency; all element referencing and validation not in the scope of an XML schema. Are all used materials/textures available? Do arrays contain correct data? etc.</li>
</ol>
<p>To do this you can use the <a class="ext-link" href="http://www.collada.org/mediawiki/index.php/Portal:CoherencyTest"><span class="icon">CoherencyTest</span></a> command-line tool or Java based GUI-tool <a class="ext-link" href="http://www.collada.org/mediawiki/index.php/COLLADA_Refinery"><span class="icon">Collada Refinery</span></a></p>
<h3 id="Developerinfo">Developer info</h3>
<p>A description of the Collada extensions for specific OpenSceneGraph functionality can be found at the <a class="ext-link" href="http://www.collada.org/mediawiki/index.php/OpenSceneGraph_OSG_plugin_extensions"><span class="icon">OSG Collada extensions</span></a> page on the Collada wiki.</p>
<h3 id="Toolinfo">Tool info<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#Toolinfo" title="Link to this section"> </a></h3>
<p>This section should contain information specific to the Collada exporters in various tools and if/how they can export files that the OSG Collada plugin will be able to read. Quirks of the various exporters can be listed here along with workarounds if they exist.</p>
<h3 id="SoftimageXSI">Softimage XSI<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#SoftimageXSI" title="Link to this section"> </a></h3>
<p>The current version of Crosswalk (4.1) includes a Collada 1.4.1 exporter which seems to do a good job of exporting valid Collada files. There are a few quirks:</p>
<ul>
<li>You need to check "Export XSI normals" on the ExportCrossWalkOptions - Settings page before exporting, otherwise the models will have no normals.</li>
<li>The exporter correctly exports Lambert, Phong and Constant materials. Blinn is always exported with a shininess of 0 so it is unusable, use Phong instead.</li>
<li>There were recent fixes to the OSG Collada plugin to support the way XSI exports animation. Apparently, the animations didn't always contain channels for all X, Y and Z components. OSG SVN as of 2010-03-22 has the fix for this, and animations are read correctly now.</li>
<li>The hierarchy will be respected:
<ul>
<li>Objects will be placed under MatrixTransforms (the object name will be put on the MatrixTransform), so the hierarchy will be MT - Geode - Geometry.</li>
<li>Objects under other objects will be the same in OSG, so the hierarchy will be MT with 2 children, one Geode - Geometry and the other MT - Geode - Geometry of the child object.</li>
<li>Nulls become MatrixTransforms too, so an object under a null will become MT - MT - Geode - Geometry.</li>
<li>You can also create a "Model" node in XSI, these also become MatrixTransforms under which the rest of the model will be.</li>
<li>For some reason, the name of the material of an object becomes the name of the Geometry in OSG. For example, if I have a sphere called redsphere, with a material called red, this will result in a hierarchy MT("redsphere") - Geode(unnamed) - Geometry("red").</li>
</ul>
</li>
<li>Animation:
<ul>
<li>Animation Sources are exported as separate animations.</li>
<li>Animation Tracks (as seen in the Animation Mixer) are not exported.</li>
<li>You can still do some edits to Sources in the mixer, as long as you then freeze the clip by doing Clip - Freeze to New Source or Freeze and Replace before exporting.</li>
<li>Compounds must also be frozen with Freeze to New Source to work, and if you had transitions in the Compound they will work once frozen to a new Source.</li>
<li>Using Merge to New Source (with multiple clips selected) is an alternate way to do what a compound would do, but transitions won't have any effect then (even if you also selected the transitions before doing Merge to New Source).</li>
</ul>
</li>
</ul>
<h3 id="TODOWishlist">TODO/Wishlist<a class="anchor" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/Collada#TODOWishlist" title="Link to this section"> </a></h3>
<ul>
<li>Solve differences in drawables, DAE reader should place multiple collation elements into multiple primitivesets in a single geometry where possible (only when same material)</li>
<li>Solve differences in matrices</li>
<li>Multitexture support</li>
<li>Profile_GLSL based on AMD's <a class="ext-link" href="http://ati.amd.com/developer/rendermonkey/downloads.html"><span class="icon">Collada OpenGL Effects Viewer</span></a></li>
<li>Handling more &lt;extra&gt; to more closely mimic the intended lighting</li>
<li>Add proper &lt;asset&gt; info</li>
<li>The OSG Collada plugin doesn't currently read multiple animation cycles from a single dae file. This is under investigation and should be fixed soon.</li>
</ul>
</div>
</div> 
			
				

	</div>
</body>

</html>