<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb">

<head>
    <!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<script type="text/javascript">
var siteurl='../../../index.html';
var tmplurl='../../../templates/ja_purity_ii/index.html';
var isRTL = false;
</script>

  /
	<meta name="keywords" content="scene graph
OpenGL
realtime graphics
OpenGL ES" />
	<meta name="author" content="openscenegraph" />
	<meta name="description" content="Project website for OpenSceneGraph" />
	<meta name="generator" content="Joomla! - Open Source Content Management" />
	<title>Matrix Transformations</title>
	<link href="../../../index9853.css?jat3action=gzip&amp;jat3type=css&amp;jat3file=t3-assets%2Fcss_1550e.css" rel="stylesheet" type="text/css" />
	<script type="application/json" class="joomla-script-options new">{"csrf.token":"6d29d385b4a9f94bbbd94c25973656ec","system.paths":{"root":"","base":""}}</script>
	<script src="../../../indexbe82.php?jat3action=gzip&amp;jat3type=js&amp;jat3file=t3-assets%2Fjs_b0389.js" type="text/javascript"></script>
	<script type="text/javascript">
jQuery(function($){ initTooltips(); $("body").on("subform-row-add", initTooltips); function initTooltips (event, container) { container = container || document;$(container).find(".hasTooltip").tooltip({"html": true,"container": "body"});} });jQuery(window).on('load',  function() {
				new JCaption('img.caption');
			});
	jQuery(function ($) {
		initChosen();
		$("body").on("subform-row-add", initChosen);

		function initChosen(event, container)
		{
			container = container || document;
			$(container).find(".advancedSelect").chosen({"disable_search_threshold":10,"search_contains":true,"allow_single_deselect":true,"placeholder_text_multiple":"Type or select some options","placeholder_text_single":"Select an option","no_results_text":"No results match"});
		}
	});
	
jQuery(document).ready(function() {
	var value, searchword = jQuery('#mod-finder-searchword90');

		// Get the current value.
		value = searchword.val();

		// If the current value equals the default value, clear it.
		searchword.on('focus', function ()
		{
			var el = jQuery(this);

			if (el.val() === 'Search ...')
			{
				el.val('');
			}
		});

		// If the current value is empty, set the previous value.
		searchword.on('blur', function ()
		{
			var el = jQuery(this);

			if (!el.val())
			{
				el.val(value);
			}
		});

		jQuery('#mod-finder-searchform90').on('submit', function (e)
		{
			e.stopPropagation();
			var advanced = jQuery('#mod-finder-advanced90');

			// Disable select boxes with no value selected.
			if (advanced.length)
			{
				advanced.find('select').each(function (index, el)
				{
					var el = jQuery(el);

					if (!el.val())
					{
						el.attr('disabled', 'disabled');
					}
				});
			}
		});
	var suggest = jQuery('#mod-finder-searchword90').autocomplete({
		serviceUrl: '/index.php/component/finder/?task=suggestions.suggest&amp;format=json&amp;tmpl=component',
		paramName: 'q',
		minChars: 1,
		maxHeight: 400,
		width: 300,
		zIndex: 9999,
		deferRequestBy: 500
	});});
	</script>

<!--[if ie]><link href="/plugins/system/jat3/jat3/base-themes/default/css/template-ie.css" type="text/css" rel="stylesheet" /><![endif]--> 
<!--[if ie 7]><link href="/plugins/system/jat3/jat3/base-themes/default/css/template-ie7.css" type="text/css" rel="stylesheet" /><![endif]--> 
<!--[if ie 7]><link href="/templates/ja_purity_ii/css/template-ie7.css" type="text/css" rel="stylesheet" /><![endif]--> 




<link href="../../../plugins/system/jat3/jat3/base-themes/default/images/favicon.ico" rel="shortcut icon" type="image/x-icon" />


<!--[if IE 7.0]>
<style>
.clearfix { display: inline-block; } /* IE7xhtml*/
</style>
<![endif]-->

<script language="javascript" type="text/javascript">
var rightCollapseDefault='show';
var excludeModules='38';
</script>
<script language="javascript" type="text/javascript" src="../../../templates/ja_purity_ii/js/ja.rightcol.js"></script>

<style type="text/css">
#ja-header .main {
	background-image: url(../../../templates/ja_purity_ii/images/header/header2.jpg);
}
</style>
    
    <style type="text/css">
/*dynamic css*/

    body.bd .main {width: 980px;}
    body.bd #ja-wrapper {min-width: 980px;}
</style></head>

<body id="bd" class="bd fs3 com_content">
<a name="Top" id="Top"></a>
<div id="ja-wrapper">


                <div id="ja-header"
            	class="wrap ">
                   <div class="main">
                           <div class="main-inner1 clearfix">
                <h1 class="logo">
    <a href="../../../index.html" title="OpenSceneGraph"><span>OpenSceneGraph</span></a>
</h1>

<div id="ja-search">
    
<div class="finder">
	<form id="mod-finder-searchform90" action="https://www.openscenegraph.com/index.php/component/finder/search" method="get" class="form-search" role="search">
		<label for="mod-finder-searchword90" class="finder">Search</label><br /><input type="text" name="q" id="mod-finder-searchword90" class="search-query input-medium" size="25" value="" placeholder="Search ..."/><button class="btn btn-primary hasTooltip  finder" type="submit" title="Go"><span class="icon-search icon-white"></span>Search</button>
						<input type="hidden" name="Itemid" value="141" />	</form>
</div>

</div>                </div>
                            </div>
                        </div>
            <div id="ja-mainnav"
            	class="wrap ">
                   <div class="main">
                           <div class="main-inner1 clearfix">
                	<div class="ja-megamenu clearfix" id="ja-megamenu">
<ul class="megamenu level0"><li  class="mega first"><a href="../../../index.html"  class="mega first" id="menu101" title="Home"><span class="menu-title">Home</span></a></li><li  class="mega haschild"><a href="../../about.html"  class="mega haschild" id="menu104" title="About"><span class="menu-title">About</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../about/features.html"  class="mega first" id="menu110" title="Features"><span class="menu-title">Features</span></a></li><li  class="mega"><a href="../../about/licensing.html"  class="mega" id="menu111" title="Licensing"><span class="menu-title">Licensing</span></a></li><li  class="mega"><a href="../../about/history.html"  class="mega" id="menu130" title="History"><span class="menu-title">History</span></a></li><li  class="mega"><a href="../../about/software-patents.html"  class="mega" id="menu157" title="Software Patents"><span class="menu-title">Software Patents</span></a></li><li  class="mega last"><a href="../../about/contributors.html"  class="mega last" id="menu163" title="Contributors"><span class="menu-title">Contributors</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild active"><a href="../../documentation.html"  class="mega haschild active" id="menu105" title="Documentation"><span class="menu-title">Documentation</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../getting-started.html"  class="mega first" id="menu116" title="Getting Started"><span class="menu-title">Getting Started</span></a></li><li  class="mega haschild"><a href="../platform-specifics.html"  class="mega haschild" id="menu115" title="Platform Specifics"><span class="menu-title">Platform Specifics</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../platform-specifics/linux.html"  class="mega first" id="menu117" title="Linux"><span class="menu-title">Linux</span></a></li><li  class="mega"><a href="../platform-specifics/windows.html"  class="mega" id="menu118" title="Windows"><span class="menu-title">Windows</span></a></li><li  class="mega"><a href="../platform-specifics/mac-osx.html"  class="mega" id="menu119" title="Mac OSX"><span class="menu-title">Mac OSX</span></a></li><li  class="mega"><a href="../platform-specifics/ios.html"  class="mega" id="menu120" title="iOS"><span class="menu-title">iOS</span></a></li><li  class="mega last"><a href="../platform-specifics/android.html"  class="mega last" id="menu121" title="Android"><span class="menu-title">Android</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../guides.html"  class="mega haschild" id="menu161" title="Guides"><span class="menu-title">Guides</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../guides/reference-guides.html"  class="mega first" id="menu148" title="Reference Guides"><span class="menu-title">Reference Guides</span></a></li><li  class="mega"><a href="../guides/user-guides.html"  class="mega" id="menu147" title="User Guides"><span class="menu-title">User Guides</span></a></li><li  class="mega"><a href="../guides/programming-guides.html"  class="mega" id="menu162" title="Programming Guides"><span class="menu-title">Programming Guides</span></a></li><li  class="mega last"><a href="../guides/quick-start-guide.html"  class="mega last" id="menu164" title="Quick Start Guide"><span class="menu-title">Quick Start Guide</span></a></li></ul></div></div>
</div></div></li><li  class="mega"><a href="../tutorials.html"  class="mega" id="menu126" title="Tutorials"><span class="menu-title">Tutorials</span></a></li><li  class="mega"><a href="../books.html"  class="mega" id="menu127" title="Books"><span class="menu-title">Books</span></a></li><li  class="mega"><a href="../debugging-tips.html"  class="mega" id="menu135" title="Debugging Tips"><span class="menu-title">Debugging Tips</span></a></li><li  class="mega active"><a href="../knowledge-base.html"  class="mega active" id="menu141" title="Knowledge Base"><span class="menu-title">Knowledge Base</span></a></li><li  class="mega haschild"><a href="../tools.html"  class="mega haschild" id="menu136" title="Tools"><span class="menu-title">Tools</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../tools/virtual-planet-builder.html"  class="mega first" id="menu165" title="Virtual Planet Builder"><span class="menu-title">Virtual Planet Builder</span></a></li><li  class="mega last"><a href="http://osgmaxexp.wiki.sourceforge.net/"  class="mega last" id="menu166" title="osgExp"><span class="menu-title">osgExp</span></a></li></ul></div></div>
</div></div></li><li  class="mega last"><a href="http://trac.openscenegraph.org/projects/osg//browser"  class="mega last" id="menu167" title="Browse Source"><span class="menu-title">Browse Source</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../download-section.html"  class="mega haschild" id="menu103" title="Downloads"><span class="menu-title">Downloads</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../download-section/stable-releases.html"  class="mega first" id="menu113" title="Stable releases"><span class="menu-title">Stable releases</span></a></li><li  class="mega"><a href="../../download-section/developer-releases.html"  class="mega" id="menu114" title="Developer releases"><span class="menu-title">Developer releases</span></a></li><li  class="mega"><a href="../../download-section/code-repositories.html"  class="mega" id="menu142" title="Code Repositories"><span class="menu-title">Code Repositories</span></a></li><li  class="mega"><a href="../../download-section/dependencies.html"  class="mega" id="menu138" title="Dependencies"><span class="menu-title">Dependencies</span></a></li><li  class="mega last"><a href="../../download-section/data.html"  class="mega last" id="menu137" title="Data Resources"><span class="menu-title">Data Resources</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../gallery.html"  class="mega haschild" id="menu102" title="Gallery"><span class="menu-title">Gallery</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../gallery/use-cases.html"  class="mega first" id="menu139" title="Use cases"><span class="menu-title">Use cases</span></a></li><li  class="mega"><a href="../../gallery/screenshots.html"  class="mega" id="menu128" title="Screenshots"><span class="menu-title">Screenshots</span></a></li><li  class="mega last"><a href="../../gallery/video.html"  class="mega last" id="menu129" title="Videos"><span class="menu-title">Videos</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../support.html"  class="mega haschild" id="menu106" title="Support"><span class="menu-title">Support</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../support/faq.html"  class="mega first" id="menu125" title="FAQ"><span class="menu-title">FAQ</span></a></li><li  class="mega"><a href="../../support/2012-04-25-09-35-21.html"  class="mega" id="menu123" title="Forum"><span class="menu-title">Forum</span></a></li><li  class="mega last"><a href="../../support/professional-support.html"  class="mega last" id="menu124" title="Professional Support"><span class="menu-title">Professional Support</span></a></li></ul></div></div>
</div></div></li><li  class="mega haschild"><a href="../../community.html"  class="mega haschild" id="menu131" title="Community"><span class="menu-title">Community</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level1"><li  class="mega first"><a href="../../community/news.html"  class="mega first" id="menu112" title="News"><span class="menu-title">News</span></a></li><li  class="mega"><a href="../../community/press-releases.html"  class="mega" id="menu158" title="Press Releases"><span class="menu-title">Press Releases</span></a></li><li  class="mega"><a href="../../community/submission-protocol.html"  class="mega" id="menu134" title="Submission protocol"><span class="menu-title">Submission protocol</span></a></li><li  class="mega"><a href="../../community/projects.html"  class="mega" id="menu132" title="Projects"><span class="menu-title">Projects</span></a></li><li  class="mega haschild"><a href="../../community/jobs.html"  class="mega haschild" id="menu133" title="Jobs"><span class="menu-title">Jobs</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../../community/jobs/job-offers.html"  class="mega first" id="menu149" title="Job Offers"><span class="menu-title">Job Offers</span></a></li><li  class="mega last"><a href="../../community/jobs/job-requests.html"  class="mega last" id="menu150" title="Job Requests"><span class="menu-title">Job Requests</span></a></li></ul></div></div>
</div></div></li><li  class="mega"><a href="../../community/events.html"  class="mega" id="menu145" title="Events"><span class="menu-title">Events</span></a></li><li  class="mega"><a href="../../community/merchandising.html"  class="mega" id="menu146" title="Merchandising"><span class="menu-title">Merchandising</span></a></li><li  class="mega haschild"><a href="../../community/maintainers-corner.html"  class="mega haschild" id="menu153" title="Maintainer's Corner"><span class="menu-title">Maintainer's Corner</span></a><div class="childcontent cols1 ">
<div class="childcontent-inner-wrap">
<div class="childcontent-inner clearfix" style="width: 200px;"><div class="megacol column1 first" style="width: 200px;"><ul class="megamenu level2"><li  class="mega first"><a href="../../community/maintainers-corner/information-for-maintainers.html"  class="mega first" id="menu156" title="Information for Maintainers"><span class="menu-title">Information for Maintainers</span></a></li><li  class="mega"><a href="../../community/maintainers-corner/packaging-openscenegraph.html"  class="mega" id="menu155" title="Packaging OpenSceneGraph"><span class="menu-title">Packaging OpenSceneGraph</span></a></li><li  class="mega last"><a href="../../community/maintainers-corner/package-maintainers.html"  class="mega last" id="menu154" title="Package Maintainers"><span class="menu-title">Package Maintainers</span></a></li></ul></div></div>
</div></div></li><li  class="mega last"><a href="../../community/migration-tasks.html"  class="mega last" id="menu140" title="Migration Tasks"><span class="menu-title">Migration Tasks</span></a></li></ul></div></div>
</div></div></li><li  class="mega last"><a href="../../login.html"  class="mega last" id="menu109" title="Login"><span class="menu-title">Login</span></a></li></ul>
</div>            <script type="text/javascript">
                var megamenu = new jaMegaMenuMoo ('ja-megamenu', {
                    'bgopacity': 0,
                    'delayHide': 300,
                    'slide'    : 0,
                    'fading'   : 0,
                    'direction': 'down',
                    'action'   : 'mouseover',
                    'tips'     : false,
                    'duration' : 300,
                    'hidestyle': 'fastwhenshow'
                });
            </script>
                            </div>
                            </div>
                        </div>
            
<!-- jdoc:include type="menu" level="0" / -->

<ul class="no-display">
    <li><a href="#ja-content" title="Skip to content">Skip to content</a></li>
</ul>
    <!-- MAIN CONTAINER -->
    <div id="ja-container" class="wrap ja-mf">
               <div class="main clearfix">
                   <div id="ja-mainbody" style="width:100%">
            <!-- CONTENT -->
            <div id="ja-main" style="width:100%">
            <div class="inner clearfix">

                <div id="system-message-container">
	</div>

                
                <div id="ja-contentwrap" class="clearfix ">
                    <div id="ja-content" class="column" style="width:100%">
                        <div id="ja-current-content" class="column" style="width:100%">
                            
                                                        <div id="ja-content-main" class="ja-content-main clearfix">
                                <div class="item-page clearfix">
	<h1 class="componentheading">
	Knowledge Base	</h1>
	<h2 class="contentheading">
			<a href="41-matrix-transformations.html">
		Matrix Transformations</a>
		</h2>

	
<div class="article-tools clearfix">
	<ul class="actions">
						<li class="print-icon">
			<a href="41-matrix-transformations87e8.html?tmpl=component&amp;print=1" title="Print article < Matrix Transformations >" onclick="window.open(this.href,'win2','status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no'); return false;" rel="nofollow">			<span class="icon-print" aria-hidden="true"></span>
		Print	</a>			</li>
		
					<li class="email-icon">
			<a href="../../component/mailto/indexffb0.html?tmpl=component&amp;template=ja_purity_ii&amp;link=ae2be2b5aefee474a904e106222723ec78da3ee3" title="Email this link to a friend" onclick="window.open(this.href,'win2','width=400,height=550,menubar=yes,resizable=yes'); return false;" rel="nofollow">			<span class="icon-envelope" aria-hidden="true"></span>
		Email	</a>			</li>
				
				
		
	</ul>



	<dl class="article-info">
	<dt class="article-info-term">Details</dt>
	<dd class="category-name">
				Category: <span><a href="../knowledge-base.html">Knowledge Base</a></span>		</dd>
	<dd class="published">
	Published: <span>21 May 2012</span>	</dd>
	<dd class="createdby"> 
				Written by <span>openscenegraph</span>	
	</dd>
	
	<dd class="hits">
	Hits: <span>26998</span>	</dd>
	</dl>
</div>


	<div id="content" class="wiki">
<div id="MatrixTransformations" class="wikipage searchable">If a position in space is defined by 3 coordinates (aka x,y,z) MatrixTransformations provide a method of converting the coordinate into a different coordinate frame. In OpenGL these are 4 by 4 matrices. Many references describe their use; this is a quick and dirty description.
<p>Example transformations:</p>
<p><strong>Ex 1</strong>: I have a vehicle with a position in 3D space. I am looking at the vehicle from a different position, and want to draw the vehicle on a computer screen. There are 2 coordinate systems - the world (where the vehicle is) and the computer screen (x pixels, y pixels and z buffer). A matrix transform relates the world to the screen coordinate, this transformation is often thought of as a camera. Using a 4by4 matrix, the effects of perspective distortion (far things look smaller) can be modelled.</p>
<p><strong>Ex 2</strong>: The vehicle moves through the world; the transformation of vehicle to world can also be modelled with a 4 by 4 matrix. Also the transformation of wheel rotation to vehicle coordinates uses a matrix, and the total transfrom from wheel to world to screen can be replaced by a single matrix. This is essentially what a graphics card provides. <span class="wiki">OpenGL</span> provides a mechanism to define nested transformations such as those from the wheel to the world. Scene Graphs provide one means of defining how the transformations relate to definitions of shapes and polygons.</p>
<p>A 4 by 4 matrix operates on a 3 coordinate by standard matrix multiplication, with an 'artifical' or homogeneous coordinate suppied as the 4th element of the coordinate (in almost all cases this coordinate is 1).</p>
<p><tt>v' = v*M</tt> where v is the original position, M the matrix and v' is how the position looks on screen (or in a parent coordinate system).</p>
<p>The matrix can be thought of as a Rotation, Scale and Translation rolled into one matrix. Then</p>
<p><tt>M = S * R * T</tt></p>
<p>or when applied to a coordinate the coordinate is scaled, then rotated and finally translated to its destination. In the matrix the top left 3 by 3 elements represent rotation and scaling; the bottom row represents translation (and the diagonal of the rotation represents scaling).</p>
<p>For most transformations you will use an orthonormal transformation - one where the distance between 2 points is the same before and after transforming. (The exception is the perspective transformation which is handled by 'cameras' 'cameragroups' and so on in Producer, so can generally be regarded as 'different'.)</p>
<p>See also <a class="ext-link" href="http://www.makegames.com/3drotation/"><span class="icon">http://www.makegames.com/3drotation/</span></a> <br /> (note from Robert Osfield, the above text refers to left hand rule, and pre multiplication, whereas as <span class="wiki">OpenGL</span> uses right hand rule, and the OSG maths classes uses post multiplication.) (GWM I think this is now corrected to right hand, post multiply.)</p>
<p>A useful transformation is rotation or scaling about a position other than the origin. This is performed by 3 operations - move the object so that the pivot point is at the origin, rotate and move the object so that the pivot point is at its original location. This matrix is often written as</p>
<blockquote>
<p><tt>M = T' * R * T</tt></p>
</blockquote>
<blockquote>
<p>T' is translation by minus the pivot point T(-Xp,-Yp,-Zp), it moves the vertex v to be relative to the origin; R is rotation or scale matrix about the origin then T moves the pivot point back to its correct location T(Xp,Yp,Zp).</p>
</blockquote>
<p>This matrix only needs to be calculated once (the matrix multiplies are only done once) then applied as a single matrix to all vertices below the transformation.</p>
<hr />
<p>by Don Burns :</p>
<p>The OSG matrices are treated as row-major matrices, and matrix operations use prefix notation.</p>
<p>So, in effect, this:</p>
<blockquote>
<p><tt>V' = M*V;</tt></p>
</blockquote>
<p>should not work. (For some reason, it seems that Robert has _made_ it work, which seems confusing as you are currently experiencing).</p>
<p>It should be limited to this for consistency.</p>
<blockquote>
<p><tt>V' = V * M;</tt></p>
</blockquote>
<p>So, the question is, why does OSG use this convention? The books seem to use column major, prefix notation, including the <span class="wiki">OpenGL</span> book. However, if you read the <span class="wiki">OpenGL</span> book then try a matrix in C you might be somewhat surprised by the result.</p>
<p>For example, The <span class="wiki">OpenGL</span> book says that a A rotation around Z is, (as you describe):</p>
<pre class="wiki">    | cosA  -sinA   0    0 |
    | sinA   cosA   0    0 |
    | 0        0    1    0 |
    | 0        0    0    1 |
</pre>
<p>However, pass this matrix</p>
<pre class="wiki">    GLfloat ZrotateMatrix[][4] = {
       { cosA, -sinA, 0, 0 },
       { sinA,  cosA, 0, 0 },
       {    0,  0,    1, 0 },
       {    0,  0,    0, 1 }
    };

</pre>
<p>to glLoadMatrixf(): and see what happens (g'ahead try it, don't take my word for it). Your rotations will be the opposite of what you expect.</p>
<p>Likewise, the <span class="wiki">OpenGL</span> book tells you that a translation matrix will look like this:</p>
<pre class="wiki">    | 1  0  0  Tx |
    | 0  1  0  Ty |
    | 0  0  1  Tz |
    | 0  0  0  1  |

</pre>
<p>But if you build a C matrix that looks like that, the results will be most amusing. Prove this to yourself. Write a little <a class="wiki" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/OpenGL">OpenGL</a> program that translates an object along the X axis by 'X':</p>
<pre class="wiki">// This will work:
    GLfloat mat[][4] = {
        { 1.0, 0.0, 0.0, 0.0},
        { 0.0, 1.0, 0.0, 0.0},
        { 0.0, 0.0, 1.0, 0.0},
        {   X, 0.0, 0.0, 1.0}
    };

    glPushMatrix();
    glMultMatrixf( &amp;mat[0][0] );
    glutSolidTeapot( 1.0 );
    glPopMatrix();

    X += 0.01;

/// But this....

    GLfloat mat[][4] = {
        { 1.0, 0.0, 0.0, X},
        { 0.0, 1.0, 0.0, 0.0},
        { 0.0, 0.0, 1.0, 0.0},
        { 0.0, 0.0, 0.0, 1.0}
    };
</pre>
<p>Likewise, when we are dealing with vector operations, the text books will use this notation:</p>
<blockquote>
<p><tt>V' = M * V</tt></p>
</blockquote>
<p>and in abbreviated long hand:</p>
<pre class="wiki">    V' =  M * |Vx|
              |Vy|
              |Vz|
</pre>
<p>Here's a challenge for you... try creating a a single column vector matrix in C or C++. :)</p>
<p>What is familiar to us is this:</p>
<pre class="wiki">    GLfloat vector[3] = { Vx, Vy, Vz };
</pre>
<p>Now, the difference between OSG and OpenGL when it comes to vector/matrix operations is that OpenGL doesn't have any exposed matrix or vector math. In essence you have:</p>
<pre class="wiki">    glLoadMatrix*()
    glMultMatrix*()
</pre>
<p>But the implementation of these is "under the covers" so <a class="wiki" href="http://trac.openscenegraph.org/projects/osg//wiki/Support/KnowledgeBase/OpenGL">OpenGL</a> can have the luxury of using textbook notation when discussion matrix and vector operations in the textbook. The programmer, however, will need to transpose his matrix in his mind when he is passing a C++ array to glLoadMatrix().</p>
<p>In OSG we deliberately chose (at least I thought we did) early on to maintain a row-major, prefix notation of matrix operations to better match C++ arrays. This has implications for order of matrices and vector operations. I'm not sure what Robert intended by adding V' = M * V, but if I were you, I'd simply pretend it didn't exist so as to not confuse the issue.</p>
<p>One more note on this issue. Order of matrix operations is a bit more "comfortable" (my opinion) with row-major prefix notation. Let me explain here. Say we want to make our beloved cow, sit up and beg. In the default orientation, the cow appears standing up, facing to the right (down the X axis). To make the cow sit up and beg, we'll need to first, rotate her -PI/2 around the Z axis, so she's facing us (looking down the -Y axis), then we'll need to rotate here -PI/2 around the X axis so she's sitting, head up with her hoofs extended toward us.</p>
<p>With prefix notation, this is simply:</p>
<pre class="wiki">    osg::Matrix A = osg::Matrix::rotate( -M_PI*0.5, 0, 0, 1 );
    osg::Matrix B = osg::Matrix::rotate( -M_PI*0.5, 1, 0, 0 );

    osg::Matrix R = A * B;
</pre>
<p>That is, in "English" notation, and reading from left to right, "First rotate around Z (A matrix), then rotate around X (B matrix)".</p>
<p>However, in postfix notation, the operation would be:</p>
<pre class="wiki">    osg::Matrix R = B * A;
</pre>
<p>which might have a complex translation to the "English" notation, as it is certainly _not_ "rotate around X, then rotate around Z", as this would provide us with a view of our cow after having experienced the dubious sport of cow-tipping.</p>
<hr />
<p>Robert adds :</p>
<blockquote>
<p>In OSG we deliberately chose (at least I thought we did) early on to maintain a row-major, prefix notation of matrix operations to better match C++ arrays. This has implications for order of matrices and vector operations. I'm not sure what Robert intended by adding V' = M * V, but if I were you, I'd simply pretend it didn't exist so as to not confuse the issue.</p>
</blockquote>
<p>V' = V*M and M* V are defined....</p>
<p>the first, as Don points out is the standard one you should use, and the later is just for special occasions...</p>
<p>And the special occasion is when you'd want to do V' = V* Mtranspose where you only have M to hand and would have to do a transpose of M.</p>
<p>This can be rewritten V' = M * V;</p>
<p>The particular time when you'll do this would be when transforming normals and planes by the inverse transpose. This is done all the time in the cull traversal, where the inverse just happens to be the accumulated modelview matrix.</p>
<p>This is all a bit crafty, but certainly helps remove all those extra ops in transposing.</p>
<p>--</p>
<p>Gerrick Bivins provides a link to the OpenGL Transformations FAQ (<a class="ext-link" href="http://www.opengl.org/resources/faq/technical/transformations.htm"><span class="icon">http://www.opengl.org/resources/faq/technical/transformations.htm</span></a>) <br /> Usenet posts by Mark Segal and Eric Haines (<a class="ext-link" href="http://steve.hollasch.net/cgindex/math/matrix/column-vec.html"><span class="icon">http://steve.hollasch.net/cgindex/math/matrix/column-vec.html</span></a>)</p>
</div>
</div> 
			
				
<ul class="pager pagenav">
	<li class="previous">
		<a class="hasTooltip" title="Language Wrappers" aria-label="Previous article: Language Wrappers" href="95-language-wrappers.html" rel="prev">
			<span class="icon-chevron-left" aria-hidden="true"></span> <span aria-hidden="true">Prev</span>		</a>
	</li>
	<li class="next">
		<a class="hasTooltip" title="OpenGL to OpenSceneGraph Lookup" aria-label="Next article: OpenGL to OpenSceneGraph Lookup" href="116-opengl-to-openscenegraph-lookup.html" rel="next">
			<span aria-hidden="true">Next</span> <span class="icon-chevron-right" aria-hidden="true"></span>		</a>
	</li>
</ul>

	</div>                            </div>
                            
                                                    </div>

                                            </div>

                    
                </div>

                            </div>
            </div>
            <!-- //CONTENT -->
            
        </div>
                        </div>
                </div>
        <!-- //MAIN CONTAINER -->

                <div id="ja-navhelper"
            	class="wrap ">
                   <div class="main">
                           <div class="main-inner1 clearfix">
                <div class="ja-breadcrums">
    
</div>

<ul class="ja-links">
        <li class="top"><a href="javascript:scroll(0,0)" title="Back to top">Top</a></li>
</ul>

<ul class="no-display">
    <li><a href="#ja-content" title="Skip to content">Skip to content</a></li>
</ul>                </div>
                            </div>
                        </div>
                        <div id="ja-footer"
            	class="wrap ">
                   <div class="main clearfix">
           <div id="ja-poweredby" class="t3-logo t3-logo-light">
	<a href="http://t3.joomlart.com/" title="Powered By T3 Framework" target="_blank" rel="nofollow">Powered By T3 Framework</a>
</div>  	
<div class="ja-copyright">
	
</div>            </div>
                        </div>
            
</div>



</body>

</html>