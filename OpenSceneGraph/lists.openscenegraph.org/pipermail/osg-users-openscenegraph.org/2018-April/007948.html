<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Geometries disappearing at optimization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Geometries%20disappearing%20at%20optimization&In-Reply-To=%3CCAFN7Y%2BXvAEMzfhCUJstV55Xe7%3DVig7FDq7Ub%3D0JXEJPKSDMptA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="007947.html">
   <LINK REL="Next"  HREF="007949.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Geometries disappearing at optimization</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Geometries%20disappearing%20at%20optimization&In-Reply-To=%3CCAFN7Y%2BXvAEMzfhCUJstV55Xe7%3DVig7FDq7Ub%3D0JXEJPKSDMptA%40mail.gmail.com%3E"
       TITLE="[osg-users] Geometries disappearing at optimization">robert.osfield at gmail.com
       </A><BR>
    <I>Mon Apr  2 02:29:32 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007947.html">[osg-users] Geometries disappearing at optimization
</A></li>
        <LI>Next message (by thread): <A HREF="007949.html">[osg-users] Geometries disappearing at optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7948">[ date ]</a>
              <a href="thread.html#7948">[ thread ]</a>
              <a href="subject.html#7948">[ subject ]</a>
              <a href="author.html#7948">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>HI Andreas,

Thanks for test model with this I'm able to reproduce the bug.  I'm
now investigating this issue and have a workaround that prevent the
4th geometry from going missing but I'm really not happy with is it
doesn't actually fix the root cause of the problem.

Ideally we want geometries sets that when combined exceed the target
number of vertices to be regrouped into batches, each batch under the
limit.  We don't want to remove this limit as from my own testing
geometries with too many vertices tend to perform worse than sets of
geometries with a moderate number of vertices.

Robert.

On 2 April 2018 at 01:03, Andreas Ekstrand
&lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">andreas.ekstrand at remograph.com</A>&gt; wrote:
&gt;<i> I'm sending this message again with an attached .osgb file instead of
</I>&gt;<i> debug-friendly .osg, because of the attachment size:
</I>&gt;<i>
</I>&gt;<i> Hi Robert,
</I>&gt;<i>
</I>&gt;<i> Happy Easter! :-)
</I>&gt;<i>
</I>&gt;<i> Sorry for the late feedback on the performance changes in the
</I>&gt;<i> MergeGeometryVisitor that I was involved in a while ago. But I discovered a
</I>&gt;<i> rather serious issue - in the attached example mesh the last geometry
</I>&gt;<i> (lower-left quadrant) disappears in MergeGeometryVisitor::mergeGroup and I
</I>&gt;<i> think it's due to it reaching the 10000 vertices maximum. It works in old
</I>&gt;<i> 3.4 and it's easily reproducible in the 3.6 branch by just running osgviewer
</I>&gt;<i> with default optimizations, while turning off optimizations will keep the
</I>&gt;<i> geometry intact.
</I>&gt;<i>
</I>&gt;<i> I haven't dug deep enough to find the detailed cause but the last
</I>&gt;<i> &quot;left-over&quot; geometry obviously isn't added back. Hopefully you will find the
</I>&gt;<i> cause quickly since it wasn't too long ago you rewrote parts of this code.
</I>&gt;<i> If not, please let me know if I can help with further debugging!
</I>&gt;<i>
</I>&gt;<i> Also, I wonder if there shouldn't be a way to control the 10000 maximum from
</I>&gt;<i> outside Optimizer somehow?
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Andreas
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I></PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007947.html">[osg-users] Geometries disappearing at optimization
</A></li>
	<LI>Next message (by thread): <A HREF="007949.html">[osg-users] Geometries disappearing at optimization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7948">[ date ]</a>
              <a href="thread.html#7948">[ thread ]</a>
              <a href="subject.html#7948">[ subject ]</a>
              <a href="author.html#7948">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
