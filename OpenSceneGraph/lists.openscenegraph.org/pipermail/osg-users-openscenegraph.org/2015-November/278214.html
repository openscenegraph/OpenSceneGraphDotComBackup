<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Processor Affinity and forked processes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Processor%20Affinity%20and%20forked%20processes&In-Reply-To=%3CCA%2B1cFj%2BW7VF1EMKAWe_dzOEoVb98f7H476LLnSFeELNcHKdQEg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="278211.html">
   <LINK REL="Next"  HREF="002048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Processor Affinity and forked processes</H1>
<!--htdig_noindex-->
    <B>Kristofer Tingdahl</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Processor%20Affinity%20and%20forked%20processes&In-Reply-To=%3CCA%2B1cFj%2BW7VF1EMKAWe_dzOEoVb98f7H476LLnSFeELNcHKdQEg%40mail.gmail.com%3E"
       TITLE="[osg-users] Processor Affinity and forked processes">kristofer.tingdahl at dgbes.com
       </A><BR>
    <I>Mon Nov 16 03:09:46 PST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="278211.html">[osg-users] TBO bind on Mac OSX failure
</A></li>
        <LI>Next message: <A HREF="002048.html">[osg-users] Processor Affinity and forked processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#278214">[ date ]</a>
              <a href="thread.html#278214">[ thread ]</a>
              <a href="subject.html#278214">[ subject ]</a>
              <a href="author.html#278214">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

we just found and solved the most weird bug that was associated with our
upgrade from OSG 3.2 to OSG 3.4 .

Our problem was that our batch programs (i.e. number-crunchers) would only
run single threaded when launched from our application, but multi-threaded
when launched on the command line.

After 10 hours debugging, we found out that OSG 3.4 sets the CPU affinity
from osgViewer::ViewerBase::startThreading(). When the process forks, this
setting is inherited by the new process, and hence limits the new process
to only run on one physical CPU.

Our solution to this was to let the new processes unset the affinity mask,
but I wish to make the community aware of this unwanted effect of OSG 3.4

Best regards,


Kristofer Tingdahl
-- 
*Dr. Kristofer Tingdahl**Chief Executive Officer*
*______________________________*

*dGB Earth Sciences*Phone:+31 53 4315155Skype:dgbtingdahlE-mail:
<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">kristofer.tingdahl at dgbes.comInternet</A>:dgbes.com &amp; opendtect.org
*______________________________*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20151116/37967ff9/attachment-0002.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20151116/37967ff9/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="278211.html">[osg-users] TBO bind on Mac OSX failure
</A></li>
	<LI>Next message: <A HREF="002048.html">[osg-users] Processor Affinity and forked processes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#278214">[ date ]</a>
              <a href="thread.html#278214">[ thread ]</a>
              <a href="subject.html#278214">[ subject ]</a>
              <a href="author.html#278214">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
