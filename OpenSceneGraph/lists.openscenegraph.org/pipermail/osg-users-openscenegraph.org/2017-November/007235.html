<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] When gets the view matrix of a camera ipdated
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20When%20gets%20the%20view%20matrix%20of%20a%20camera%20ipdated&In-Reply-To=%3CCAFN7Y%2BWFCoqysUjXLkBdX1Sqcm4hHygLeaV0Z08YgwoT3R8BUw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="007234.html">
   <LINK REL="Next"  HREF="007264.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] When gets the view matrix of a camera ipdated</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20When%20gets%20the%20view%20matrix%20of%20a%20camera%20ipdated&In-Reply-To=%3CCAFN7Y%2BWFCoqysUjXLkBdX1Sqcm4hHygLeaV0Z08YgwoT3R8BUw%40mail.gmail.com%3E"
       TITLE="[osg-users] When gets the view matrix of a camera ipdated">robert.osfield at gmail.com
       </A><BR>
    <I>Sat Nov 18 09:59:09 PST 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007234.html">[osg-users] When gets the view matrix of a camera ipdated
</A></li>
        <LI>Next message (by thread): <A HREF="007264.html">[osg-users] When gets the view matrix of a camera ipdated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7235">[ date ]</a>
              <a href="thread.html#7235">[ thread ]</a>
              <a href="subject.html#7235">[ subject ]</a>
              <a href="author.html#7235">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Werner,

The initial draw callback is called at the start of the draw traversal
for that Camera's rendering graph, this rendering graph is populated
by the cull traversal which happens prior to the draw traversal, this
includes all the accumulation of all the matrices in the scene graph
into final modelview matrices, so changing the Camera's view matrix
during the initial draw callback won't affect the rendering result for
that frame.

You should set the Camera's view matrix in the update or at latest
cull traversal. Have a look at the RTT Camera's in the osgShadow
library.


Robert.


On 18 November 2017 at 16:06, <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">Werner.Modenbach at texion.eu</A>
&lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">Werner.Modenbach at texion.eu</A>&gt; wrote:
&gt;<i> Hi all,
</I>&gt;<i> I have written some classes for special effects like ambient occlusion or
</I>&gt;<i> shadow.
</I>&gt;<i> All those classes are using their own prerender cameras. The cameras use the
</I>&gt;<i> initial draw callback for updating their view matrices by using the main
</I>&gt;<i> cameras view matrix.
</I>&gt;<i> Unfortunately it looks like the rendered shadow/ ambient occlusion matrices
</I>&gt;<i> correspond to the previous frame. So my guess is that the view matrix of the
</I>&gt;<i> main camera isn't updated from the camera manipulator at the time of the
</I>&gt;<i> callback.
</I>&gt;<i> Is there any better callback I can use for that?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I></PRE>
























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007234.html">[osg-users] When gets the view matrix of a camera ipdated
</A></li>
	<LI>Next message (by thread): <A HREF="007264.html">[osg-users] When gets the view matrix of a camera ipdated
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7235">[ date ]</a>
              <a href="thread.html#7235">[ thread ]</a>
              <a href="subject.html#7235">[ subject ]</a>
              <a href="author.html#7235">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
