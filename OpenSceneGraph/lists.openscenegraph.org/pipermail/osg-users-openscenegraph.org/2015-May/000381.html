<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Enabling Vsync gives dramatic increase in latency
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Enabling%20Vsync%20gives%20dramatic%20increase%20in%20latency&In-Reply-To=%3C1431530891.m2f.63739%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="000374.html">
   <LINK REL="Next"  HREF="276607.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Enabling Vsync gives dramatic increase in latency</H1>
<!--htdig_noindex-->
    <B>Bj&#195;&#182;rn Blissing</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Enabling%20Vsync%20gives%20dramatic%20increase%20in%20latency&In-Reply-To=%3C1431530891.m2f.63739%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Enabling Vsync gives dramatic increase in latency">bjorn.blissing at vti.se
       </A><BR>
    <I>Wed May 13 08:28:11 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="000374.html">[osg-users] Enabling Vsync gives dramatic increase in latency
</A></li>
        <LI>Next message: <A HREF="276607.html">[osg-users] [osgPlugins] DESPERATE!! Tried everything to get	JPEGS TO LOAD!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#381">[ date ]</a>
              <a href="thread.html#381">[ thread ]</a>
              <a href="subject.html#381">[ subject ]</a>
              <a href="author.html#381">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Jan Ciger wrote:
&gt;<i> 
</I>&gt;<i> Did you try to call glFlush() at the end of the each frame in your OpenGL application? That should force the driver to not buffer but to actually hold your program until the vsync event. Right now you are rendering much faster than the GPU can scan out, so your program blocks only once the rendering queue becomes full - which seems to be about the 3 frames of latency. 
</I>&gt;<i> 
</I>&gt;<i> glFlush() is bad for performance because it stalls the GPU on every frame but should lower the latency from the fixed 60ms you see with vsync on. 
</I>&gt;<i> 
</I>

No, I did not since I thought that a call to SwapBuffers incurred a implicit flush of the pipeline. So I experimented with calling glFlush() before and after the call to the SwapBuffer function. I also tried calling glFinish() before and after the call to the SwapBuffer function:

glFlush() before SwapBuffers: Min: 57.9 Max: 66.0 Avg: 61.2
glFlush() after SwapBuffers: Min: 50.9 Max: 64.1 Avg: 60.9
glFinish() before SwapBuffers: Min: 38.9 Max: 47.1 Avg: 43.0
glFinish() after SwapBuffers: Min: 19.9 Max: 26.0 Avg: 23.2

So glFlush() seems to have little effect on latency. But glFinish() on the other hand improves the latency noticeable. 

Best regards
Bj&#246;rn

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=63739#63739">http://forum.openscenegraph.org/viewtopic.php?p=63739#63739</A>






</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000374.html">[osg-users] Enabling Vsync gives dramatic increase in latency
</A></li>
	<LI>Next message: <A HREF="276607.html">[osg-users] [osgPlugins] DESPERATE!! Tried everything to get	JPEGS TO LOAD!
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#381">[ date ]</a>
              <a href="thread.html#381">[ thread ]</a>
              <a href="subject.html#381">[ subject ]</a>
              <a href="author.html#381">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
