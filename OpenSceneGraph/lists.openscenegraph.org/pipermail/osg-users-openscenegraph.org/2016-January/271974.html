<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Pragmatic shader - a new #pragma directive proposition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Pragmatic%20shader%20-%20a%20new%20%23pragma%20directive%0A%20proposition&In-Reply-To=%3C56977EF9.1010603%40ib-caddy.si%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="271975.html">
   <LINK REL="Next"  HREF="271976.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Pragmatic shader - a new #pragma directive proposition</H1>
<!--htdig_noindex-->
    <B>Robert Milharcic</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Pragmatic%20shader%20-%20a%20new%20%23pragma%20directive%0A%20proposition&In-Reply-To=%3C56977EF9.1010603%40ib-caddy.si%3E"
       TITLE="[osg-users] Pragmatic shader - a new #pragma directive proposition">robert.milharcic at ib-caddy.si
       </A><BR>
    <I>Thu Jan 14 02:56:57 PST 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="271975.html">[osg-users] Pragmatic shader - a new #pragma directive proposition
</A></li>
        <LI>Next message: <A HREF="271976.html">[osg-users] Pragmatic shader - a new #pragma directive proposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#271974">[ date ]</a>
              <a href="thread.html#271974">[ thread ]</a>
              <a href="subject.html#271974">[ subject ]</a>
              <a href="author.html#271974">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 14.1.2016 9:52, Sebastian Messerschmidt wrote:
&gt;<i> Hi Robert,
</I>&gt;<i>
</I>&gt;<i> This seems more complicated than needed.
</I>&gt;<i> Why not pass the number of lights as a compile time constant
</I>&gt;<i>
</I>&gt;<i> #pragma import_defines (NUM_LIGHTS)
</I>&gt;<i>
</I>&gt;<i> shader_state-&gt;setDefine(&quot;NUM_LIGHTS&quot;,12);
</I>&gt;<i>
</I>&gt;<i> and use uniform arrays:
</I>&gt;<i>
</I>&gt;<i> uniform vec4 u_LightColor[NUM_LIGHTS];
</I>&gt;<i>
</I>&gt;<i> for (int i = 0; i &lt; NUM_LIGHTS;++i)
</I>&gt;<i> {
</I>&gt;<i>     light+=calcLight(u_LightColor[i], ...):
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> I feel your approach will bloat the preprocessor code path and will complicate the use. 
</I>
Hi Sebastian,

First, thank you for your input. Yes, that is more or less the same approach I'm currently using. The downside of this approach is that it requires additional nontrivial code logic for the uniform array management (u_LightColor) and that is why I started to look at the alternatives. There is also an upper limit for the size of the array that needs to be taken into account.  Also, the loop represents unnecessary overhead (though, this is not a problem on a never hardware). On the other hand, my suggestion fits well into existing pragmatic shader composition logic and probably has less downsides.

Cheers,
Robert Milharcic
</PRE>







<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="271975.html">[osg-users] Pragmatic shader - a new #pragma directive proposition
</A></li>
	<LI>Next message: <A HREF="271976.html">[osg-users] Pragmatic shader - a new #pragma directive proposition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#271974">[ date ]</a>
              <a href="thread.html#271974">[ thread ]</a>
              <a href="subject.html#271974">[ subject ]</a>
              <a href="author.html#271974">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
