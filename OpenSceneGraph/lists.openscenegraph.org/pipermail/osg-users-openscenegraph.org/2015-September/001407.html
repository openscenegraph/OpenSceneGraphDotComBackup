<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Quat::makeRotate potential division by zero
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Quat%3A%3AmakeRotate%20potential%20division%20by%20zero&In-Reply-To=%3C55E6AB9D.7000006%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="001406.html">
   <LINK REL="Next"  HREF="001408.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Quat::makeRotate potential division by zero</H1>
<!--htdig_noindex-->
    <B>Sebastian Messerschmidt</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Quat%3A%3AmakeRotate%20potential%20division%20by%20zero&In-Reply-To=%3C55E6AB9D.7000006%40gmx.de%3E"
       TITLE="[osg-users] Quat::makeRotate potential division by zero">sebastian.messerschmidt at gmx.de
       </A><BR>
    <I>Wed Sep  2 00:56:13 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001406.html">[osg-users] Quat::makeRotate potential division by zero
</A></li>
        <LI>Next message: <A HREF="001408.html">[osg-users] Quat::makeRotate potential division by zero
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1407">[ date ]</a>
              <a href="thread.html#1407">[ thread ]</a>
              <a href="subject.html#1407">[ subject ]</a>
              <a href="author.html#1407">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Matthias,

I second Robert's opinion. Passing a zero-length vector simply causes in 
invalid results to be calculated.
My vote would be towards using an assert, so the user is noticed in 
debug builds about the potentially wrong results.
Thats what some other libraries do to hint invalid parameters in 
mathematical functions at least in checked/debug builds..


Cheers
Sebastian
&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> Our team chased down a bug where we passed an invalid rotation vector to:
</I>&gt;<i>
</I>&gt;<i> void osg::Quat::makeRotate(const osg::Vec3d&amp; from, const osg::Vec3d&amp; to)
</I>&gt;<i>
</I>&gt;<i> we passed an all zeroes Vec3d in the from parameter. This is then used
</I>&gt;<i> to normalize the vector, which causes INF values and lots of bad
</I>&gt;<i> things further down the line in our code. I know the bug is in our
</I>&gt;<i> code but I also see that there are divide-by-zero checks made in other
</I>&gt;<i> variations of makeRotate(...). The makeRotate_original even had a
</I>&gt;<i> warning print-out.
</I>&gt;<i>
</I>&gt;<i> I guess it's to old performance vs user-friendliness problem, and
</I>&gt;<i> that's why I wanted to bring it up here before submitting anything.
</I>&gt;<i>
</I>&gt;<i> What do you think?
</I>&gt;<i>
</I>&gt;<i> /Mattias
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001406.html">[osg-users] Quat::makeRotate potential division by zero
</A></li>
	<LI>Next message: <A HREF="001408.html">[osg-users] Quat::makeRotate potential division by zero
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1407">[ date ]</a>
              <a href="thread.html#1407">[ thread ]</a>
              <a href="subject.html#1407">[ subject ]</a>
              <a href="author.html#1407">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
