<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] how to get the handle of opengl texture that	corresponds to a OSG::Texture
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20how%20to%20get%20the%20handle%20of%20opengl%20texture%20that%0A%09corresponds%20to%20a%20OSG%3A%3ATexture&In-Reply-To=%3C1441856531.m2f.65083%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="001481.html">
   <LINK REL="Next"  HREF="001493.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] how to get the handle of opengl texture that	corresponds to a OSG::Texture</H1>
<!--htdig_noindex-->
    <B>Qingjie Zhang</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20how%20to%20get%20the%20handle%20of%20opengl%20texture%20that%0A%09corresponds%20to%20a%20OSG%3A%3ATexture&In-Reply-To=%3C1441856531.m2f.65083%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] how to get the handle of opengl texture that	corresponds to a OSG::Texture">305479421 at qq.com
       </A><BR>
    <I>Wed Sep  9 20:42:11 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="001481.html">[osg-users] how to get the handle of opengl texture that corresponds to a OSG::Texture
</A></li>
        <LI>Next message: <A HREF="001493.html">[osg-users] how to get the handle of opengl texture that corresponds to a OSG::Texture
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1488">[ date ]</a>
              <a href="thread.html#1488">[ thread ]</a>
              <a href="subject.html#1488">[ subject ]</a>
              <a href="author.html#1488">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Robert,
To get the handle of opengl texture, I attached a DrawCallback to the main camera, doing like these codes:
struct MyCameraPostDrawCallback : public osg::Camera::DrawCallback
{
	virtual void operator()(const osg::RenderInfo &amp;renderInfo)
	{
		int contextID = renderInfo.getContextID();
		GLuint frontTexHandle = m_frontTex-&gt;getTextureObject(contextID)-&gt;id();
		GLuint backTexHandle = m_backTex-&gt;getTextureObject(contextID)-&gt;id();
	}
};
camera-&gt;setPostDrawCallback(new MyCameraPostDrawCallback);

But the function operator() int the callback does not run, I tried setPostDrawCallback() and setFinalDrawCallback(), they were the same.
I was thinking that the DrawCallback would run every frame...
Can you tell me when the callback runs?
And, to get the handle,  is it right to attach DrawCallback to camera? If not, can you tell me the detailed method to get the handle?

Thank you,

Qingjie.


robertosfield wrote:
&gt;<i> Hi Qingjie,
</I>&gt;<i> On 9 September 2015 at 09:27, Qingjie Zhang &lt; ()&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Do you mean the DrawCallback in the Camera class, which contains
</I>&gt;<i> &gt; virtual void operator () (osg::RenderInfo&amp; renderInfo) ? And here I can use the RenderInfo right?
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Yes.&#160; You can attach draw callbacks to Drawables, StateAtttribute and Camera's.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>&gt;<i> 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; As I know, the following code can get a contextID:
</I>&gt;<i> &gt; camera-&gt;getGraphicsContext()-&gt;getState()-&gt;getContextID();
</I>&gt;<i> &gt; Is this contextID same as the upper one?
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> If you only need the contexID then getting it from the graphics context is perfectly fine.&#160; What route to take depends on when you need to do your queries.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I would add that the TextureObject for each context is only created by the draw thread for each context, so the TextureObject won't exist right away when you create your osg::Texture and assign them to the scene graph.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Robert.
</I>&gt;<i> 
</I>&gt;<i> &#160;
</I>&gt;<i> 
</I>&gt;<i>  ------------------
</I>&gt;<i> Post generated by Mail2Forum
</I>

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=65083#65083">http://forum.openscenegraph.org/viewtopic.php?p=65083#65083</A>






</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001481.html">[osg-users] how to get the handle of opengl texture that corresponds to a OSG::Texture
</A></li>
	<LI>Next message: <A HREF="001493.html">[osg-users] how to get the handle of opengl texture that corresponds to a OSG::Texture
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1488">[ date ]</a>
              <a href="thread.html#1488">[ thread ]</a>
              <a href="subject.html#1488">[ subject ]</a>
              <a href="author.html#1488">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
