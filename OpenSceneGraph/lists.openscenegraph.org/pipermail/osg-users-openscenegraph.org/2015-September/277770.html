<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] performance mystery with an osg::TerrainTile on nVidia.	Intel wins.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20performance%20mystery%20with%20an%20osg%3A%3ATerrainTile%20on%20nVidia.%0A%09Intel%20wins.&In-Reply-To=%3CCALm6U%2BqP7YaPoc6M_15NcYwUrGtXDP1qoWkZPjg8x3dA1VWv5Q%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="277768.html">
   <LINK REL="Next"  HREF="001548.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] performance mystery with an osg::TerrainTile on nVidia.	Intel wins.</H1>
<!--htdig_noindex-->
    <B>Christian Buchner</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20performance%20mystery%20with%20an%20osg%3A%3ATerrainTile%20on%20nVidia.%0A%09Intel%20wins.&In-Reply-To=%3CCALm6U%2BqP7YaPoc6M_15NcYwUrGtXDP1qoWkZPjg8x3dA1VWv5Q%40mail.gmail.com%3E"
       TITLE="[osg-users] performance mystery with an osg::TerrainTile on nVidia.	Intel wins.">christian.buchner at gmail.com
       </A><BR>
    <I>Thu Sep 17 07:05:52 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="277768.html">[osg-users] [forum] how to add print handler in osg qt
</A></li>
        <LI>Next message: <A HREF="001548.html">[osg-users] performance mystery with an osg::TerrainTile on	nVidia. Intel wins.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#277770">[ date ]</a>
              <a href="thread.html#277770">[ thread ]</a>
              <a href="subject.html#277770">[ subject ]</a>
              <a href="author.html#277770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,

I am loading a single osg::TerrainTile into my scenegraph, as a child of an
osg::Terrain. Into this tile goes a height field and one image layer.

I have got around 80k vertices and 157k triangles in a single drawable that
is marked as a &quot;fast&quot; drawable in the OSG stats handler (shown by using the
s hotkey)

While this application runs butter smooth on Intel integrated graphics (60
FPS), I am experiencing somewhat of a mystery slowdown on nVidia GTX 970
and an nVidia GT 750M.

5 FPS and draw times of 170ms upwards on the 750M for example.
This is on Ubuntu 12.4 with nVidia driver 331.113

10 FPS and draw times of 78ms upwards on the GTX 970M.
This is on Ubuntu 12.4 with nVidia driver 346.46

The geometry created by src/osgTerrain/GeometryTechnique disables display
lists and uses vertex buffer objects. It's referencing a vertex buffer
using a single osg::DrawElementsUInt(GL_TRIANGLES).

The slowdown is a mystery. Any ideas what might be going on here? Why would
the nVidia driver be hitting such a slow code path? In terms of geometry
complexity, 80k vertices and 157k triangles is a joke even for today's
entry level GPUs.

Let me know if you need some code for repro'ing.

Christian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20150917/2d9a0e80/attachment-0001.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20150917/2d9a0e80/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="277768.html">[osg-users] [forum] how to add print handler in osg qt
</A></li>
	<LI>Next message: <A HREF="001548.html">[osg-users] performance mystery with an osg::TerrainTile on	nVidia. Intel wins.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#277770">[ date ]</a>
              <a href="thread.html#277770">[ thread ]</a>
              <a href="subject.html#277770">[ subject ]</a>
              <a href="author.html#277770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
