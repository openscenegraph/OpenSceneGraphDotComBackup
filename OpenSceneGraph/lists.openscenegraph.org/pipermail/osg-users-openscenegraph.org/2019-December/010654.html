<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Please%20test%20OpenScenGraph-3.6%20branch%20in%20prep%20for%0A%20the%20up%20commign%203.6.5%20maintainance%20release&In-Reply-To=%3C160be727-08c3-499b-9a43-c521130c2941%40googlegroups.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010644.html">
   <LINK REL="Next"  HREF="010651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release</H1>
<!--htdig_noindex-->
    <B>Chris Djali / AnyOldName3</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Please%20test%20OpenScenGraph-3.6%20branch%20in%20prep%20for%0A%20the%20up%20commign%203.6.5%20maintainance%20release&In-Reply-To=%3C160be727-08c3-499b-9a43-c521130c2941%40googlegroups.com%3E"
       TITLE="[osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release">krizdjali at gmail.com
       </A><BR>
    <I>Wed Dec 18 13:34:48 PST 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010644.html">[osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release
</A></li>
        <LI>Next message (by thread): <A HREF="010651.html">[osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10654">[ date ]</a>
              <a href="thread.html#10654">[ thread ]</a>
              <a href="subject.html#10654">[ subject ]</a>
              <a href="author.html#10654">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
&gt;<i>
</I>&gt;<i> I can't investigate either issue without being able to recreate the 
</I>&gt;<i> crash/GL errors myself. If either of these issues occur on an existing OSG 
</I>&gt;<i> example then I can take it from there.
</I>
Short of being able to recreate the issue and investigate it myself the 
&gt;<i> only thing I can do is suggest ways of investigating the issue that might 
</I>&gt;<i> reveal the cause of the issues.
</I>

Your suggestions are the kinds of thing I'd be looking at if I had more 
time, but unfortunately, I don't. However, it might actually be reasonable 
for you to take a look yourself. I'd put money on OpenMW being the most 
widely-installed OSG application, and it's open-source, so it would be a 
good candidate for part of your own regression testing.

Sorry to just pile on work when I'm unable to help myself. We just don't 
have anyone who's both got time and familiarity with OSG.

Thanks,

Chris

On Wednesday, 18 December 2019 10:56:39 UTC, Robert Osfield wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Tuesday, 17 December 2019 21:40:37 UTC, Chris Djali / AnyOldName3 wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi Robert,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> OpenMW still experiences some regressions when built with OSG 3.6.x 
</I>&gt;&gt;<i> instead of 3.4.1. It's completely possible they're because we're trying to 
</I>&gt;&gt;<i> coerce OSG systems to do things they weren't intended to as it's a big 
</I>&gt;&gt;<i> project created without much interaction with the OSG community.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The two issues we're tracking are:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    - <A HREF="https://gitlab.com/OpenMW/openmw/issues/5205">https://gitlab.com/OpenMW/openmw/issues/5205</A> the builds provided by 
</I>&gt;&gt;<i>    Arch Linux crash. The Arch packagers think they're not doing anything 
</I>&gt;&gt;<i>    abnormally, so I don't have a clue where the issue actually lies.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i> My best guess is there is some threading issue where a slightly different 
</I>&gt;<i> build resulting slightly different data alignment in a race condition 
</I>&gt;<i> becoming critical.  That's just a guess though, there isn't any evidence in 
</I>&gt;<i> the thread above that can pin point any specific problem.  
</I>&gt;<i>
</I>&gt;<i> Given the fickle nature of threading problems, just because it occurs in 
</I>&gt;<i> 3.6.x but not 3.4.x doesn't mean that there has been a bug introduced after 
</I>&gt;<i> 3.4, it just needs some condition to slightly change that cause some of the 
</I>&gt;<i> data in the application to be aligned different and over the application 
</I>&gt;<i> goes.
</I>&gt;<i>
</I>&gt;<i> The best I can recommend is to run the application with valgrind 
</I>&gt;<i> --tool=helgrind to see if it picks up any race conditions.
</I>&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>    - 
</I>&gt;&gt;<i>    - <A HREF="https://gitlab.com/OpenMW/openmw/issues/4773">https://gitlab.com/OpenMW/openmw/issues/4773</A> OpenGL errors we 
</I>&gt;&gt;<i>    didn't use to get. This hasn't been very thoroughly investigated at all.
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i> There are potentially other issues, too. I had a collection of stack 
</I>&gt;&gt;<i> traces of crashes and OpenGL errors that I was working through, and not all 
</I>&gt;&gt;<i> of them ended up on our tracker. As the issues I'd already brought up on 
</I>&gt;&gt;<i> the forums were taking a while to flush through due to your focus on VSG, 
</I>&gt;&gt;<i> tracking down OSG regressions had been put on the back burner, and I don't 
</I>&gt;&gt;<i> have a huge amount of time right now. That means the best I can do if you 
</I>&gt;&gt;<i> want things narrowing down is to try and get people to replicate the issues 
</I>&gt;&gt;<i> with the tip of the 3.6 branch and potentially get stack traces.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> Does this happen with all hardware/OS/driver combinations or just 
</I>&gt;<i> particular ones?
</I>&gt;<i>
</I>&gt;<i> From the glTextStorage2D documentation at 
</I>&gt;<i> <A HREF="https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexStorage2D.xhtml">https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexStorage2D.xhtml</A>
</I>&gt;<i>
</I>&gt;<i> Errors
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_OPERATION is generated by glTexStorage2D if zero is bound to 
</I>&gt;<i> target.
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_OPERATION is generated by glTextureStorage2D if texture is not 
</I>&gt;<i> the name of an existing texture object.
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_ENUM is generated if internalformat is not a valid sized 
</I>&gt;<i> internal format.
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_ENUM is generated if target or the effective target of texture 
</I>&gt;<i> is not one of the accepted targets described above.
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_VALUE is generated if width, height or levels are less than 1.
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_OPERATION is generated if target is GL_TEXTURE_1D_ARRAY or 
</I>&gt;<i> GL_PROXY_TEXTURE_1D_ARRAY and levels is greater than &#8970;log2(width)&#8971;+1
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_OPERATION is generated if target is not GL_TEXTURE_1D_ARRAY or 
</I>&gt;<i> GL_PROXY_TEXTURE_1D_ARRAY and levels is greater than &#8970;log2(max(width, 
</I>&gt;<i> height))&#8971;+1
</I>&gt;<i>
</I>&gt;<i> Given the glTexStorage2D(GL_TEXTURE_2D, 1, GL_RGB8, 320, 320) looks valid 
</I>&gt;<i> on it's own we are left with:
</I>&gt;<i>
</I>&gt;<i> GL_INVALID_OPERATION is generated by glTexStorage2D if zero is bound to 
</I>&gt;<i> target.
</I>&gt;<i>
</I>&gt;<i> The next step would be to put into some test code that Texture2D.cpp to 
</I>&gt;<i> track what is happening right before the call.  There is a 
</I>&gt;<i> textureObject-&gt;bind() before each call to glTexStorage2D, but perhaps this 
</I>&gt;<i> is failing for some reason.
</I>&gt;<i>
</I>&gt;<i>         GLenum texStorageSizedInternalFormat = 
</I>&gt;<i> extensions-&gt;isTextureStorageEnabled &amp;&amp; (_borderWidth==0) ? 
</I>&gt;<i> selectSizedInternalFormat() : 0;
</I>&gt;<i>          if (texStorageSizedInternalFormat!=0)
</I>&gt;<i>          {
</I>&gt;<i>              textureObject = generateAndAssignTextureObject(contextID, 
</I>&gt;<i> GL_TEXTURE_2D, _numMipmapLevels, texStorageSizedInternalFormat, 
</I>&gt;<i> _textureWidth, _textureHeight, 1, _borderWidth);
</I>&gt;<i>              textureObject-&gt;bind();
</I>&gt;<i>              applyTexParameters(GL_TEXTURE_2D, state);
</I>&gt;<i>              extensions-&gt;glTexStorage2D( GL_TEXTURE_2D, 
</I>&gt;<i> osg::maximum(_numMipmapLevels,1), texStorageSizedInternalFormat,
</I>&gt;<i>                       _textureWidth, _textureHeight);
</I>&gt;<i>          }
</I>&gt;<i>          else
</I>&gt;<i>          {
</I>&gt;<i>              GLenum internalFormat = _sourceFormat ? _sourceFormat : 
</I>&gt;<i> _internalFormat;
</I>&gt;<i>              textureObject = generateAndAssignTextureObject(contextID, 
</I>&gt;<i> GL_TEXTURE_2D, _numMipmapLevels, internalFormat, _textureWidth, 
</I>&gt;<i> _textureHeight, 1, _borderWidth);
</I>&gt;<i>              textureObject-&gt;bind();
</I>&gt;<i>              applyTexParameters(GL_TEXTURE_2D, state);
</I>&gt;<i>              glTexImage2D( GL_TEXTURE_2D, 0, _internalFormat,
</I>&gt;<i>                       _textureWidth, _textureHeight, _borderWidth,
</I>&gt;<i>                       internalFormat,
</I>&gt;<i>                       _sourceType ? _sourceType : GL_UNSIGNED_BYTE,
</I>&gt;<i>                       0);
</I>&gt;<i>         }
</I>&gt;<i>
</I>&gt;<i> I can't investigate either issue without being able to recreate the 
</I>&gt;<i> crash/GL errors myself. If either of these issues occur on an existing OSG 
</I>&gt;<i> example then I can take it from there.
</I>&gt;<i>
</I>&gt;<i> Short of being able to recreate the issue and investigate it myself the 
</I>&gt;<i> only thing I can do is suggest ways of investigating the issue that might 
</I>&gt;<i> reveal the cause of the issues.
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Robert.
</I>&gt;<i>
</I>
-- 
You received this message because you are subscribed to the Google Groups &quot;OpenSceneGraph Users&quot; group.
To unsubscribe from this group and stop receiving emails from it, send an email to <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users+unsubscribe at googlegroups.com.</A>
To view this discussion on the web visit <A HREF="https://groups.google.com/d/msgid/osg-users/160be727-08c3-499b-9a43-c521130c2941%40googlegroups.com.">https://groups.google.com/d/msgid/osg-users/160be727-08c3-499b-9a43-c521130c2941%40googlegroups.com.</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20191218/7608b305/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20191218/7608b305/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010644.html">[osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release
</A></li>
	<LI>Next message (by thread): <A HREF="010651.html">[osg-users] Please test OpenScenGraph-3.6 branch in prep for the up commign 3.6.5 maintainance release
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10654">[ date ]</a>
              <a href="thread.html#10654">[ thread ]</a>
              <a href="subject.html#10654">[ subject ]</a>
              <a href="author.html#10654">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
