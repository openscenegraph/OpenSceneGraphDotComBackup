<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Strange behaviour on GBufferCamera with 2 attached osg::Image
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Strange%20behaviour%20on%20GBufferCamera%20with%202%20attached%0A%20osg%3A%3AImage&In-Reply-To=%3Cf4cb7b6a-01bd-344e-5cfd-58935c7a395a%40texion.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="008582.html">
   <LINK REL="Next"  HREF="008583.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Strange behaviour on GBufferCamera with 2 attached osg::Image</H1>
<!--htdig_noindex-->
    <B>Werner Modenbach</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Strange%20behaviour%20on%20GBufferCamera%20with%202%20attached%0A%20osg%3A%3AImage&In-Reply-To=%3Cf4cb7b6a-01bd-344e-5cfd-58935c7a395a%40texion.eu%3E"
       TITLE="[osg-users] Strange behaviour on GBufferCamera with 2 attached osg::Image">Werner.Modenbach at texion.eu
       </A><BR>
    <I>Wed Jun 27 05:53:03 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008582.html">[osg-users] Build error under Windows? Need feedback from Windows users to understand issue
</A></li>
        <LI>Next message (by thread): <A HREF="008583.html">[osg-users] Strange behaviour on GBufferCamera with 2 attached osg::Image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8581">[ date ]</a>
              <a href="thread.html#8581">[ thread ]</a>
              <a href="subject.html#8581">[ subject ]</a>
              <a href="author.html#8581">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,

I found a strange behavior of a GBufferCamera. I want to get the color
channel in one image and the depth channel in another image.When
What I do:

if(!renderImage.valid()){

renderImage=newosg::Image;

renderImage-&gt;allocateImage(width,height,1,GL_RGBA,GL_UNSIGNED_BYTE,1);

renderImage-&gt;setInternalTextureFormat(GL_RGBA8);

}

if(includeDepth&amp;&amp;!depthImage.valid()){

depthImage=newosg::Image;

depthImage-&gt;allocateImage(width,height,1,GL_DEPTH_COMPONENT,GL_FLOAT,1);

renderImage-&gt;setInternalTextureFormat(GL_LUMINANCE32F_ARB);

}

if(!includeDepth)
renderCamera=view-&gt;createRTTCameraImage(osg::Camera::COLOR_BUFFER,0,renderImage.get(),true);
else
renderCamera=view-&gt;createRTTCameraGBufferImage(osg::Camera::COLOR_BUFFER0,renderImage.get(),osg::Camera::DEPTH_BUFFER,depthImage.get(),
osg::Camera::COLOR_BUFFER1,0,0,true);

The definition of createRTT...

osg::Camera*createRTTCameraGBufferImage(osg::Camera::BufferComponent_bufferType1,osg::Image*_image1,
osg::Camera::BufferComponent_bufferType2,osg::Image*_image2,

osg::Camera::BufferComponent_bufferType3,osg::Image*_image3,

int_orderNumber,bool_isAbsolute,bool_withScreenQuad=true);


When rendering without depth, I get a correct color channel image.
When rendering both, color and depth, the depth image is OK but the
color image seems having only the red color information.
Are there any limitations in using 2 images?

Has anybody else had such an effect already or can anybody give me a hint?

Many thanks in advance

- Werner -

Many thanks in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20180627/2803bcb0/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20180627/2803bcb0/attachment.html</A>&gt;
</PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008582.html">[osg-users] Build error under Windows? Need feedback from Windows users to understand issue
</A></li>
	<LI>Next message (by thread): <A HREF="008583.html">[osg-users] Strange behaviour on GBufferCamera with 2 attached osg::Image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8581">[ date ]</a>
              <a href="thread.html#8581">[ thread ]</a>
              <a href="subject.html#8581">[ subject ]</a>
              <a href="author.html#8581">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
