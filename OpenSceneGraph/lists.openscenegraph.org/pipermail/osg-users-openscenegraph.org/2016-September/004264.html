<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] SingleThreaded leading to whole application just running on one core
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20SingleThreaded%20leading%20to%20whole%20application%20just%0A%20running%20on%20one%20core&In-Reply-To=%3CCAFN7Y%2BWhgXqBSYPYHn%2BK8R5b%3DvShstXU1k3odaZKax7_cjgQcg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="004258.html">
   <LINK REL="Next"  HREF="004265.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] SingleThreaded leading to whole application just running on one core</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20SingleThreaded%20leading%20to%20whole%20application%20just%0A%20running%20on%20one%20core&In-Reply-To=%3CCAFN7Y%2BWhgXqBSYPYHn%2BK8R5b%3DvShstXU1k3odaZKax7_cjgQcg%40mail.gmail.com%3E"
       TITLE="[osg-users] SingleThreaded leading to whole application just running on one core">robert.osfield at gmail.com
       </A><BR>
    <I>Mon Sep 26 07:35:11 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004258.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
        <LI>Next message: <A HREF="004265.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4264">[ date ]</a>
              <a href="thread.html#4264">[ thread ]</a>
              <a href="subject.html#4264">[ subject ]</a>
              <a href="author.html#4264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>HI Christoph,

On 26 September 2016 at 14:20, Christoph Weiss &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">weiss at wsoptics.de</A>&gt; wrote:
&gt;<i> I strongly disagree with the last sentence.  It is the most general use case
</I>&gt;<i> possible:  using standard C++ features.
</I>
Please quite the hyperbole.  It does you no favours.

I am been writing C++ programs since 1992, been the project lead of
the OSG since 1999, the OSG has been started to embrace
mulit-ithreading in 2001.  I've interacted with thousands of
developers over the years. Strongly disagree with you may, but think
twice, between me and you who might know the most general use case for
the OSG?

I'm not some wet behind the ears engineer that knows nothing about
C++, threading or performance, these are things that make the OSG what
it is.

When I say we are talking about a very specific usage case it's
because in my 1i8 years as the project lead of the OSG it in my
experience it is a specific usage case rather than a common one.

&gt;<i> OSG's behavior changes the behavior of programs that, apart from OSG, rely
</I>&gt;<i> solely on the C++ specification.  This is the most general problem possible,
</I>&gt;<i> and far more important than the behavior of some specific libraries like
</I>&gt;<i> pthreads or OpenThreads.
</I>
OK, lets get some facts down.

OpenThreads pre-dates C++11 by over a decade.

Yet it still doesn't offers MORE threading control and functionality
that native C++11 threads.

Does C++11 threads have support for processor affinity?  NO.

Processor affinity is essentially for any serious threading library.
So C++ threading support is a bit of fail in this respect.

YES you can add processor affinity via the native_handle.  You'll need
to dip into pthreads or other native threading libs for this, but this
rather defeats the point of having &quot;portable&quot; C++ threading.

If you own code example you make the ASSUMPTION that the affinity mask
of the thread creating your threads allows it to run on all threads.
Now if you've never done performance critical mult-threading the idea
of processor affinity may be alien, but it's not robust approach to
muli-threading.

Why do you make this assumption about thread affinity?  Why don't you
set the thread affinity explicitly?

If you want to make your own code more robust remove the assumptions,
it'll make your own code more portable.

I've put in the effort to re-create the problem, I've found a number
of different solutions, none of which require any modifications to the
core OSG.  If there was a flaw on the OSG side then we wouldn't be
able to provide these solutions.

Robert.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004258.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
	<LI>Next message: <A HREF="004265.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4264">[ date ]</a>
              <a href="thread.html#4264">[ thread ]</a>
              <a href="subject.html#4264">[ subject ]</a>
              <a href="author.html#4264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
