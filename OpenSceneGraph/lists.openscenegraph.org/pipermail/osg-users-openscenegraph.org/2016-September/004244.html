<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] SingleThreaded leading to whole application just running on one core
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20SingleThreaded%20leading%20to%20whole%20application%20just%0A%20running%20on%20one%20core&In-Reply-To=%3CCAB6k13268FGSi7%3DuW51O8NqLoSupArB-5HUQSG6Sw-UvLLqyUg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="004243.html">
   <LINK REL="Next"  HREF="004245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] SingleThreaded leading to whole application just running on one core</H1>
<!--htdig_noindex-->
    <B>Fabian Wiesel</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20SingleThreaded%20leading%20to%20whole%20application%20just%0A%20running%20on%20one%20core&In-Reply-To=%3CCAB6k13268FGSi7%3DuW51O8NqLoSupArB-5HUQSG6Sw-UvLLqyUg%40mail.gmail.com%3E"
       TITLE="[osg-users] SingleThreaded leading to whole application just running on one core">fabian.wiesel at gmail.com
       </A><BR>
    <I>Sun Sep 25 14:52:55 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="004243.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
        <LI>Next message: <A HREF="004245.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4244">[ date ]</a>
              <a href="thread.html#4244">[ thread ]</a>
              <a href="subject.html#4244">[ subject ]</a>
              <a href="author.html#4244">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Robert,

&gt;<i> Have you tried setting the affinity of the threads that are created?
</I>&gt;<i> Have you tried creating the threads before the call to viewer.realize()?
</I>
Yes, both cause the threads being distributed across the cores. That is
probably also why initialising TBB early in main helps, as it creates a
pool of worker threads. For my app, you can consider it solved.
But don't you see a difficulty for OSG, if you cannot use any threading
library without additonal setup code?

&gt;<i> The way things are behaving looks to be down to the way that the Linux
</I>threading is forcing the inheritance of the threading affinity of the main
thread to child threads.
&gt;<i> I don't know if there is an setting on the Linux threads side that can
</I>change this behaviour so it's more consistent with other platforms.

I was looking for that, and my search was fruitless.
It also seems not to be Linux specific. FreeBSD seems to do the the same,
as is Windows:
<A HREF="https://msdn.microsoft.com/es-es/library/windows/desktop/ms686223(v=vs.85">https://msdn.microsoft.com/es-es/library/windows/desktop/ms686223(v=vs.85</A>).aspx
&gt;<i> Process affinity is inherited by any child process or newly instantiated
</I>local process

It looks more like OS X is the isolated case (and qnx).

Cheers,

Fabian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20160925/50572a4e/attachment-0003.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20160925/50572a4e/attachment-0003.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004243.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
	<LI>Next message: <A HREF="004245.html">[osg-users] SingleThreaded leading to whole application just running on one core
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4244">[ date ]</a>
              <a href="thread.html#4244">[ thread ]</a>
              <a href="subject.html#4244">[ subject ]</a>
              <a href="author.html#4244">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
