<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Need your help with zNear / zFar calculation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Need%20your%20help%20with%20zNear%20/%20zFar%20calculation&In-Reply-To=%3C5bf32dfd-9ef3-bcc1-3c1b-3b62c5462419%40texion.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="008110.html">
   <LINK REL="Next"  HREF="008115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Need your help with zNear / zFar calculation</H1>
<!--htdig_noindex-->
    <B>Werner Modenbach</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Need%20your%20help%20with%20zNear%20/%20zFar%20calculation&In-Reply-To=%3C5bf32dfd-9ef3-bcc1-3c1b-3b62c5462419%40texion.eu%3E"
       TITLE="[osg-users] Need your help with zNear / zFar calculation">Werner.Modenbach at texion.eu
       </A><BR>
    <I>Thu May  3 06:44:51 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008110.html">[osg-users] Getting the main camera.
</A></li>
        <LI>Next message (by thread): <A HREF="008115.html">[osg-users] [ANN] Job Opportunity: Aerospace Visualization Engineer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8111">[ date ]</a>
              <a href="thread.html#8111">[ thread ]</a>
              <a href="subject.html#8111">[ subject ]</a>
              <a href="author.html#8111">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Dear community,

today I need your help. Since many days I try finding a solution for my
problem - unfortunately without success.

Here are the facts:

I have a view for my scene and a camera manipulator.
The scene has a switch node holding the actual scene and some classes
for creation of shadow, ambient shadow etc.
Everything works pretty well so far.

For some reasons we decided rendering the actual scene into a texture
and displaying this texture in a hud.
So we create a texture and a rtt camera and added it to the above switch.
Then we removed the actual scene from the switch and added it as a child
to the rtt camera.

In order to get the scene moved according to the camera manipulator we
installed a cull callback updating the rtt cameras matrices:

if(renderCamera.valid()){

osg::Camera*cam=getMainCamera();

renderCamera-&gt;setViewMatrix(cam-&gt;getViewMatrix());

renderCamera-&gt;setProjectionMatrix(cam-&gt;getProjectionMatrix());

renderCamera-&gt;setClearColor(cam-&gt;getClearColor());

Without this callback all matrices are odd and zNear and zFar are both
at 0.0f.
Question 1: Why is it like that? The rtt camera is a child of the main
camera and should not need above settings. (?)
Question 2: In the original configuration zNear and zFar of the main
camera gets recalculated continuously.
&#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; In the rtt configuration zNear is always 0.0f
and zFar always 10000f. Why? The rtt camera is child of main camera and
it has the actual scene as a child.
&#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; &#160;&#160;&#160; So all cullings should take the actual scene in
account.
I'm really lost. When looking at the osgdeferred example I see the rtt
camera is just created, gets a viewport and gets a child of the main
camera. So easy!
What am I doing wrong and/or where can I start for a deeper research?

Many thanks for any help.

- Werner -



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20180503/ddce367d/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20180503/ddce367d/attachment.html</A>&gt;
</PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008110.html">[osg-users] Getting the main camera.
</A></li>
	<LI>Next message (by thread): <A HREF="008115.html">[osg-users] [ANN] Job Opportunity: Aerospace Visualization Engineer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8111">[ date ]</a>
              <a href="thread.html#8111">[ thread ]</a>
              <a href="subject.html#8111">[ subject ]</a>
              <a href="author.html#8111">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
