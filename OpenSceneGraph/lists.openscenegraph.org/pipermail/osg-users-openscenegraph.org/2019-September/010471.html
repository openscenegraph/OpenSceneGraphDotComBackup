<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] questions about developing drivers for osg/osgEarth
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20questions%20about%20developing%20drivers%20for%20osg/osgEarth&In-Reply-To=%3CCAGoufma8%3D70q8BUNvvERS0Jb-8Ph1eTotYFP8NR4Ut1fM9OSkQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010469.html">
   <LINK REL="Next"  HREF="010473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] questions about developing drivers for osg/osgEarth</H1>
<!--htdig_noindex-->
    <B>Chris Hanson</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20questions%20about%20developing%20drivers%20for%20osg/osgEarth&In-Reply-To=%3CCAGoufma8%3D70q8BUNvvERS0Jb-8Ph1eTotYFP8NR4Ut1fM9OSkQ%40mail.gmail.com%3E"
       TITLE="[osg-users] questions about developing drivers for osg/osgEarth">xenon at alphapixel.com
       </A><BR>
    <I>Thu Sep 26 09:29:26 PDT 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010469.html">[osg-users] questions about developing drivers for osg/osgEarth
</A></li>
        <LI>Next message (by thread): <A HREF="010473.html">[osg-users] questions about developing drivers for osg/osgEarth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10471">[ date ]</a>
              <a href="thread.html#10471">[ thread ]</a>
              <a href="subject.html#10471">[ subject ]</a>
              <a href="author.html#10471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>So, I don't know if Glenn Waldron of Pelican Mapping is reading this forum
frequently right now. A question about &quot;best practices&quot; is probably best
put to him. You might want to re-ask this on the osgEarth forum itself.

On Wed, Sep 25, 2019 at 12:10 PM <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">speterson at idealaero.com</A> &lt;
<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">speterson at idealaero.com</A>&gt; wrote:

&gt;<i> Wanted to let you know I had some success with this following code.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     // Feature Options (references the geometry)
</I>&gt;<i>
</I>&gt;<i>     _featureOptions.geometry() = _polygon;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     // Model Options (references the feature options and style)
</I>&gt;<i>
</I>&gt;<i>     _geomOptions.featureOptions() = _featureOptions;
</I>&gt;<i>
</I>&gt;<i>     _geomOptions.merge(_featureOptions);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     osgEarth::Layer* l = _map-&gt;getLayerByName(&quot;newlayer&quot; +
</I>&gt;<i> std::to_string(_newlayertimemin));
</I>&gt;<i>
</I>&gt;<i>     osgEarth::ModelLayer* ml = dynamic_cast&lt;osgEarth::ModelLayer*&gt;(l);
</I>&gt;<i>
</I>&gt;<i>     osgEarth::Features::FeatureModelSource* ms = (osgEarth::Features::
</I>&gt;<i> FeatureModelSource*)ml-&gt;getModelSource();
</I>&gt;<i>
</I>&gt;<i>     ms-&gt;getFeatureSource()-&gt;dirty();
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> When I was doing this before I was using ms-&gt;dirty(); which never caused
</I>&gt;<i> the redraw but found that someone in one of the forms was using a doing it
</I>&gt;<i> one call deeper on the ModelSource insteadof the FeatureModelSource and
</I>&gt;<i> this fixed my update issue within my system thread.  My changes to the
</I>&gt;<i> geometry _polygon are now working and seems to work really nicely.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ofc if this is not the optimal way to handle this please let me know. Or
</I>&gt;<i> if my shader idea for doing animations is not optimal please feel free to
</I>&gt;<i> suggest ways to make it better.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* osg-users [mailto:<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-bounces at lists.openscenegraph.org</A>] *On
</I>&gt;<i> Behalf Of *Chris Hanson
</I>&gt;<i> *Sent:* Wednesday, September 25, 2019 12:08 AM
</I>&gt;<i> *To:* OpenSceneGraph Users &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>&gt;
</I>&gt;<i> *Subject:* Re: [osg-users] questions about developing drivers for
</I>&gt;<i> osg/osgEarth
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'd like to help you a bit more, but I've been really slammed with another
</I>&gt;<i> osgEarth client this week. If you're patient, I can probably help you more
</I>&gt;<i> in a few days.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Mon, Sep 23, 2019 at 2:03 PM <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">speterson at idealaero.com</A> &lt;
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">speterson at idealaero.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;<i> Got shaders to work on geometry&#8217;s now just took me getting totally
</I>&gt;<i> frustrated and taking a walk it seems J
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> osgEarth::ModelLayerOptions layerOptions(&quot;test polygon&quot;, geomOptions);
</I>&gt;<i>
</I>&gt;<i> osgEarth::ModelLayer* test = new osgEarth::ModelLayer(layerOptions);
</I>&gt;<i>
</I>&gt;<i> osg::StateSet* tss = test-&gt;getOrCreateStateSet();
</I>&gt;<i>
</I>&gt;<i> VirtualProgram* vp = VirtualProgram::getOrCreate(tss);
</I>&gt;<i>
</I>&gt;<i> vp-&gt;setName(&quot;imageLayer&quot;);
</I>&gt;<i>
</I>&gt;<i> myshaders shaders;
</I>&gt;<i>
</I>&gt;<i> shaders.load(vp, shaders.myimagecc_Vertex);
</I>&gt;<i>
</I>&gt;<i> shaders.load(vp, shaders.myimagecc_Fragment);
</I>&gt;<i>
</I>&gt;<i> _map-&gt;addLayer(test);
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Was the code to get it working had to apply it to the ModelLayer not the
</I>&gt;<i> geometry and add some hooks into my shaders to keep the transparent parts
</I>&gt;<i> the same.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Now to figure out how to get the data to change for the shaders to act on.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> *From:* osg-users [mailto:<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-bounces at lists.openscenegraph.org</A>] *On
</I>&gt;<i> Behalf Of *Chris Hanson
</I>&gt;<i> *Sent:* Thursday, September 19, 2019 10:29 AM
</I>&gt;<i> *To:* OpenSceneGraph Users &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>&gt;
</I>&gt;<i> *Subject:* Re: [osg-users] questions about developing drivers for
</I>&gt;<i> osg/osgEarth
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Ok. That helps a lot. Thanks.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So, I theorize that you are loading a 2d vector field as a data layer,
</I>&gt;<i> that represents the 2D wind velocity vector at every data grid point
</I>&gt;<i> covering the area, and then you use some kind of shader to display that as
</I>&gt;<i> a colorfield and displays the moving flow lines? And then you update the 2d
</I>&gt;<i> vector map periodically to represent the current data?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If that's the case, it sounds like you're just needing to load a
</I>&gt;<i> conventional two-channel 2D image and do all the display work in shaders.
</I>&gt;<i> That doesn't sound like how you're doing it though?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> There's nothing at all that is file-specific about osgEarth, its drivers
</I>&gt;<i> or its data sources. Many of the drivers talk to network-based data sources
</I>&gt;<i> without accessing local files, so those shouldn't be an issue.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Glenn can probably comment better on how to best make a driver that
</I>&gt;<i> updates itself periodically or on cue, but you ought to be able to just
</I>&gt;<i> poll every 30 seconds or so and see if a data is available and refresh it
</I>&gt;<i> somehow.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> The information contained in this email and any attachments is intended
</I>&gt;<i> only for the personal and confidential use of the intended recipients. This
</I>&gt;<i> email message may be or may contain privileged and confidential
</I>&gt;<i> communications. If the reader of this e-mail is not an intended recipient,
</I>&gt;<i> you are hereby notified that you have received this communication in error
</I>&gt;<i> and that any retention, review, use, dissemination, distribution or copying
</I>&gt;<i> of this communication or the information contained herein is strictly
</I>&gt;<i> prohibited. If you have received this communication in error, please notify
</I>&gt;<i> the sender immediately and delete the original message and all attachments
</I>&gt;<i> from your system. The recipient should check this email and any attachments
</I>&gt;<i> for the presence of viruses. The company accepts no liability for any
</I>&gt;<i> damage caused, directly or indirectly, by any virus transmitted in this
</I>&gt;<i> email. This communication may also contain data subject to U.S. export
</I>&gt;<i> laws. If so, that data subject to the International Traffic in Arms
</I>&gt;<i> Regulation (ITAR) cannot be disseminated, distributed or copied to foreign
</I>&gt;<i> nationals, residing in the U.S. or abroad, absent the express prior
</I>&gt;<i> approval of the U.S. Department of State. If you have received this
</I>&gt;<i> communication in error, please notify the sender by reply e-mail and
</I>&gt;<i> destroy the e-mail message and any physical copies made of the
</I>&gt;<i> communication. Thank you.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i>
</I>&gt;<i> Chris 'Xenon' Hanson, omo sanza lettere. <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">Xenon at AlphaPixel.com</A>
</I>&gt;<i> <A HREF="http://www.alphapixel.com/">http://www.alphapixel.com/</A>
</I>&gt;<i>
</I>&gt;<i> Training &#8226; Consulting &#8226; Contracting
</I>&gt;<i>
</I>&gt;<i> 3D &#8226; Scene Graphs (Open Scene Graph/OSG) &#8226; OpenGL 2 &#8226; OpenGL 3 &#8226; OpenGL 4
</I>&gt;<i> &#8226; GLSL &#8226; OpenGL ES 1 &#8226; OpenGL ES 2 &#8226; OpenCL
</I>&gt;<i>
</I>&gt;<i> Legal/IP &#8226; Forensics &#8226; Imaging &#8226; UAVs &#8226; GIS &#8226; GPS &#8226;
</I>&gt;<i> osgEarth &#8226; Terrain &#8226; Telemetry &#8226; Cryptography &#8226; LIDAR &#8226; Embedded &#8226; Mobile &#8226;
</I>&gt;<i> iPhone/iPad/iOS &#8226; Android
</I>&gt;<i>
</I>&gt;<i> @alphapixel &lt;<A HREF="https://twitter.com/alphapixel">https://twitter.com/alphapixel</A>&gt; facebook.com/alphapixel (775)
</I>&gt;<i> 623-PIXL [7495]
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>

-- 
Chris 'Xenon' Hanson, omo sanza lettere. <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">Xenon at AlphaPixel.com</A>
<A HREF="http://www.alphapixel.com/">http://www.alphapixel.com/</A>
Training &#8226; Consulting &#8226; Contracting
3D &#8226; Scene Graphs (Open Scene Graph/OSG) &#8226; OpenGL 2 &#8226; OpenGL 3 &#8226; OpenGL 4 &#8226;
GLSL &#8226; OpenGL ES 1 &#8226; OpenGL ES 2 &#8226; OpenCL
Legal/IP &#8226; Forensics &#8226; Imaging &#8226; UAVs &#8226; GIS &#8226; GPS &#8226;
osgEarth &#8226; Terrain &#8226; Telemetry &#8226; Cryptography &#8226; LIDAR &#8226; Embedded &#8226; Mobile &#8226;
iPhone/iPad/iOS &#8226; Android
@alphapixel &lt;<A HREF="https://twitter.com/alphapixel">https://twitter.com/alphapixel</A>&gt; facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20190926/51b1d573/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20190926/51b1d573/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010469.html">[osg-users] questions about developing drivers for osg/osgEarth
</A></li>
	<LI>Next message (by thread): <A HREF="010473.html">[osg-users] questions about developing drivers for osg/osgEarth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10471">[ date ]</a>
              <a href="thread.html#10471">[ thread ]</a>
              <a href="subject.html#10471">[ subject ]</a>
              <a href="author.html#10471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
