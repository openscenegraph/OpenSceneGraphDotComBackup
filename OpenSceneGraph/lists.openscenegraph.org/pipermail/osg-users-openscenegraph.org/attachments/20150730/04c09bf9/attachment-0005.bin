#include <osgDB/ReadFile>

#include "ventana.h"

using namespace std;

int main(int argc, char** argv)
{
	
	osg::DisplaySettings::instance()->setStereoMode(osg::DisplaySettings::ANAGLYPHIC);
	osg::DisplaySettings::instance()->setEyeSeparation(0.05f);
	osg::DisplaySettings::instance()->setStereo(true);

	//Añadimos el modelo a la variable
	osg::ref_ptr<osg::Node> modelo = osgDB::readNodeFile("cessna.osg");
	//Comprobamos si hemos añadido el modelo correctamente
	if (!modelo)
	{
		cout<< "Error al leer el modelo, comprueve la ruta" <<endl;
	}

	//Creamos la vista
	osgViewer::Viewer viewer;

	//Cremos una instancia de la nueva clase para llamar a la funcion para crear la ventana
	ventana* myVentana = new ventana();

	//Añadimos la nueva ventana a la vista
	//viewer.addSlave(myVentana->createCamera(300, 100, 900, 600));

	viewer.getViews(myVentana->crearMultipleVentana(2, 2));

	//Añadimos el modelo a la vista
	viewer.setSceneData(modelo);
	//Bucle de la simulacion de la vista
	return viewer.run();
}