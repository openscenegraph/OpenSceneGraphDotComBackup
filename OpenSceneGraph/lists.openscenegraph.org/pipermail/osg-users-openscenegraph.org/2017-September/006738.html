<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20RayTracedTechnique%20hangs%20with%20Intel%20HD%20Graphics%20-%0A%09Update&In-Reply-To=%3C1504375202.m2f.71606%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="006737.html">
   <LINK REL="Next"  HREF="006739.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update</H1>
<!--htdig_noindex-->
    <B>Julien Valentin</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20RayTracedTechnique%20hangs%20with%20Intel%20HD%20Graphics%20-%0A%09Update&In-Reply-To=%3C1504375202.m2f.71606%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update">julienvalentin51 at gmail.com
       </A><BR>
    <I>Sat Sep  2 11:00:02 PDT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006737.html">[osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update
</A></li>
        <LI>Next message: <A HREF="006739.html">[osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6738">[ date ]</a>
              <a href="thread.html#6738">[ thread ]</a>
              <a href="subject.html#6738">[ subject ]</a>
              <a href="author.html#6738">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,
it surely is the duplicate of
<A HREF="http://forum.openscenegraph.org/viewtopic.php?t=14304">http://forum.openscenegraph.org/viewtopic.php?t=14304</A> 
I thought this issue was fixed since all this time
The hack i use is there
curious bug indeed, and so curious solution too
@robert
Perhaps it may be merged into master...your call...

cheers


Clement wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> Finally I found where causes the problem.  For some reasons, gl_Vertex is not normalized.  I looked at osg shader source code (src\osgVolume\Shaders).  For example, in file volume_frag.cpp, 
</I>&gt;<i> 
</I>&gt;<i> vec4 t0 = vertexPos;
</I>&gt;<i> vec4 te = cameraPos;
</I>&gt;<i> 
</I>&gt;<i> // by default te did to check the range (0 and 1), but t0 did not.
</I>&gt;<i> // If I added  some codes to check the range, then the problem is completed gone.
</I>&gt;<i> 
</I>&gt;<i> if (t0.x&lt;0.0) t0.x = 0.0; if (t0.x&gt;1.0) t0.x = 1.0; 
</I>&gt;<i> if (t0.y&lt;0.0) t0.y = 0.0; if (t0.y&gt;1.0) t0.y = 1.0; 
</I>&gt;<i> f (t0.z&lt;0.0) t0.z = 0.0; if (t0.z&gt;1.0) t0.z = 1.0; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I believe the problem is related to GLSL version and latest Intel HD Graphics driver is using higher version of GLSL, but gl_Vertex does not normalize or the value is just over 1 or less then 0 (eg. 1.00001).  Then it causes the crash when running the sampling loop.  I am not an expert on GLSL, so I would like to confirm the best solution to handle this problem. Thanks.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Clement Chu
</I>&gt;<i> 
</I>&gt;<i> ________________________________________
</I>&gt;<i> From: osg-users &lt;&gt; on behalf of  &lt;&gt;
</I>&gt;<i> Sent: Wednesday, 30 August 2017 17:31
</I>&gt;<i> To: 
</I>&gt;<i> Subject: [ExternalEmail]  RayTracedTechnique hangs with Intel HD Graphics
</I>&gt;<i> 
</I>&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> My program uses RayTracedTechnique for volume rendering, but it hangs with Intel HD graphics 520, 530 and 620. My old laptop works fine which is using Intel HD Graphic 3000.  Other machines with Nvidia cards are working fine too.  I believe the problem is on shaders in the sampling loop.  My program is using osg 3.2.3.  I also tried to upgrade to osg 3.4.1, but the same problem occurred with Intel HD Graphic 520, 530 and 620.  Do anyone have similar problem and any solution to fix it?  Many thanks.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Regards,
</I>&gt;<i> Clement Chu
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> 
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> 
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i> 
</I>&gt;<i>  ------------------
</I>&gt;<i> Post generated by Mail2Forum
</I>

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=71606#71606">http://forum.openscenegraph.org/viewtopic.php?p=71606#71606</A>





</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006737.html">[osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update
</A></li>
	<LI>Next message: <A HREF="006739.html">[osg-users] RayTracedTechnique hangs with Intel HD Graphics -	Update
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6738">[ date ]</a>
              <a href="thread.html#6738">[ thread ]</a>
              <a href="subject.html#6738">[ subject ]</a>
              <a href="author.html#6738">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
