<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] osgViewer Threading Model problem.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20osgViewer%20Threading%20Model%20problem.&In-Reply-To=%3CCAFN7Y%2BW3mpv7Bjon69ve-VfkQSkxhYM-a0nfQqhOztc080%2BqJA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="003565.html">
   <LINK REL="Next"  HREF="279789.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] osgViewer Threading Model problem.</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20osgViewer%20Threading%20Model%20problem.&In-Reply-To=%3CCAFN7Y%2BW3mpv7Bjon69ve-VfkQSkxhYM-a0nfQqhOztc080%2BqJA%40mail.gmail.com%3E"
       TITLE="[osg-users] osgViewer Threading Model problem.">robert.osfield at gmail.com
       </A><BR>
    <I>Fri Jul  1 08:45:07 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003565.html">[osg-users] osgViewer Threading Model problem.
</A></li>
        <LI>Next message: <A HREF="279789.html">[osg-users] Terrain Center and Size/Extent (TXP, LoD)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3570">[ date ]</a>
              <a href="thread.html#3570">[ thread ]</a>
              <a href="subject.html#3570">[ subject ]</a>
              <a href="author.html#3570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>HI Dario,

On 1 July 2016 at 14:26, Dario Minieri &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">paradox at cheapnet.it</A>&gt; wrote:
&gt;<i> All data change on osg tree are made inside callback, so theoretically we have no &quot;parallel&quot; change during frame. However there are a lot of visitors that I have to check, may be could do data alteration. In my test, actually, there is osgHimmel and osgOcean also inside scene.
</I>&gt;<i>
</I>&gt;<i> This type of problem, anyway, is generated by osg tree alteration parallel to frame only?
</I>
The DrawThreadPerContext threading model enables the draw thread of
one frame to run in parallel with the update, event and cull
traversals of the next frame.  This means that if you modify Drawable
or StateSet/Texture etc. state within the update, event or cull
traversals then you'll end up with a race condition.

The OSG uses a osg::Object::setDataVariance(osg::Object::STATIC |
osg::Object::DYNAMIC) hint to tell the draw traversal whether it's
safe the next frame proceed.  The way it works is the draw traversal
holds back the next frame till all the Drawable and StateSet's marked
with DYNAMIC DataVariance are dispatched.

My best guess is that you're modifying some state or drawable in the
update or event traversal (via callback for instance) without marking
the Drawable's or StateSet that encloses the dynamic state with a
DataVaraince of DYNAMIC.

Robert.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003565.html">[osg-users] osgViewer Threading Model problem.
</A></li>
	<LI>Next message: <A HREF="279789.html">[osg-users] Terrain Center and Size/Extent (TXP, LoD)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3570">[ date ]</a>
              <a href="thread.html#3570">[ thread ]</a>
              <a href="subject.html#3570">[ subject ]</a>
              <a href="author.html#3570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
