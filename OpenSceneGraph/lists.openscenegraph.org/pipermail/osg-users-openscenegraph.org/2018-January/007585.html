<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] [osgPlugins] iOS/OSX: avfoundation plugin not reporting correct media duration
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5BosgPlugins%5D%20iOS/OSX%3A%20avfoundation%20plugin%20not%0A%20reporting%20correct%20media%20duration&In-Reply-To=%3C1516356130.m2f.72789%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="007581.html">
   <LINK REL="Next"  HREF="007582.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] [osgPlugins] iOS/OSX: avfoundation plugin not reporting correct media duration</H1>
<!--htdig_noindex-->
    <B>Alessandro Terenzi</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5BosgPlugins%5D%20iOS/OSX%3A%20avfoundation%20plugin%20not%0A%20reporting%20correct%20media%20duration&In-Reply-To=%3C1516356130.m2f.72789%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] [osgPlugins] iOS/OSX: avfoundation plugin not reporting correct media duration">a.terenzi at gmail.com
       </A><BR>
    <I>Fri Jan 19 02:02:10 PST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007581.html">[osg-users] [osgPlugins] iOS/OSX: avfoundation plugin not reporting correct media duration
</A></li>
        <LI>Next message (by thread): <A HREF="007582.html">[osg-users] How to get height above terrain in lat/long location?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7585">[ date ]</a>
              <a href="thread.html#7585">[ thread ]</a>
              <a href="subject.html#7585">[ subject ]</a>
              <a href="author.html#7585">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Robert,
as far as I know the issue was present already with OSG version 3.4.0.

According to the AVFoundation documentation it seems that when one wants to access 'static' aspects of a media, such as the duration it is safe to rely on the AVAsset reference while when actually playing the media one has to use the AVPlayerItem instance, whose specific duration may be available only after a while... this is the reason, I think, the _duration variable is set to 0 in the above code.

This is what the doc says:


&gt;<i> AVAsset only models the static aspects of the media, such as its duration or creation date, and on its own, is unsuitable for playback with an AVPlayer. To play an asset, you need to create an instance of its dynamic counterpart found in AVPlayerItem.
</I>

In my proposal, [avplayer.currentItem asset] is the AVAsset reference that stores the static duration of the movie, and avplayer.currentItem is the AVPlayerItem that is still used for playback.

Anyway, I'm not an expert of AVFoundation, so please, anyone with more experience with that is welcome to comment :)

Cheers,
Alessandro

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=72789#72789">http://forum.openscenegraph.org/viewtopic.php?p=72789#72789</A>





</PRE>



































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007581.html">[osg-users] [osgPlugins] iOS/OSX: avfoundation plugin not reporting correct media duration
</A></li>
	<LI>Next message (by thread): <A HREF="007582.html">[osg-users] How to get height above terrain in lat/long location?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7585">[ date ]</a>
              <a href="thread.html#7585">[ thread ]</a>
              <a href="subject.html#7585">[ subject ]</a>
              <a href="author.html#7585">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
