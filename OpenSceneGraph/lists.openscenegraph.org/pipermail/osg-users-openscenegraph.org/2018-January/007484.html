<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Using visitor to transfer material color to geometry color
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Using%20visitor%20to%20transfer%20material%20color%20to%20geometry%0A%20color&In-Reply-To=%3Cb8d40d2a-c72e-ac21-851f-fca0c1bc3b4d%40texion.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="007646.html">
   <LINK REL="Next"  HREF="007487.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Using visitor to transfer material color to geometry color</H1>
<!--htdig_noindex-->
    <B>Werner Modenbach</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Using%20visitor%20to%20transfer%20material%20color%20to%20geometry%0A%20color&In-Reply-To=%3Cb8d40d2a-c72e-ac21-851f-fca0c1bc3b4d%40texion.eu%3E"
       TITLE="[osg-users] Using visitor to transfer material color to geometry color">Werner.Modenbach at texion.eu
       </A><BR>
    <I>Mon Jan  8 08:11:34 PST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007646.html">[osg-users] Help! New to OSG
</A></li>
        <LI>Next message (by thread): <A HREF="007487.html">[osg-users] Using visitor to transfer material color to geometry color
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7484">[ date ]</a>
              <a href="thread.html#7484">[ thread ]</a>
              <a href="subject.html#7484">[ subject ]</a>
              <a href="author.html#7484">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,

I'm using gl3 mode in my project by setting
camera-&gt;getGraphicsContext()-&gt;getState()-&gt;setUseModelViewAndProjectionUniforms(_useGL3);

camera-&gt;getGraphicsContext()-&gt;getState()-&gt;setUseVertexAttributeAliasing(_useGL3);


When loading external 3D scenes created in gl2 mode colors of geometries
are coded in materials.
I'm sure there is an easy way to check geometries for existence of
vertex colors and creating the
vertex colors if necessary from the material in the StateSet by usage of
a NodeVisitor.

I did a lot of research but couldn't figure out how to do that.
In recent git sources I found Roberts patch in Material.cpp
********************************
void Material::apply(State&amp; state) const {
&#160;&#160;&#160; state.Color(_diffuseFront.r(), _diffuseFront.g(), _diffuseFront.b(),
_diffuseFront.a());
}
********************************
How can I do the same in a NodeVisitor?

Any help is highly appreciated.

- Werner -
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20180108/2a1e9d51/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20180108/2a1e9d51/attachment.html</A>&gt;
</PRE>




























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007646.html">[osg-users] Help! New to OSG
</A></li>
	<LI>Next message (by thread): <A HREF="007487.html">[osg-users] Using visitor to transfer material color to geometry color
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7484">[ date ]</a>
              <a href="thread.html#7484">[ thread ]</a>
              <a href="subject.html#7484">[ subject ]</a>
              <a href="author.html#7484">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
