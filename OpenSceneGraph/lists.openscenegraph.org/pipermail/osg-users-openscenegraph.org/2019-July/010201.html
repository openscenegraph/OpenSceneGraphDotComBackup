<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Android: Survive Context Loss without complete reinitialization
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Android%3A%20Survive%20Context%20Loss%20without%20complete%0A%20reinitialization&In-Reply-To=%3CCAA0TzvmeRSaCLP3yCCnfD2Kh8MR0yLahq0ytoZZx%2B%2BfCd%3DtPrg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="010199.html">
   <LINK REL="Next"  HREF="010202.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Android: Survive Context Loss without complete reinitialization</H1>
<!--htdig_noindex-->
    <B>Martin Siggel</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Android%3A%20Survive%20Context%20Loss%20without%20complete%0A%20reinitialization&In-Reply-To=%3CCAA0TzvmeRSaCLP3yCCnfD2Kh8MR0yLahq0ytoZZx%2B%2BfCd%3DtPrg%40mail.gmail.com%3E"
       TITLE="[osg-users] Android: Survive Context Loss without complete reinitialization">martinsiggel+osg at gmail.com
       </A><BR>
    <I>Mon Jul 22 05:16:47 PDT 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010199.html">[osg-users] OpenSceneGraph-3.6.4 release candidate 7
</A></li>
        <LI>Next message (by thread): <A HREF="010202.html">[osg-users] Android: Survive Context Loss without complete reinitialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10201">[ date ]</a>
              <a href="thread.html#10201">[ thread ]</a>
              <a href="subject.html#10201">[ subject ]</a>
              <a href="author.html#10201">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi @all,

I built a prototypical Android application based on your OSG GLES 2.0
example. As also users in the OSG forum pointed out, the problem with
this example application is, that is reinitialized everything, when
e.g. leaving the app, changing the screen orientation and so on.

I worked around this by just calling again
'setUpViewerAsEmbeddedInWindow' instead of creating everything from
scratch.

This seems to work pretty well, but sometimes - after a EGL context
loss - the shader programs are somehow lost or invalid, resulting in a
wrong rendering. This even happens, when using OSG's default shaders.

When debugging OSG, it seems to me, that OSG tries to clean up all GL
objects - including the shaders and reinitialize everything (also
compiling the shader objects).

Still, it happens, that the shaders get invalid sometimes and I'll get
the error:

   s_glUseProgram:2041 GL error 0x501

Which basically means invalid program. Are the shader handled somehow
differently? What do I have to do, in order to properly cleanup
everything?

Does anyone of you have any example surviving correctly a context loss
e.g. due to application switch?

Here are forum entries that describe a similar problem:

<A HREF="http://forum.openscenegraph.org/viewtopic.php?t=11270">http://forum.openscenegraph.org/viewtopic.php?t=11270</A>
<A HREF="http://forum.openscenegraph.org/viewtopic.php?t=14549">http://forum.openscenegraph.org/viewtopic.php?t=14549</A> (see point number 4.)


Best regards,
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20190722/bc926852/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20190722/bc926852/attachment.html</A>&gt;
</PRE>
























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010199.html">[osg-users] OpenSceneGraph-3.6.4 release candidate 7
</A></li>
	<LI>Next message (by thread): <A HREF="010202.html">[osg-users] Android: Survive Context Loss without complete reinitialization
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10201">[ date ]</a>
              <a href="thread.html#10201">[ thread ]</a>
              <a href="subject.html#10201">[ subject ]</a>
              <a href="author.html#10201">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
