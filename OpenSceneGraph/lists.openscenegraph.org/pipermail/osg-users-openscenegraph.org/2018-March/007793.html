<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Synchronizing with textures uploads.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Synchronizing%20with%20textures%20uploads.&In-Reply-To=%3C1520511517.m2f.73043%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="007792.html">
   <LINK REL="Next"  HREF="007794.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Synchronizing with textures uploads.</H1>
<!--htdig_noindex-->
    <B>Altin Gjata</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Synchronizing%20with%20textures%20uploads.&In-Reply-To=%3C1520511517.m2f.73043%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Synchronizing with textures uploads.">altingjataj at gmail.com
       </A><BR>
    <I>Thu Mar  8 04:18:37 PST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007792.html">[osg-users] Synchronizing with textures uploads.
</A></li>
        <LI>Next message (by thread): <A HREF="007794.html">[osg-users] Synchronizing with textures uploads.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7793">[ date ]</a>
              <a href="thread.html#7793">[ thread ]</a>
              <a href="subject.html#7793">[ subject ]</a>
              <a href="author.html#7793">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Robert.

This has become such a big (psychological even) problem to me, that I'm ready to rewrite this whole thing from scratch if it need be.

I don't know what code to provide more. This is basically all I do. All I have left out are details on converting matrices from OpencCV to OpenGL, and using a circular_buffer to post true / false booleans that are read by a class that derives from GraphicsContext::SwapCallback to decide whether to allow or not swapping buffers.

I use (the default) DrawThreadPerContext for the moment.

Steeping through the code, It seems that uploading the image is done by applyTexImage_subload() called from within TextureRectangle::apply(state) called from a GraphicsThread. And this operation is triggered by renderingTraversals(). It just doesn't upload in time and the background rectangle drawn by this renderingTraversal() uses the previous image.

Is there any way I can trigger applyTexImage_subload() sooner?
Would it help if I used another camera that also uses the same ImageStream as texture and renders to a small texture, and set its rendering order before that of the camera that renders the background?

I don't know what else to do, other than presuming that this source file is cursed and start creating a new file and rewriting this part of the program from the beginning.

Thank you!

Cheers,
Altin

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=73043#73043">http://forum.openscenegraph.org/viewtopic.php?p=73043#73043</A>





</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007792.html">[osg-users] Synchronizing with textures uploads.
</A></li>
	<LI>Next message (by thread): <A HREF="007794.html">[osg-users] Synchronizing with textures uploads.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7793">[ date ]</a>
              <a href="thread.html#7793">[ thread ]</a>
              <a href="subject.html#7793">[ subject ]</a>
              <a href="author.html#7793">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
