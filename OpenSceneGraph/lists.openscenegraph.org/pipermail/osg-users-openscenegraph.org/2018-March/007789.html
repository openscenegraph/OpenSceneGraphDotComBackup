<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Synchronizing with textures uploads.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Synchronizing%20with%20textures%20uploads.&In-Reply-To=%3C1520456597.m2f.73037%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="007817.html">
   <LINK REL="Next"  HREF="007790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Synchronizing with textures uploads.</H1>
<!--htdig_noindex-->
    <B>Altin Gjata</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Synchronizing%20with%20textures%20uploads.&In-Reply-To=%3C1520456597.m2f.73037%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Synchronizing with textures uploads.">altingjataj at gmail.com
       </A><BR>
    <I>Wed Mar  7 13:03:17 PST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007817.html">[osg-users] The importance of using Camera::setDrawBuffer()+setReadBuffer() in application setup
</A></li>
        <LI>Next message (by thread): <A HREF="007790.html">[osg-users] Synchronizing with textures uploads.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7789">[ date ]</a>
              <a href="thread.html#7789">[ thread ]</a>
              <a href="subject.html#7789">[ subject ]</a>
              <a href="author.html#7789">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I'm trying to build an augmented reality application using OSG. My main problem, with which I've been struggling for weeks, hacking little temporal victories only to find myself in the ground again, is keeping in sync the camera position with the video frame uploaded to a background texture.

When a new video frame is processed, I call


Code:
osg::ImageStream::setImage(img.cols, img.rows, 1, GL_RGBA8, GL_BGRA, GL_UNSIGNED_BYTE,	img.data, osg::Image::NO_DELETE, 1);




and post in a queue the camera matrix to be read the next rendering cycle by the thread in which OSG runs. The camera position is updated, but the video frame may not make it in time to upload to GPU for this rendering frame, and the old image corresponding to the previous video frame appears instead.

&gt;<i>From what I've noticed, the call to ImageStream::setImage() merely marks the texture as dirty, but doesn't initiate an upload to GPU. So I have the new video frame ready, the GPU is free, and I don't know how to convince it to start uploading. By the time renderingTraversals() is called, the GPU can't load it in time.
</I>
This is my first time using OSG and I don't know its tricks. I would appreciate very much any help from the community. 

Thank you!

Cheers,
Altin[/code]

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=73037#73037">http://forum.openscenegraph.org/viewtopic.php?p=73037#73037</A>





</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007817.html">[osg-users] The importance of using Camera::setDrawBuffer()+setReadBuffer() in application setup
</A></li>
	<LI>Next message (by thread): <A HREF="007790.html">[osg-users] Synchronizing with textures uploads.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7789">[ date ]</a>
              <a href="thread.html#7789">[ thread ]</a>
              <a href="subject.html#7789">[ subject ]</a>
              <a href="author.html#7789">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
