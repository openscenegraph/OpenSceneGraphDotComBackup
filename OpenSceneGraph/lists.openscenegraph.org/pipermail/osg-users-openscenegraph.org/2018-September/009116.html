<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] problems with osg-3.4.0 port to osg-3.6.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20problems%20with%20osg-3.4.0%20port%20to%20osg-3.6.0&In-Reply-To=%3CCAGoufmbP22J-HO74xLp_XJkjoZmJ_bTpEmTHg%3DEzqUoXqbneog%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="009102.html">
   <LINK REL="Next"  HREF="009103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] problems with osg-3.4.0 port to osg-3.6.0</H1>
<!--htdig_noindex-->
    <B>Chris Hanson</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20problems%20with%20osg-3.4.0%20port%20to%20osg-3.6.0&In-Reply-To=%3CCAGoufmbP22J-HO74xLp_XJkjoZmJ_bTpEmTHg%3DEzqUoXqbneog%40mail.gmail.com%3E"
       TITLE="[osg-users] problems with osg-3.4.0 port to osg-3.6.0">xenon at alphapixel.com
       </A><BR>
    <I>Thu Sep 13 10:57:00 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009102.html">[osg-users] problems with osg-3.4.0 port to osg-3.6.0
</A></li>
        <LI>Next message (by thread): <A HREF="009103.html">[osg-users] Problems porting from osg-3.4.0 to osg-3.6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9116">[ date ]</a>
              <a href="thread.html#9116">[ thread ]</a>
              <a href="subject.html#9116">[ subject ]</a>
              <a href="author.html#9116">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Did you ask Ben himself?

He's moving to Hawaii just now, but might be able to comment. I can ping
him if you don't get an answer here.

On Thu, Sep 13, 2018 at 7:48 AM Herman Varma &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">hermanvarma at eastlink.ca</A>&gt;
wrote:

&gt;<i> Hello I am having trouble porting  Ben Discoe&#8217;s VTP software from
</I>&gt;<i> openSceneGraph-3.4.0 to osg-3.6.2
</I>&gt;<i>
</I>&gt;<i> The problem lies in replacing the META_object with a macro in
</I>&gt;<i> shadowTechnique.h as depicted below.
</I>&gt;<i>
</I>&gt;<i> Can someone point out where the problem is.
</I>&gt;<i>
</I>&gt;<i> /** CSimpleInterimShadowTechnique provides an implementation of a depth
</I>&gt;<i> map shadow tuned to the needs of VTP.*/
</I>&gt;<i>
</I>&gt;<i> class CSimpleInterimShadowTechnique : public osgShadow::ShadowTechnique
</I>&gt;<i> {
</I>&gt;<i> public:
</I>&gt;<i>
</I>&gt;<i> //  working **********************  in opemSceneGraph-3.4.0
</I>&gt;<i> //     CSimpleInterimShadowTechnique();
</I>&gt;<i> //     CSimpleInterimShadowTechnique(const
</I>&gt;<i> //     CSimpleInterimShadowTechnique&amp; es, const osg::CopyOp&amp;
</I>&gt;<i> //      copyop=osg::CopyOp::SHALLOW_COPY);
</I>&gt;<i> //     META_Object(osgShadow, CSimpleInterimShadowTechnique);
</I>&gt;<i> //***********************************************************
</I>&gt;<i>
</I>&gt;<i> // not working *********************in opemSceneGraph-3.6.2
</I>&gt;<i>        CSimpleInterimShadowTechnique();
</I>&gt;<i>        CSimpleInterimShadowTechnique(const CSimpleInterimShadowTechnique&amp;
</I>&gt;<i> es, const osg::CopyOp&amp; copyop = osg::CopyOp::SHALLOW_COPY);
</I>&gt;<i>
</I>&gt;<i>        virtual bool isSameKindAs(const osg::Object* obj) const { return
</I>&gt;<i> dynamic_cast&lt;const CSimpleInterimShadowTechnique*&gt;(obj) != NULL; } \
</I>&gt;<i>        virtual const char* libraryName() const { return &quot;osgShadow&quot;; }\
</I>&gt;<i>        virtual const char* className() const { return
</I>&gt;<i> &quot;CSimpleInterimShadowTechnique&quot;; }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> //**************************************************************
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> In the new implementation I am getting a C2259 error
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\vtp_vsc\terrainsdk\vtlib\vtosg\nodeosg.cpp(1026): error C2259:
</I>&gt;<i> 'CSimpleInterimShadowTechnique': cannot instantiate abstract class
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\vtp_vsc\terrainsdk\vtlib\vtosg\nodeosg.cpp(1026): note: due to
</I>&gt;<i> following members:
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\vtp_vsc\terrainsdk\vtlib\vtosg\nodeosg.cpp(1026): note: 'osg::Object
</I>&gt;<i> *osg::Object::cloneType(void) const': is abstract
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\apis\openscenegraph-3.6.2\build\include\osg\object(80): note: see
</I>&gt;<i> declaration of 'osg::Object::cloneType'
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\vtp_vsc\terrainsdk\vtlib\vtosg\nodeosg.cpp(1026): note: 'osg::Object
</I>&gt;<i> *osg::Object::clone(const osg::CopyOp &amp;) const': is abstract
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\apis\openscenegraph-3.6.2\build\include\osg\object(84): note: see
</I>&gt;<i> declaration of 'osg::Object::clone'
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\vtp_vsc\terrainsdk\vtlib\vtosg\nodeosg.cpp(1026): note: 'void
</I>&gt;<i> osgShadow::ShadowTechnique::resizeGLObjectBuffers(unsigned int)': is
</I>&gt;<i> abstract
</I>&gt;<i>
</I>&gt;<i> 2&gt;c:\apis\openscenegraph-3.6.2\build\include\osgshadow\shadowtechnique(66):
</I>&gt;<i> note: see declaration of 'osgShadow::ShadowTechnique::resizeGLObjectBuffers'
</I>&gt;<i> 2&gt;c:\vtp_vsc\terrainsdk\vtlib\vtosg\nodeosg.cpp(1026): note: 'void
</I>&gt;<i> osgShadow::ShadowTechnique::releaseGLObjects(osg::State *) const': is
</I>&gt;<i> abstract
</I>&gt;<i> 2&gt;c:\apis\openscenegraph-3.6.2\build\include\osgshadow\shadowtechnique(71):
</I>&gt;<i> note: see declaration of 'osgShadow::ShadowTechnique::releaseGLObjects'
</I>&gt;<i>
</I>&gt;<i> The  error manifests is in the vtShadow section of nodeOSG.cpp
</I>&gt;<i>
</I>&gt;<i> //////////////////////////////////////////////////////////////////////
</I>&gt;<i> // vtShadow
</I>&gt;<i> //
</I>&gt;<i>
</I>&gt;<i> vtShadow::vtShadow(const int ShadowTextureUnit, int LightNumber) :
</I>&gt;<i>        m_ShadowTextureUnit(ShadowTextureUnit), m_LightNumber(LightNumber)
</I>&gt;<i> {
</I>&gt;<i>        setReceivesShadowTraversalMask(ReceivesShadowTraversalMask);
</I>&gt;<i>        setCastsShadowTraversalMask(CastsShadowTraversalMask);
</I>&gt;<i>
</I>&gt;<i> #if VTLISPSM
</I>&gt;<i>        osg::ref_ptr&lt;CLightSpacePerspectiveShadowTechnique&gt;
</I>&gt;<i> pShadowTechnique = new CLightSpacePerspectiveShadowTechnique;
</I>&gt;<i>        // No need to set the BaseTextureUnit as the default of zero is OK
</I>&gt;<i> for us
</I>&gt;<i>        // But the ShadowTextureUnit might be different (default 1)
</I>&gt;<i>        pShadowTechnique-&gt;setShadowTextureUnit(m_ShadowTextureUnit);
</I>&gt;<i>        pShadowTechnique-&gt;setLightNumber(m_LightNumber);
</I>&gt;<i> #else
</I>&gt;<i>
</I>&gt;<i> //errorC2259 cannot instantiate abstract class in openSceneGraph-3.6.2
</I>&gt;<i> //working in osg-3.4.0
</I>&gt;<i>
</I>&gt;<i>   osg::ref_ptr&lt;CSimpleInterimShadowTechnique&gt; pShadowTechnique = new
</I>&gt;<i>
</I>&gt;<i> #endif
</I>&gt;<i>
</I>&gt;<i> #if !VTLISPSM
</I>&gt;<i> #if VTDEBUGSHADOWS
</I>&gt;<i>        // add some instrumentation
</I>&gt;<i>        pShadowTechnique-&gt;m_pParent = this;
</I>&gt;<i> #endif
</I>&gt;<i>
</I>&gt;<i>        pShadowTechnique-&gt;SetLightNumber(LightNumber);
</I>&gt;<i>        pShadowTechnique-&gt;SetShadowTextureUnit(m_ShadowTextureUnit);
</I>&gt;<i>        pShadowTechnique-&gt;SetShadowSphereRadius(50.0);
</I>&gt;<i> #endif
</I>&gt;<i>        setShadowTechnique(pShadowTechnique.get());
</I>&gt;<i>
</I>&gt;<i>        SetOsgNode(this);
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Help would be appreciated
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thank you!
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> Herman Varma
</I>&gt;<i> Head of Cartographic Research
</I>&gt;<i> Bedford Institute of Oceanography
</I>&gt;<i>
</I>&gt;<i> ------------------
</I>&gt;<i> Read this topic online here:
</I>&gt;<i> <A HREF="http://forum.openscenegraph.org/viewtopic.php?p=74733#74733">http://forum.openscenegraph.org/viewtopic.php?p=74733#74733</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>

-- 
Chris 'Xenon' Hanson, omo sanza lettere. <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">Xenon at AlphaPixel.com</A>
<A HREF="http://www.alphapixel.com/">http://www.alphapixel.com/</A>
Training &#8226; Consulting &#8226; Contracting
3D &#8226; Scene Graphs (Open Scene Graph/OSG) &#8226; OpenGL 2 &#8226; OpenGL 3 &#8226; OpenGL 4 &#8226;
GLSL &#8226; OpenGL ES 1 &#8226; OpenGL ES 2 &#8226; OpenCL
Legal/IP &#8226; Forensics &#8226; Imaging &#8226; UAVs &#8226; GIS &#8226; GPS &#8226;
osgEarth &#8226; Terrain &#8226; Telemetry &#8226; Cryptography &#8226; LIDAR &#8226; Embedded &#8226; Mobile &#8226;
iPhone/iPad/iOS &#8226; Android
@alphapixel &lt;<A HREF="https://twitter.com/alphapixel">https://twitter.com/alphapixel</A>&gt; facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20180913/ec89c50a/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20180913/ec89c50a/attachment.html</A>&gt;
</PRE>

























<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009102.html">[osg-users] problems with osg-3.4.0 port to osg-3.6.0
</A></li>
	<LI>Next message (by thread): <A HREF="009103.html">[osg-users] Problems porting from osg-3.4.0 to osg-3.6.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9116">[ date ]</a>
              <a href="thread.html#9116">[ thread ]</a>
              <a href="subject.html#9116">[ subject ]</a>
              <a href="author.html#9116">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
