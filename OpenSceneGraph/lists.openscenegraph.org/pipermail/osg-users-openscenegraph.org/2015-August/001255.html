<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Executing code before gl context is closed when viewer is shutdown
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Executing%20code%20before%20gl%20context%20is%20closed%20when%0A%20viewer%20is%20shutdown&In-Reply-To=%3CCAFN7Y%2BU%3DMu8gkuhxRc8Bx_B5Gm9oY18e2VDFfrOuNmxoginaig%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="277474.html">
   <LINK REL="Next"  HREF="277498.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Executing code before gl context is closed when viewer is shutdown</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Executing%20code%20before%20gl%20context%20is%20closed%20when%0A%20viewer%20is%20shutdown&In-Reply-To=%3CCAFN7Y%2BU%3DMu8gkuhxRc8Bx_B5Gm9oY18e2VDFfrOuNmxoginaig%40mail.gmail.com%3E"
       TITLE="[osg-users] Executing code before gl context is closed when viewer is shutdown">robert.osfield at gmail.com
       </A><BR>
    <I>Tue Aug 18 02:50:18 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="277474.html">[osg-users] Executing code before gl context is closed when viewer	is shutdown
</A></li>
        <LI>Next message: <A HREF="277498.html">[osg-users] Monitoring the DatabasePager
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1255">[ date ]</a>
              <a href="thread.html#1255">[ thread ]</a>
              <a href="subject.html#1255">[ subject ]</a>
              <a href="author.html#1255">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Bjorn,

I can't think of any callback or similar class similar to the
RealizeOperation().  It would be straight forward to add but this would
only help things for a future rev of the OSG.

Perhaps you might be able to use a osg::Camera::FinalDrawCallback that is
only enabled on the last frame(), but this would need one to signal that
it's that last frame...

Failing these approaches you could build the viewer so once you exit the
frame loop you stop threading, make the context in question current and
then call what you need to do and then let the viewer destruct all the
contexts.

Robert.

On 18 August 2015 at 10:21, Bj&#246;rn Blissing &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">bjorn.blissing at vti.se</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> More odd questions connected to my Oculus integration.
</I>&gt;<i>
</I>&gt;<i> Is there a simple way to detect when the osg::viewer is ordered to close?
</I>&gt;<i> I need to execute some Oculus related code before the OpenGL context is
</I>&gt;<i> closed. So what I am looking for is some form of opposite of
</I>&gt;<i> viewerBase.setRealizeOperation() function.
</I>&gt;<i>
</I>&gt;<i> My first idea was to subclass the osg::GraphicContext class and run my own
</I>&gt;<i> custom destructor before the default constructor. But that idea is a no go,
</I>&gt;<i> because the OS dependent windowing APIs are already implemented as
</I>&gt;<i> subclasses to osg::GraphicContext.
</I>&gt;<i>
</I>&gt;<i> Best regards
</I>&gt;<i> Bj&#246;rn
</I>&gt;<i>
</I>&gt;<i> ------------------
</I>&gt;<i> Read this topic online here:
</I>&gt;<i> <A HREF="http://forum.openscenegraph.org/viewtopic.php?p=64814#64814">http://forum.openscenegraph.org/viewtopic.php?p=64814#64814</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20150818/f5d87228/attachment-0003.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20150818/f5d87228/attachment-0003.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="277474.html">[osg-users] Executing code before gl context is closed when viewer	is shutdown
</A></li>
	<LI>Next message: <A HREF="277498.html">[osg-users] Monitoring the DatabasePager
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1255">[ date ]</a>
              <a href="thread.html#1255">[ thread ]</a>
              <a href="subject.html#1255">[ subject ]</a>
              <a href="author.html#1255">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
