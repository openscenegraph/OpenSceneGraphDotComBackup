<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] ColorMask and depth information issue.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20ColorMask%20and%20depth%20information%20issue.&In-Reply-To=%3CCAFN7Y%2BUvW1FSa2j1OiSUSSjoi1cx7sEmJRyQMinuZ_mV9t1hKQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="277418.html">
   <LINK REL="Next"  HREF="001201.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] ColorMask and depth information issue.</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20ColorMask%20and%20depth%20information%20issue.&In-Reply-To=%3CCAFN7Y%2BUvW1FSa2j1OiSUSSjoi1cx7sEmJRyQMinuZ_mV9t1hKQ%40mail.gmail.com%3E"
       TITLE="[osg-users] ColorMask and depth information issue.">robert.osfield at gmail.com
       </A><BR>
    <I>Thu Aug 13 11:05:44 PDT 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="277418.html">[osg-users] ColorMask and depth information issue.
</A></li>
        <LI>Next message: <A HREF="001201.html">[osg-users] ColorMask and depth information issue.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1197">[ date ]</a>
              <a href="thread.html#1197">[ thread ]</a>
              <a href="subject.html#1197">[ subject ]</a>
              <a href="author.html#1197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Alessandro,

At this point I don't have any ideas as to what might be amiss. To resolve
it you'll need to step through a series of tests and investigations to
figure out what might be amiss.  The difference could be regression
introduced in OSG-3.4, but it also could be that OSG-3.4 is a little
stricter so that problems in the scene graph setup that were hidden before
are now exposed so you get the counter-intuitive situation that fixing the
OSG breaks a client app.

What happens if you don't apply the ColorMask?  If the objects appear then
you know there is some interaction there, if it doesn't then there is
something else amiss.

FYI. ColorMask header and ColorMask.cpp are identical between OSG-3.4 and
OSG-3.2, so this itself won't be the source of the discrepancy you are
seeing.

Another test you could try is to try your application with straight OpenGL
on a desktop.

Another thing you could look at is how the standard examples work on the
two versions.  Are they similar or different?

Robert.



On 13 August 2015 at 17:38, Alessandro Terenzi &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">a.terenzi at gmail.com</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i> I am having a problem related somehow to osg::ColorMask ... in order make
</I>&gt;<i> an object invisible while still taking it's depth information into account
</I>&gt;<i> I use these instructions:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Code:
</I>&gt;<i>
</I>&gt;<i> osg::ref_ptr&lt; osg::ColorMask &gt; mask = new osg::ColorMask(false, false,
</I>&gt;<i> false, false);
</I>&gt;<i> my_model-&gt;getOrCreateStateSet()-&gt;setAttributeAndModes(mask.get(),
</I>&gt;<i> osg::StateAttribute::ON | osg::StateAttribute::OVERRIDE)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This used to work fine with OSG version 3.2.1 but I've tried using OSG
</I>&gt;<i> 3.4.0 (stable release) and now the object is still not rendered but also
</I>&gt;<i> the depth information seems to be ignored because other objects that are
</I>&gt;<i> supposed to be behind that 'invisible' objects are not hidden by it anymore.
</I>&gt;<i>
</I>&gt;<i> I'm using GLES1 profile on iOS. Tried to apply the color mask on a model
</I>&gt;<i> loaded from FBX or OBJ.
</I>&gt;<i>
</I>&gt;<i> Any suggestion?
</I>&gt;<i>
</I>&gt;<i> Thanks.
</I>&gt;<i> Alessandro
</I>&gt;<i>
</I>&gt;<i> ------------------
</I>&gt;<i> Read this topic online here:
</I>&gt;<i> <A HREF="http://forum.openscenegraph.org/viewtopic.php?p=64756#64756">http://forum.openscenegraph.org/viewtopic.php?p=64756#64756</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20150813/6044836c/attachment-0003.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20150813/6044836c/attachment-0003.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="277418.html">[osg-users] ColorMask and depth information issue.
</A></li>
	<LI>Next message: <A HREF="001201.html">[osg-users] ColorMask and depth information issue.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1197">[ date ]</a>
              <a href="thread.html#1197">[ thread ]</a>
              <a href="subject.html#1197">[ subject ]</a>
              <a href="author.html#1197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
