<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Deleting still referenced object
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Deleting%20still%20referenced%20object&In-Reply-To=%3C1547169541.m2f.75441%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="009651.html">
   <LINK REL="Next"  HREF="009561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Deleting still referenced object</H1>
<!--htdig_noindex-->
    <B>Richard Harrison</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Deleting%20still%20referenced%20object&In-Reply-To=%3C1547169541.m2f.75441%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Deleting still referenced object">rjh at zaretto.com
       </A><BR>
    <I>Thu Jan 10 17:19:01 PST 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009651.html">[osg-users] Deleting still referenced object
</A></li>
        <LI>Next message (by thread): <A HREF="009561.html">[osg-users] getting the world coordinate by screen coordinate in a sky shpere
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9592">[ date ]</a>
              <a href="thread.html#9592">[ thread ]</a>
              <a href="subject.html#9592">[ subject ]</a>
              <a href="author.html#9592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>
Chris Hanson wrote:
&gt;<i> Ok. Is this a recent issue or do you know when it appeared? That's some delicate code in there...
</I>

Yeah I noticed that there's some complex code and thread sensitive (i.e. delicate) stuff; it's taken me a long time to figure out what it's doing and why it is being done; and I'm being very careful with the changes I've made as experience tells me that it's ever so easy to make multi-threaded code worse whilst trying to make it better. Sometimes a fix to shared data isn't a fix even if it makes the problem go away, and I want to avoid doing anything stupid by careful analysis, testing and peer review.

The deleting whilst still in use as been happening occasionally for the last few years; but recently the frequency of user reports has increased which I think is probably because we are now shipping more scenery (based on OSM) that makes more use of shared models. 

Currently FG ships with a slightly modified OSG 3.4.1 and I'm building my FlightGear against master (c934172432cad368f5731ae5d682d7d6ecab7f48) and the problem is present in both versions. I'm still fairly sure that the reason is as outlined in my first post and that the fix appears to be working as expected. 

Once I'm happy with the fix, and after taking into account any advice or comments from here; I'll make a pull request.

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=75441#75441">http://forum.openscenegraph.org/viewtopic.php?p=75441#75441</A>





</PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009651.html">[osg-users] Deleting still referenced object
</A></li>
	<LI>Next message (by thread): <A HREF="009561.html">[osg-users] getting the world coordinate by screen coordinate in a sky shpere
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9592">[ date ]</a>
              <a href="thread.html#9592">[ thread ]</a>
              <a href="subject.html#9592">[ subject ]</a>
              <a href="author.html#9592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
