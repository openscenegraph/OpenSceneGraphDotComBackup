<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] osg-users Digest, Vol 137, Issue 14
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20osg-users%20Digest%2C%20Vol%20137%2C%20Issue%2014&In-Reply-To=%3CSL2P216MB0588A83FE93A00F0B01B44A49ADD0%40SL2P216MB0588.KORP216.PROD.OUTLOOK.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="009378.html">
   <LINK REL="Next"  HREF="009386.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] osg-users Digest, Vol 137, Issue 14</H1>
<!--htdig_noindex-->
    <B>A Z</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20osg-users%20Digest%2C%20Vol%20137%2C%20Issue%2014&In-Reply-To=%3CSL2P216MB0588A83FE93A00F0B01B44A49ADD0%40SL2P216MB0588.KORP216.PROD.OUTLOOK.COM%3E"
       TITLE="[osg-users] osg-users Digest, Vol 137, Issue 14">poweruserm at live.com.au
       </A><BR>
    <I>Fri Nov 16 15:15:51 PST 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009378.html">[osg-users] Selecting visible primitives within a region
</A></li>
        <LI>Next message (by thread): <A HREF="009386.html">[osg-users] Change color of node read from dxf file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9384">[ date ]</a>
              <a href="thread.html#9384">[ thread ]</a>
              <a href="subject.html#9384">[ subject ]</a>
              <a href="author.html#9384">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Is there someone here who delete my entire osf forum login account?

<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=75088#75088">http://forum.openscenegraph.org/viewtopic.php?p=75088#75088</A>

My email address with that account is

<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">poweruserm at live.com.au.</A>

 ?
________________________________
From: osg-users &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-bounces at lists.openscenegraph.org</A>&gt; on behalf of <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-request at lists.openscenegraph.org</A> &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-request at lists.openscenegraph.org</A>&gt;
Sent: Saturday, 17 November 2018 8:04 AM
To: <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
Subject: osg-users Digest, Vol 137, Issue 14

Send osg-users mailing list submissions to
        <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>

To subscribe or unsubscribe via the World Wide Web, visit
        <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>

or, via email, send a message with subject or body 'help' to
        <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-request at lists.openscenegraph.org</A>

You can reach the person managing the list at
        <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-owner at lists.openscenegraph.org</A>

When replying, please edit your Subject line so it is more specific
than &quot;Re: Contents of osg-users digest...&quot;


Today's Topics:

   1. Re: OpenGL ES 2.0 and LIGHTING (Grigoriy Mylnikov)
   2. Re: OpenGL ES 2.0 and LIGHTING (Werner Modenbach)
   3. Re: OpenGL ES 2.0 and LIGHTING (Grigoriy Mylnikov)


----------------------------------------------------------------------

Message: 1
Date: Fri, 16 Nov 2018 12:29:55 +0100
From: &quot;Grigoriy Mylnikov&quot; &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">digitalw0lf at yandex.ru</A>&gt;
To: <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
Subject: Re: [osg-users] OpenGL ES 2.0 and LIGHTING
Message-ID: &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">1542367795.m2f.75204 at forum.openscenegraph.org</A>&gt;
Content-Type: text/plain; charset=UTF-8

Sorry for delayed reply.

My goal is to open and display .osgt files on android the same way they can be opened on desktop. This includes using several lights inside a model, both directional and point lights.

I have some progress with writing shaders, but I have troubles with understanding OSG states. I've updated osg::Light apply() code to pass light position (relative to camera) as uniform:


Code:
void LightShader::apply(osg::State&amp; state) const
{
#ifdef OSG_GL_FIXED_FUNCTION_AVAILABLE
... // Original code
#else
    ...
    osg::Vec4 relPos = state.getModelViewMatrix() * _position;
    lightPosUniform.get()-&gt;set(relPos);
    ...
#endif
}




But it seems that state.getModelViewMatrix() does not gives me valid view matrix.

If I could get light position (relative to camera), I can use it in shaders like this:


Code:
vec3 APos = vec3(gl_ModelViewMatrix * gl_Vertex);
...
vec3 fromPointToLight = lightPos.xyz - APos;




------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=75204#75204">http://forum.openscenegraph.org/viewtopic.php?p=75204#75204</A>







------------------------------

Message: 2
Date: Fri, 16 Nov 2018 12:36:39 +0100
From: Werner Modenbach &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">Werner.Modenbach at texion.eu</A>&gt;
To: <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
Subject: Re: [osg-users] OpenGL ES 2.0 and LIGHTING
Message-ID: &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">50c2565b-79f0-a8b9-4227-dc371c7b2e25 at texion.eu</A>&gt;
Content-Type: text/plain; charset=utf-8

Hi Grigoriy,

why don't you do the multiply in the shader like you do with gl_vertex?

- Werner -

Am 16.11.2018 um 12:29 schrieb Grigoriy Mylnikov:
&gt;<i> Sorry for delayed reply.
</I>&gt;<i>
</I>&gt;<i> My goal is to open and display .osgt files on android the same way they can be opened on desktop. This includes using several lights inside a model, both directional and point lights.
</I>&gt;<i>
</I>&gt;<i> I have some progress with writing shaders, but I have troubles with understanding OSG states. I've updated osg::Light apply() code to pass light position (relative to camera) as uniform:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Code:
</I>&gt;<i> void LightShader::apply(osg::State&amp; state) const
</I>&gt;<i> {
</I>&gt;<i> #ifdef OSG_GL_FIXED_FUNCTION_AVAILABLE
</I>&gt;<i> ... // Original code
</I>&gt;<i> #else
</I>&gt;<i>     ...
</I>&gt;<i>     osg::Vec4 relPos = state.getModelViewMatrix() * _position;
</I>&gt;<i>     lightPosUniform.get()-&gt;set(relPos);
</I>&gt;<i>     ...
</I>&gt;<i> #endif
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> But it seems that state.getModelViewMatrix() does not gives me valid view matrix.
</I>&gt;<i>
</I>&gt;<i> If I could get light position (relative to camera), I can use it in shaders like this:
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Code:
</I>&gt;<i> vec3 APos = vec3(gl_ModelViewMatrix * gl_Vertex);
</I>&gt;<i> ...
</I>&gt;<i> vec3 fromPointToLight = lightPos.xyz - APos;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------
</I>&gt;<i> Read this topic online here:
</I>&gt;<i> <A HREF="http://forum.openscenegraph.org/viewtopic.php?p=75204#75204">http://forum.openscenegraph.org/viewtopic.php?p=75204#75204</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>



------------------------------

Message: 3
Date: Fri, 16 Nov 2018 17:00:39 +0100
From: &quot;Grigoriy Mylnikov&quot; &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">digitalw0lf at yandex.ru</A>&gt;
To: <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
Subject: Re: [osg-users] OpenGL ES 2.0 and LIGHTING
Message-ID: &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">1542384039.m2f.75206 at forum.openscenegraph.org</A>&gt;
Content-Type: text/plain; charset=UTF-8

After some trial and errors, I managed to do it in shader. But this means one redundant matrix multiplication per each vertex. Isn't it more effective to compute it once per frame on cpu side?

What's the purpose of state.getModelViewMatrix()? I expected to get a camera*model matrix there. Or it is not yet defined at the moment lights are applied?

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=75206#75206">http://forum.openscenegraph.org/viewtopic.php?p=75206#75206</A>







------------------------------

Subject: Digest Footer

_______________________________________________
osg-users mailing list
<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>


------------------------------

End of osg-users Digest, Vol 137, Issue 14
******************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20181116/cbfb35d0/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20181116/cbfb35d0/attachment.html</A>&gt;
</PRE>









<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009378.html">[osg-users] Selecting visible primitives within a region
</A></li>
	<LI>Next message (by thread): <A HREF="009386.html">[osg-users] Change color of node read from dxf file
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9384">[ date ]</a>
              <a href="thread.html#9384">[ thread ]</a>
              <a href="subject.html#9384">[ subject ]</a>
              <a href="author.html#9384">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
