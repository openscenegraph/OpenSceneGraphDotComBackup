<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Alter tree in safe mode.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Alter%20tree%20in%20safe%20mode.&In-Reply-To=%3CCAFN7Y%2BV7xvxR_7A0pUfxkn5d%2B_ykhDTtYd2XA7d9j%2BbEitMNcQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="002181.html">
   <LINK REL="Next"  HREF="278395.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Alter tree in safe mode.</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Alter%20tree%20in%20safe%20mode.&In-Reply-To=%3CCAFN7Y%2BV7xvxR_7A0pUfxkn5d%2B_ykhDTtYd2XA7d9j%2BbEitMNcQ%40mail.gmail.com%3E"
       TITLE="[osg-users] Alter tree in safe mode.">robert.osfield at gmail.com
       </A><BR>
    <I>Fri Dec 18 02:17:09 PST 2015</I>
    <P><UL>
        <LI>Previous message: <A HREF="002181.html">[osg-users] Alter tree in safe mode.
</A></li>
        <LI>Next message: <A HREF="278395.html">[osg-users] Question about working with osgVolume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2182">[ date ]</a>
              <a href="thread.html#2182">[ thread ]</a>
              <a href="subject.html#2182">[ subject ]</a>
              <a href="author.html#2182">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>On 18 December 2015 at 09:49, Dario Minieri &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">paradox at cheapnet.it</A>&gt; wrote:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> Thanks Robert for your reply. I'm using OSG3.2.1. I can see Mutex
</I>&gt;<i> lock/unlock in Node. I've to look the DatabasePager implementation...but I
</I>&gt;<i> can't understand the crash, because locks there are...
</I>

When doing multi-threading the smallest little mistake can cause problems,
you just have to work through eliminating the possibilities, it can be
quite tough.

As a general note, OSG-3.4.0 contains quite a few week improvements
including on the thread safety side so would recommend using it.  The
OSG-3.5.0 dev release also uses osgDB::readRefNodeFile() etc. internally to
avoid potential issues with mixing the osgDB::Registry Object cache.  This
improvements might not affect your problem but it might be worth trying to
upgrade to at least 3.4.0.

With your own code I'd recommend changing from using C* pointers to
ref_ptr&lt;&gt; an time you are transferring ownership of the OSG objects, in
your code example you pop a pointer to a node off a container, both the
container and the local pointer should use ref_ptr&lt;&gt; for memory safety.

Robert.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20151218/7a1624d5/attachment-0003.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20151218/7a1624d5/attachment-0003.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002181.html">[osg-users] Alter tree in safe mode.
</A></li>
	<LI>Next message: <A HREF="278395.html">[osg-users] Question about working with osgVolume
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2182">[ date ]</a>
              <a href="thread.html#2182">[ thread ]</a>
              <a href="subject.html#2182">[ subject ]</a>
              <a href="author.html#2182">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
