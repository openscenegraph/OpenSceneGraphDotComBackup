<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Image from shader
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Image%20from%20shader&In-Reply-To=%3C1570124791.m2f.76777%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="010510.html">
   <LINK REL="Next"  HREF="010499.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Image from shader</H1>
<!--htdig_noindex-->
    <B>Lucas Amparo</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Image%20from%20shader&In-Reply-To=%3C1570124791.m2f.76777%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Image from shader">lucas.barbosa at fieb.org.br
       </A><BR>
    <I>Thu Oct  3 10:46:31 PDT 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="010510.html">[osg-users] vcpkg gl3+
</A></li>
        <LI>Next message (by thread): <A HREF="010499.html">[osg-users] Image from shader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10498">[ date ]</a>
              <a href="thread.html#10498">[ thread ]</a>
              <a href="subject.html#10498">[ subject ]</a>
              <a href="author.html#10498">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi everyone,

I'm trying to retrieve an image from a shader using OpenGL in OSG/OSGOcean.

I can retrieve the depth from the simulation but can't access properly the color from each vertex.

Using this code on *.vert


Code:

out vec3 pos
out vec4 color

void main() {
pos = (gl_ModelViewMatrix * gl_Vertex).xyz;
color = gl_Color;
}




and this in *.frag


Code:

in vec3 pos;
in vec4 color;

uniform float farPlane;

void main() {
float linearDepth = length(pos);

float dist_ratio = linearDepth / farPlane;

gl_FragDepth = dist_ratio;
gl_FragColor = gl_FrontColor;
}




I'm achieving this image (image2.png on attachment) when I'm trying to produce that image (image1.png on attachment).

Could someone bring me to light? I'm very lost on this...

Thank you!

Cheers,
Lucas

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=76777#76777">http://forum.openscenegraph.org/viewtopic.php?p=76777#76777</A>




Attachments: 
<A HREF="http://forum.openscenegraph.org//files/image1_169.png">http://forum.openscenegraph.org//files/image1_169.png</A>
<A HREF="http://forum.openscenegraph.org//files/image2_731.png">http://forum.openscenegraph.org//files/image2_731.png</A>


</PRE>








<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="010510.html">[osg-users] vcpkg gl3+
</A></li>
	<LI>Next message (by thread): <A HREF="010499.html">[osg-users] Image from shader
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10498">[ date ]</a>
              <a href="thread.html#10498">[ thread ]</a>
              <a href="subject.html#10498">[ subject ]</a>
              <a href="author.html#10498">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
