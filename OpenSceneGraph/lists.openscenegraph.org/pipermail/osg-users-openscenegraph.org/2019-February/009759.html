<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Deep cloning an active root scene node
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Deep%20cloning%20an%20active%20root%20scene%20node&In-Reply-To=%3CCAFN7Y%2BWMmVdWhgQJsnkoPvKo9zi3mWm149mrdGMhBUHxJpLtrw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="009757.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Deep cloning an active root scene node</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Deep%20cloning%20an%20active%20root%20scene%20node&In-Reply-To=%3CCAFN7Y%2BWMmVdWhgQJsnkoPvKo9zi3mWm149mrdGMhBUHxJpLtrw%40mail.gmail.com%3E"
       TITLE="[osg-users] Deep cloning an active root scene node">robert.osfield at gmail.com
       </A><BR>
    <I>Thu Feb 28 10:53:19 PST 2019</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="009757.html">[osg-users] Deep cloning an active root scene node
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9759">[ date ]</a>
              <a href="thread.html#9759">[ thread ]</a>
              <a href="subject.html#9759">[ subject ]</a>
              <a href="author.html#9759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Rob,

The OSG is design to allow you to rendering multiple views at once,
there is no need to clone the scene graph, you simply add another View
to a CompositeView to add the extra rendering.  You can toggle
optional View's on/off as you need them.

Robert.

On Thu, 28 Feb 2019 at 17:51, Robert Lockyer
&lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">robert.lockyer at avalonholographics.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi all, my name is Rob.
</I>&gt;<i>
</I>&gt;<i> I'm currently writing a plugin for an OSG based application. I effectively want to create a snapshot of the application's scene graph state and pass it to another thread where I can render to a texture, while the main rendering thread continues with minimal interruption.
</I>&gt;<i>
</I>&gt;<i> I'd like to do this because blocking the main thread with a osgViewer::Viewer::frame() call causes the application to lock up and prevents me from displaying a progress dialog. The scene I render takes a long time because I render many camera views to a single texture.
</I>&gt;<i>
</I>&gt;<i> I'm currently trying to do this:
</I>&gt;<i>
</I>&gt;<i> osg::Node* sceneCopy = dynamic_cast&lt;osg::Node*&gt;(sceneData_-&gt;clone(osg::CopyOp::DEEP_COPY_ALL));
</I>&gt;<i>
</I>&gt;<i> Then passing this to another thread where I run:
</I>&gt;<i>
</I>&gt;<i> viewer_ = new osgViewer::Viewer();
</I>&gt;<i> viewer_-&gt;setSceneData(sceneCopy);
</I>&gt;<i>
</I>&gt;<i> However the behavior seems inconsistent. It either dies on a null reference inside osgEarth somewhere or it renders an empty scene. I don't think I fully understand the threading model of OSG, I've read a bit here and there, but I think there's a lot I'm still missing.
</I>&gt;<i>
</I>&gt;<i> Is there a safe way to copy the scene data and use it to run an isolated viewer like this in parallel? Is it even safe to run two viewers in parallel like this at all?
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i> Rob
</I>&gt;<i>
</I>&gt;<i> This email and any attachments are confidential and may be privileged. Any unauthorized use, disclosure, copying or distribution of the information received is prohibited. If you are not the intended recipient please contact the sender immediately by return email confirming that you have and will delete all communications related to the email and any attachments sent to you in error.
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I></PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="009757.html">[osg-users] Deep cloning an active root scene node
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9759">[ date ]</a>
              <a href="thread.html#9759">[ thread ]</a>
              <a href="subject.html#9759">[ subject ]</a>
              <a href="author.html#9759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
