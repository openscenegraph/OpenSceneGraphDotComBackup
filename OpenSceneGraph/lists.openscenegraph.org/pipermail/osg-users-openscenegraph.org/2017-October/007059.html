<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] [MDI branch] AZDO SandBox
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5BMDI%20branch%5D%20AZDO%20SandBox&In-Reply-To=%3C1508469436.m2f.72210%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007052.html">
   <LINK REL="Next"  HREF="007053.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] [MDI branch] AZDO SandBox</H1>
<!--htdig_noindex-->
    <B>Julien Valentin</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5BMDI%20branch%5D%20AZDO%20SandBox&In-Reply-To=%3C1508469436.m2f.72210%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] [MDI branch] AZDO SandBox">julienvalentin51 at gmail.com
       </A><BR>
    <I>Thu Oct 19 20:17:16 PDT 2017</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="007052.html">[osg-users] [MDI branch] AZDO SandBox
</A></li>
        <LI>Next message (by thread): <A HREF="007053.html">[osg-users] Real time Strobing effect for on screen animation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7059">[ date ]</a>
              <a href="thread.html#7059">[ thread ]</a>
              <a href="subject.html#7059">[ subject ]</a>
              <a href="author.html#7059">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Robert

I can't garantee there will not be further other integration issues but havent encountered one since long time so i think the branch can be removed.

Concerning the example, the cost of MDIs is a gpu charge one will have to deal with. It only become really interesting once you've pushed your logic on the gpu side (cull,material,texture,physics,ai). I do my testing on GT440 and even with it I achieve really amazing stuff ....
Cheers


robertosfield wrote:
&gt;<i> Hi Julian et. al,
</I>&gt;<i> 
</I>&gt;<i> On 28 July 2017 at 17:53, Julien Valentin &lt; ()&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I pushed a new osg branch at git for Indirect Draw feature
</I>&gt;<i> &gt; <A HREF="https://github.com/openscenegraph/OpenSceneGraph/tree/MultiDrawIndirect">https://github.com/openscenegraph/OpenSceneGraph/tree/MultiDrawIndirect</A> (<A HREF="https://github.com/openscenegraph/OpenSceneGraph/tree/MultiDrawIndirect">https://github.com/openscenegraph/OpenSceneGraph/tree/MultiDrawIndirect</A>)
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Now that this branch is merged with master, it should be OK for us to delete the branch.&#160; Julian, do you have any further revisions planned?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> FYI, I made some build fixes for compiling the OSG without the automatic ref_ptr&lt;&gt; -&gt; C pointer conversion enabled, so these would need merging with the MultiDrawIndirect branch if you want to keep it around.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> I also did some testing of the osgsimpleMDI example and found the --classic code path that uses multiple DrawElementsUInt in place of a single DefaultIndirectCommandDrawElements and was surprised at how the performance was with the non MultiDrawIndirect code path, However, looking at the way this example works I spotted that a DrawElemenetsUInt was being used for each separate quad which is about the worst way to implement things.&#160; To provide a proper comparison I added a --single code path that creates a single DrawElementsUInt primitive set and this produced the expected performance.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> The performance I get on my iCore7 + Geforce GTX 760 was:
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &#160; osgsimpleMDI&#160;&#160;&#160; [ uses MultiDrawElementsIndirectUShort : draw dispatch 0.11ms, draw GPU 0.94ms]
</I>&gt;<i> 
</I>&gt;<i> &#160; osgsimpleMDI&#160; --classic&#160; [ uses multiple DrawElementsUShort : draw dispatch 2.3ms, draw GPU 0.44ms]
</I>&gt;<i> 
</I>&gt;<i> &#160; osgsimpleMDI&#160; --single&#160; [ uses single DrawElementsUShort : draw dispatch 0.11ms, draw GPU 0.22ms]
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> So for this test MDI is lightweight on draw dispatch but heavy on the GPU, multiple DrawElementsUInt is super heavy on draw dispatch but modest on GPU, but the winner is single DrawElementsUInt with lightweight draw dispatch and on the GPU (move than 4 times faster than MDI.)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Different drivers and hardware will give different values but for this particular usage case using old style DrawElementsUInt will likely be the best.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Robert.
</I>&gt;<i> 
</I>&gt;<i>  ------------------
</I>&gt;<i> Post generated by Mail2Forum
</I>

------------------
Read this topic online here:
<A HREF="../../../../forum.openscenegraph.org/viewtopic4646.php?p=72210#72210">http://forum.openscenegraph.org/viewtopic.php?p=72210#72210</A>





</PRE>



<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="007052.html">[osg-users] [MDI branch] AZDO SandBox
</A></li>
	<LI>Next message (by thread): <A HREF="007053.html">[osg-users] Real time Strobing effect for on screen animation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7059">[ date ]</a>
              <a href="thread.html#7059">[ thread ]</a>
              <a href="subject.html#7059">[ subject ]</a>
              <a href="author.html#7059">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
