<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] [About VertexArrayObject Branch] FeedBack and	Insight
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5BAbout%20VertexArrayObject%20Branch%5D%20FeedBack%20and%0A%09Insight&In-Reply-To=%3CCAFN7Y%2BXA6mxA78HsYVnmZmbV2nVw%2BJFuoadqZuy4bC8KX8vMRw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="003914.html">
   <LINK REL="Next"  HREF="003917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] [About VertexArrayObject Branch] FeedBack and	Insight</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5BAbout%20VertexArrayObject%20Branch%5D%20FeedBack%20and%0A%09Insight&In-Reply-To=%3CCAFN7Y%2BXA6mxA78HsYVnmZmbV2nVw%2BJFuoadqZuy4bC8KX8vMRw%40mail.gmail.com%3E"
       TITLE="[osg-users] [About VertexArrayObject Branch] FeedBack and	Insight">robert.osfield at gmail.com
       </A><BR>
    <I>Tue Aug 16 11:25:35 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003914.html">[osg-users] [About VertexArrayObject Branch] FeedBack and	Insight
</A></li>
        <LI>Next message: <A HREF="003917.html">[osg-users] [About VertexArrayObject Branch] FeedBack and	Insight
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3916">[ date ]</a>
              <a href="thread.html#3916">[ thread ]</a>
              <a href="subject.html#3916">[ subject ]</a>
              <a href="author.html#3916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Julien,

On 16 August 2016 at 18:37, Julien Valentin &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">julienvalentin51 at gmail.com</A>&gt; wrote:
&gt;<i> Hello all
</I>&gt;<i> @scraw : geometries doesn't have to share vertex arrays but bufferobjects..this is not the same:
</I>&gt;<i> The pattern that maximize vao reutilization is the followed
</I>&gt;<i> Geom1
</I>&gt;<i> G1VertAttrib1-&gt;BO1 G1VertAttrib2-&gt;BO2...and a Unique IndexArray-&gt;BON
</I>&gt;<i> Geom2
</I>&gt;<i> G2VertAttrib1-&gt;BO1 G2VertAttrib2-&gt;BO2...and a Unique IndexArray-&gt;BON
</I>&gt;<i>
</I>&gt;<i> With this pattern and vao sharing I have not only draw stage drop but also a huge gpu charge decrease
</I>&gt;<i> The only problem is that you should use glDrawXXBaseVertex or offsetIndices of your IndexArray
</I>&gt;<i>
</I>&gt;<i> My bench in release this time
</I>&gt;<i> .............................................................. Cull       Draw        GPU          FPS
</I>&gt;<i> Pattern on all geometries with 1VAO/Geom   2            4            1.37            160
</I>&gt;<i> Pattern on all geometries with shared VAOs   2            2            0.47            200
</I>&gt;<i>
</I>&gt;<i> So I think there's interest in sharing vaos
</I>
If you have a usage case please create an example that we can share
and use when benchmarking.

FYI, The VertexArrayState class that wraps up vertex array dispatch
and vertex array objects when enabled is capable of enabling sharing
between osg::Drawable.  In fact it's possible to share a single
VertexArrayState between the whole scene graph just relying upon the
VertexArrayState object in osg::State.  When VAO is not enabled
osg::State maintains a single VertexArrayState object that handles all
the vertex array dispatch.

Currently I haven't exposed the local osg::Drawable VertexArrayState
object as publicly accessing able in osg::Drawable but this could be
done easily.  I'm not yet convinced that this is good idea and don't
yet know of the consequence that might unfold.

Please remember the VAO system has to work well with the non VAO
usage, performance overheads have to be kept to a minimum and the
usage for end users has to be kept simple, adding an extra layer of
complexity is something that most users would really struggle with.

Robert.

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003914.html">[osg-users] [About VertexArrayObject Branch] FeedBack and	Insight
</A></li>
	<LI>Next message: <A HREF="003917.html">[osg-users] [About VertexArrayObject Branch] FeedBack and	Insight
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3916">[ date ]</a>
              <a href="thread.html#3916">[ thread ]</a>
              <a href="subject.html#3916">[ subject ]</a>
              <a href="author.html#3916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
