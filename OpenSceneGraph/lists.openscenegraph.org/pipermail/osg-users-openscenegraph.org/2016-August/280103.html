<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] [build] GStreamer linker error on OSX El Capitan
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5Bbuild%5D%20GStreamer%20linker%20error%20on%20OSX%20El%20Capitan&In-Reply-To=%3C1470942356.m2f.68351%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="003885.html">
   <LINK REL="Next"  HREF="003883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] [build] GStreamer linker error on OSX El Capitan</H1>
<!--htdig_noindex-->
    <B>Chris Thomas</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20%5Bbuild%5D%20GStreamer%20linker%20error%20on%20OSX%20El%20Capitan&In-Reply-To=%3C1470942356.m2f.68351%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] [build] GStreamer linker error on OSX El Capitan">cthomas at soasta.com
       </A><BR>
    <I>Thu Aug 11 12:05:56 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003885.html">[osg-users] osgText and shaders
</A></li>
        <LI>Next message: <A HREF="003883.html">[osg-users] [build] GStreamer linker error on OSX El Capitan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#280103">[ date ]</a>
              <a href="thread.html#280103">[ thread ]</a>
              <a href="subject.html#280103">[ subject ]</a>
              <a href="author.html#280103">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I am pulling OSG 3.4.0 from GIT and attempting to build on OSX El Capitan. 

I'm writing a BASH script to do this, as I need to repeat this compile on a number of machines. 
I test this install script on a VMWare OSX El-Capitan machine. Doing so allows me to run the install script over and over, from as clean an install state as I need, until it the OSG compile works.

To complicate matters slightly I already have an existing media platform that my OSG HAS to work with, without disrupting it. That platform already installs gstreamer 1.6.3.


So, calling cmake, I get this output...


Code:
cthomass-Mac:osg cthomas$ cmake -DBUILD_OSG_EXAMPLES=1 -DCMAKE_OSX_ARCHITECTURES=x86_64 ../OpenSceneGraph/
-- The C compiler identification is AppleClang 7.3.0.7030031
-- The CXX compiler identification is AppleClang 7.3.0.7030031
-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc
-- Check for working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++
-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Looking for pthread_create
-- Looking for pthread_create - found
-- Found Threads: TRUE  
-- Found OpenGL: /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/OpenGL.framework  
-- Performing Test GL_HEADER_HAS_GLINT64
-- Performing Test GL_HEADER_HAS_GLINT64 - Success
-- Performing Test GL_HEADER_HAS_GLUINT64
-- Performing Test GL_HEADER_HAS_GLUINT64 - Success
-- Found Freetype: /usr/local/lib/libfreetype.dylib (found version &quot;2.6.5&quot;) 
-- Found JPEG: /usr/local/lib/libjpeg.dylib  
-- Found Jasper: /usr/local/lib/libjasper.dylib (found version &quot;1.900.1&quot;) 
-- Found LibXml2: /opt/oblong/deps-64-11/lib64/libxml2.dylib (found version &quot;2.7.8&quot;) 
-- Found ZLIB: /usr/lib/libz.dylib (found version &quot;1.2.5&quot;) 
-- Found GDAL: /usr/local/Cellar/gdal/1.11.3_1/lib/libgdal.dylib  
-- Found PkgConfig: /usr/local/bin/pkg-config (found version &quot;0.29.1&quot;) 
-- Checking for module 'gta'
--   No package 'gta' found
-- Found CURL: /usr/lib/libcurl.dylib (found version &quot;7.43.0&quot;) 
-- Found GStreamer: /opt/oblong/deps-64-11/include/gstreamer-1.0;/opt/oblong/deps-64-11/lib/gstreamer-1.0/include;/opt/oblong/deps-64-11/include/glib-2.0;/opt/oblong/deps-64-11/lib/glib-2.0/include (found version &quot;1.6.3&quot;) 
-- Found GLIB: /opt/oblong/deps-64-11/include/glib-2.0;/opt/oblong/deps-64-11/lib64/glib-2.0/include (found version &quot;2.46.2&quot;) 
-- Found SDL2: /usr/local/lib/libSDL2main.a;/usr/local/lib/libSDL2.dylib;-framework Cocoa  
-- Found SDL: /usr/local/lib/libSDLmain.a;/usr/local/lib/libSDL.dylib;-framework Cocoa (found version &quot;1.2.15&quot;) 
-- Checking for module 'cairo'
--   Found cairo, version 1.14.6
-- Checking for module 'poppler-glib'
--   Found poppler-glib, version 0.45.0
-- Performing Test POPPLER_HAS_CAIRO
-- Performing Test POPPLER_HAS_CAIRO - Success
-- Checking for module 'librsvg-2.0&gt;=2.35'
--   
-- Checking for module 'gtk+-2.0'
--   Found gtk+-2.0, version 2.24.30
-- Checking for module 'gtkglext-x11-1.0'
--   No package 'gtkglext-x11-1.0' found
-- Looking for Q_WS_X11
-- Looking for Q_WS_X11 - not found
-- Looking for Q_WS_WIN
-- Looking for Q_WS_WIN - not found
-- Looking for Q_WS_QWS
-- Looking for Q_WS_QWS - not found
-- Looking for Q_WS_MAC
-- Looking for Q_WS_MAC - found
-- Looking for QT_MAC_USE_COCOA
-- Looking for QT_MAC_USE_COCOA - found
-- Found Qt4: /usr/local/bin/qmake (found version &quot;4.8.7&quot;) 
-- Found FLTK: /usr/local/lib/libfltk_images.dylib;/usr/local/lib/libfltk_forms.dylib;/usr/local/lib/libfltk_gl.dylib;/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/System/Library/Frameworks/OpenGL.framework;/usr/local/lib/libfltk.dylib  
-- Found wxWidgets: -L/usr/local/lib;;;-framework IOKit;-framework Carbon;-framework Cocoa;-framework AudioToolbox;-framework System;-framework OpenGL;-lwx_baseu-3.0;-lwx_osx_cocoau_core-3.0;-lwx_osx_cocoau_gl-3.0;-lwx_baseu_net-3.0 (found version &quot;3.0.2&quot;) 
-- Found TIFF: /usr/local/lib/libtiff.dylib (found version &quot;4.0.6&quot;) 
Disabling QuickTime because it's not supported by the selected SDK 10.11
-- Performing Test _OPENTHREADS_ATOMIC_USE_GCC_BUILTINS
-- Performing Test _OPENTHREADS_ATOMIC_USE_GCC_BUILTINS - Success
-- Performing Test _OPENTHREADS_ATOMIC_USE_MIPOSPRO_BUILTINS
-- Performing Test _OPENTHREADS_ATOMIC_USE_MIPOSPRO_BUILTINS - Failed
-- Performing Test _OPENTHREADS_ATOMIC_USE_SUN
-- Performing Test _OPENTHREADS_ATOMIC_USE_SUN - Failed
-- Performing Test _OPENTHREADS_ATOMIC_USE_WIN32_INTERLOCKED
-- Performing Test _OPENTHREADS_ATOMIC_USE_WIN32_INTERLOCKED - Failed
-- Performing Test _OPENTHREADS_ATOMIC_USE_BSD_ATOMIC
-- Performing Test _OPENTHREADS_ATOMIC_USE_BSD_ATOMIC - Success
-- Looking for pthread_yield
-- Looking for pthread_yield - not found
-- Looking for sched_yield
-- Looking for sched_yield - found
-- Looking for pthread_setconcurrency
-- Looking for pthread_setconcurrency - found
-- Looking for pthread_getconcurrency
-- Looking for pthread_getconcurrency - found
-- Looking for pthread_setaffinity_np
-- Looking for pthread_setaffinity_np - not found
-- Performing Test HAVE_THREE_PARAM_SCHED_SETAFFINITY
-- Performing Test HAVE_THREE_PARAM_SCHED_SETAFFINITY - Failed
-- Performing Test HAVE_TWO_PARAM_SCHED_SETAFFINITY
-- Performing Test HAVE_TWO_PARAM_SCHED_SETAFFINITY - Failed
-- Looking for gethostbyname in nsl
-- Looking for gethostbyname in nsl - not found
-- Looking for socket in socket
-- Looking for socket in socket - not found

The build system is configured to install libraries to /usr/local/lib
Your applications may not be able to find your installed libraries unless you:
    set your LD_LIBRARY_PATH (user specific) or
    update your ld.so configuration (system wide)
-- Configuring done
CMake Warning (dev):
  Policy CMP0042 is not set: MACOSX_RPATH is enabled by default.  Run &quot;cmake
  --help-policy CMP0042&quot; for policy details.  Use the cmake_policy command to
  set the policy and suppress this warning.

  MACOSX_RPATH is not specified for the following targets:

   OpenThreads
   osg
   osgAnimation
   osgDB
   osgFX
   osgGA
   osgManipulator
   osgParticle
   osgPresentation
   osgQt
   osgShadow
   osgSim
   osgTerrain
   osgText
   osgUI
   osgUtil
   osgViewer
   osgVolume
   osgWidget

This warning is for project developers.  Use -Wno-dev to suppress it.



Anyway, this mostly seems to be positive. So doing a make -j8, the build proceeds as expected, until it hits this wall....

Code:

[ 33%] Linking CXX shared module ../../../lib/osgPlugins-3.4.0/osgdb_gstreamer.so
ld: library not found for -lgstreamer-1.0
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[2]: *** [lib/osgPlugins-3.4.0/osgdb_gstreamer.so] Error 1
make[1]: *** [src/osgPlugins/gstreamer/CMakeFiles/osgdb_gstreamer.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....



And thats it, the build will fail shortly after, once the other 7 threads complete. 

I have also tried the same process using master/head, with the same error. CMake seems to find the gstreamer lib/headers etc, but the make always fails to link it.


Thank you!

Cheers,

Chris

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=68351#68351">http://forum.openscenegraph.org/viewtopic.php?p=68351#68351</A>






</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003885.html">[osg-users] osgText and shaders
</A></li>
	<LI>Next message: <A HREF="003883.html">[osg-users] [build] GStreamer linker error on OSX El Capitan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#280103">[ date ]</a>
              <a href="thread.html#280103">[ thread ]</a>
              <a href="subject.html#280103">[ subject ]</a>
              <a href="author.html#280103">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
