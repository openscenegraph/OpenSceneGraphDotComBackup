<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Unbounded growth in OpenFlight ReaderWriter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Unbounded%20growth%20in%20OpenFlight%20ReaderWriter&In-Reply-To=%3CFF01D17217297C42BEF1AAC01640C2C827F6BAE4%40tewdmx.enews.nrl.navy.mil%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="008828.html">
   <LINK REL="Next"  HREF="008818.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Unbounded growth in OpenFlight ReaderWriter</H1>
<!--htdig_noindex-->
    <B>Daniel Emminizer, Code 5773</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Unbounded%20growth%20in%20OpenFlight%20ReaderWriter&In-Reply-To=%3CFF01D17217297C42BEF1AAC01640C2C827F6BAE4%40tewdmx.enews.nrl.navy.mil%3E"
       TITLE="[osg-users] Unbounded growth in OpenFlight ReaderWriter">dan.emminizer at nrl.navy.mil
       </A><BR>
    <I>Tue Jul 31 02:53:46 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008828.html">[osg-users] MacOSX/Core Profile: Attribute aliasing behavior ?
</A></li>
        <LI>Next message (by thread): <A HREF="008818.html">[osg-users] Unbounded growth in OpenFlight ReaderWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8817">[ date ]</a>
              <a href="thread.html#8817">[ thread ]</a>
              <a href="subject.html#8817">[ subject ]</a>
              <a href="author.html#8817">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hello All,

I've found what appears to be unbounded growth in the OpenFlight loader.  I have a work-around but wanted to run it past the community since there are many here who are more familiar with the format and the loader than me.

I'm seeing uncontrolled memory growth when using the std::istream version of readNode.  It appears to populate the local cache with new images, but never clears out the local cache.  The filename-based version of readNode() does clear out the cache before it returns.

Does it make sense to add in:

        flt::Registry::instance()-&gt;clearLocalCache();

... before the return of the ReadResult at the bottom of this method at <A HREF="https://github.com/openscenegraph/OpenSceneGraph/blob/master/src/osgPlugins/OpenFlight/ReaderWriterFLT.cpp#L533">https://github.com/openscenegraph/OpenSceneGraph/blob/master/src/osgPlugins/OpenFlight/ReaderWriterFLT.cpp#L533</A> ?


If that's not a good path forward, do you have any suggestions on how to clear the cache on demand?

Thanks,

 - Dan

</PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008828.html">[osg-users] MacOSX/Core Profile: Attribute aliasing behavior ?
</A></li>
	<LI>Next message (by thread): <A HREF="008818.html">[osg-users] Unbounded growth in OpenFlight ReaderWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8817">[ date ]</a>
              <a href="thread.html#8817">[ thread ]</a>
              <a href="subject.html#8817">[ subject ]</a>
              <a href="author.html#8817">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
