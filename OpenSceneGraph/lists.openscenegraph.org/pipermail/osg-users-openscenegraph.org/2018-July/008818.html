<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Unbounded growth in OpenFlight ReaderWriter
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Unbounded%20growth%20in%20OpenFlight%20ReaderWriter&In-Reply-To=%3CCAFN7Y%2BV3ZzxuFnLV-wOcVPFQ%2BOComJzS0nHjYQTXP-N6QMCCkw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="008817.html">
   <LINK REL="Next"  HREF="008819.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Unbounded growth in OpenFlight ReaderWriter</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Unbounded%20growth%20in%20OpenFlight%20ReaderWriter&In-Reply-To=%3CCAFN7Y%2BV3ZzxuFnLV-wOcVPFQ%2BOComJzS0nHjYQTXP-N6QMCCkw%40mail.gmail.com%3E"
       TITLE="[osg-users] Unbounded growth in OpenFlight ReaderWriter">robert.osfield at gmail.com
       </A><BR>
    <I>Tue Jul 31 03:56:40 PDT 2018</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="008817.html">[osg-users] Unbounded growth in OpenFlight ReaderWriter
</A></li>
        <LI>Next message (by thread): <A HREF="008819.html">[osg-users] Unbounded growth in OpenFlight ReaderWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8818">[ date ]</a>
              <a href="thread.html#8818">[ thread ]</a>
              <a href="subject.html#8818">[ subject ]</a>
              <a href="author.html#8818">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Dan,

I'm not at a point where I can easily switch over to thinking about
OSG code written by others so rather than jump it right now I'll ask a
simple question that might help point you in a direction worthy of
investigation.

FYI, I'm not the author of the OpenFlight plugin so am in the same
boat as yourself when it comes to working out what it does, what is
intended, what might be a bug etc.  Each time I'm called in to fix
something in this plugin I learn a bit more... but still lots more to
learn.

I don't personally recall working with a flt::Registry::instance()
local cache so it's a new bit of OpenFlight plugin to me.  I'm a bit
surprised it's there as osgDB has it's own object cache, so I'd wonder
what the motivation was behind the local cache and whether it's really
necessary.  Could it be rewritten to use the osgDB's object cache?

Robert.







On Tue, 31 Jul 2018 at 11:19, Daniel Emminizer, Code 5773
&lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">dan.emminizer at nrl.navy.mil</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hello All,
</I>&gt;<i>
</I>&gt;<i> I've found what appears to be unbounded growth in the OpenFlight loader.  I have a work-around but wanted to run it past the community since there are many here who are more familiar with the format and the loader than me.
</I>&gt;<i>
</I>&gt;<i> I'm seeing uncontrolled memory growth when using the std::istream version of readNode.  It appears to populate the local cache with new images, but never clears out the local cache.  The filename-based version of readNode() does clear out the cache before it returns.
</I>&gt;<i>
</I>&gt;<i> Does it make sense to add in:
</I>&gt;<i>
</I>&gt;<i>         flt::Registry::instance()-&gt;clearLocalCache();
</I>&gt;<i>
</I>&gt;<i> ... before the return of the ReadResult at the bottom of this method at <A HREF="https://github.com/openscenegraph/OpenSceneGraph/blob/master/src/osgPlugins/OpenFlight/ReaderWriterFLT.cpp#L533">https://github.com/openscenegraph/OpenSceneGraph/blob/master/src/osgPlugins/OpenFlight/ReaderWriterFLT.cpp#L533</A> ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> If that's not a good path forward, do you have any suggestions on how to clear the cache on demand?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i>  - Dan
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I></PRE>





<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="008817.html">[osg-users] Unbounded growth in OpenFlight ReaderWriter
</A></li>
	<LI>Next message (by thread): <A HREF="008819.html">[osg-users] Unbounded growth in OpenFlight ReaderWriter
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8818">[ date ]</a>
              <a href="thread.html#8818">[ thread ]</a>
              <a href="subject.html#8818">[ subject ]</a>
              <a href="author.html#8818">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
