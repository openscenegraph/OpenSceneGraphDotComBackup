<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] using ref_ptr in any case
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20using%20ref_ptr%20in%20any%20case&In-Reply-To=%3CCAFN7Y%2BWrFWMi8wcD6Dp%2Bna%3D1BMTXNP68KwLjVAqMBNtfEHrQZg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="282093.html">
   <LINK REL="Next"  HREF="005873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] using ref_ptr in any case</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20using%20ref_ptr%20in%20any%20case&In-Reply-To=%3CCAFN7Y%2BWrFWMi8wcD6Dp%2Bna%3D1BMTXNP68KwLjVAqMBNtfEHrQZg%40mail.gmail.com%3E"
       TITLE="[osg-users] using ref_ptr in any case">robert.osfield at gmail.com
       </A><BR>
    <I>Mon Mar 20 07:40:59 PDT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="282093.html">[osg-users] using ref_ptr in any case
</A></li>
        <LI>Next message: <A HREF="005873.html">[osg-users] using ref_ptr in any case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5872">[ date ]</a>
              <a href="thread.html#5872">[ thread ]</a>
              <a href="subject.html#5872">[ subject ]</a>
              <a href="author.html#5872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Sebastian,

Using ref_ptr&lt;&gt; in local scope to objects t that are owned by external
scope is a good practice but isn't always required.

If your application is multi-threaded then the external scope could
unref and objects that you are using, so if you don't have your own
reference to it it would go out of scope and you'd end up with a
dangling pointer in your local scope.

If your application is single threaded then it should be safe to just
use C pointers in local scope while the object is kept alive by the
external scope.

Robert.

On 20 March 2017 at 13:41, Sebastian Schmidt &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">herrdersuppen at gmail.com</A>&gt; wrote:
&gt;<i> Hi.
</I>&gt;<i> I try to avoid possible memory leaks and currently replacing all pointers of osg object types with ref_ptr.
</I>&gt;<i>
</I>&gt;<i> I read the osgproducer article and some other threads about these reference pointers, but i wonder if there is any advantage for using ref_ptr also in local scope as temporary references to existing pointers.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Code:
</I>&gt;<i> osg::ref_ptr&lt;osgViewer::View&gt; pView = dynamic_cast&lt;osgViewer::View*&gt;(&amp;aa);
</I>&gt;<i>
</I>&gt;<i> [/code]
</I>&gt;<i>
</I>&gt;<i> ------------------
</I>&gt;<i> Read this topic online here:
</I>&gt;<i> <A HREF="http://forum.openscenegraph.org/viewtopic.php?p=70512#70512">http://forum.openscenegraph.org/viewtopic.php?p=70512#70512</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="282093.html">[osg-users] using ref_ptr in any case
</A></li>
	<LI>Next message: <A HREF="005873.html">[osg-users] using ref_ptr in any case
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5872">[ date ]</a>
              <a href="thread.html#5872">[ thread ]</a>
              <a href="subject.html#5872">[ subject ]</a>
              <a href="author.html#5872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
