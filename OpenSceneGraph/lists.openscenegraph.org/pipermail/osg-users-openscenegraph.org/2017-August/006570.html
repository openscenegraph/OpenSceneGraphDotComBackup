<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] access to viewer instances in plugins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20access%20to%20viewer%20instances%20in%20plugins&In-Reply-To=%3Cfab63870-2a34-498d-df88-c623b556f0b2%40freenet.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="006571.html">
   <LINK REL="Next"  HREF="006572.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] access to viewer instances in plugins</H1>
<!--htdig_noindex-->
    <B>Ralf Habacker</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20access%20to%20viewer%20instances%20in%20plugins&In-Reply-To=%3Cfab63870-2a34-498d-df88-c623b556f0b2%40freenet.de%3E"
       TITLE="[osg-users] access to viewer instances in plugins">ralf.habacker at freenet.de
       </A><BR>
    <I>Wed Aug 16 00:31:18 PDT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006571.html">[osg-users] Broken link
</A></li>
        <LI>Next message: <A HREF="006572.html">[osg-users] access to viewer instances in plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6570">[ date ]</a>
              <a href="thread.html#6570">[ thread ]</a>
              <a href="subject.html#6570">[ subject ]</a>
              <a href="author.html#6570">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

for
<A HREF="../../../../www.openscenegraph.com/index.php/gallery/use-cases/189-fm-profil.html">http://www.openscenegraph.org/index.php/gallery/use-cases/189-fm-profil</A>
we are trying to add animation trigger support to a scene by a specific
plugins. Animation trigger support means to start an animation
if the user clicks a specific object. The recent implementation uses a
dedicated pick handler to be called if a user selects an object and
starts an animation by using class AnimationViewerModelController, which
is already included in the osg source. The connection between the
trigger object and the related animation has been designed by using a
specific object name postfix including the animation name to make the
pick handler able to find the related animation. The animation itself is
created with blender and exported with the osgexport plugin
(<A HREF="https://github.com/cedricpinson/osgexport">https://github.com/cedricpinson/osgexport</A>).

The pick handler needs to be added to the viewer, which is normally
instantiated in the main application. Because we need to support several
viewers and we do not want to patch all related viewer (some of them are
3rdparty like <A HREF="https://github.com/ChrisDenham/osgopenvrviewer">https://github.com/ChrisDenham/osgopenvrviewer</A>) we are
looking for a way to place all this mentioned stuff into an osg plugin,
which could be loaded by any viewer by appending the plugin extension
(which is animtrigger in our case) to the model file e.g. osgviewer
test.osgt.animtrigger .

The related code to add a pick handler to a viewer looks like that:

    AnimationPickHandler *pickHandler = new AnimationPickHandler();
    viewer-&gt;addEventHandler(pickHandler);

To be able to call them in a plugin the plugin needs access to the
viewer instance, which is not possible with recent code and I'm looking
for a way to add such support to osg.

&gt;<i>From my recent osg knowledge I would say that one of the available
</I>viewer related classes needs to be extended to register itself into a
static list located in the class osg::View or in a dedicated new &quot;viewer
manager&quot; class.

Are there any hints for implementing this ?

Regards
Ralf
</PRE>


































<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006571.html">[osg-users] Broken link
</A></li>
	<LI>Next message: <A HREF="006572.html">[osg-users] access to viewer instances in plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6570">[ date ]</a>
              <a href="thread.html#6570">[ thread ]</a>
              <a href="subject.html#6570">[ subject ]</a>
              <a href="author.html#6570">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
