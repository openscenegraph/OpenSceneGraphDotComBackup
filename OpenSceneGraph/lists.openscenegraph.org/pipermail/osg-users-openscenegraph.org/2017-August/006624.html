<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Specifying the GL context version to request
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Specifying%20the%20GL%20context%20version%20to%20request&In-Reply-To=%3CCAFN7Y%2BWvk6QqaRQdq-%2Bi%2BBfJvjFaHRhRb8X%3DzoGdQ2PTnJgfuQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006623.html">
   <LINK REL="Next"  HREF="006625.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Specifying the GL context version to request</H1>
<!--htdig_noindex-->
    <B>Robert Osfield</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Specifying%20the%20GL%20context%20version%20to%20request&In-Reply-To=%3CCAFN7Y%2BWvk6QqaRQdq-%2Bi%2BBfJvjFaHRhRb8X%3DzoGdQ2PTnJgfuQ%40mail.gmail.com%3E"
       TITLE="[osg-users] Specifying the GL context version to request">robert.osfield at gmail.com
       </A><BR>
    <I>Mon Aug 21 08:43:34 PDT 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="006623.html">[osg-users] Specifying the GL context version to request
</A></li>
        <LI>Next message: <A HREF="006625.html">[osg-users] Specifying the GL context version to request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6624">[ date ]</a>
              <a href="thread.html#6624">[ thread ]</a>
              <a href="subject.html#6624">[ subject ]</a>
              <a href="author.html#6624">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Sandro,

On 21 August 2017 at 16:27, Sandro Mani &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">manisandro at gmail.com</A>&gt; wrote:

&gt;<i> Someone please correct me if I'm using the wrong terminology, but as far
</I>&gt;<i> as I understand mesa (possibly restricted to the intel mesa drivers, but
</I>&gt;<i> possibly also others such as ati and nouveau) only exposes GL3.2+
</I>&gt;<i> functionality through the corresponding core profile. Compatibility profile
</I>&gt;<i> is only implemented up to GL3.0 on my system:
</I>&gt;<i>
</I>&gt;<i>     Vendor: Intel Open Source Technology Center (0x8086)
</I>&gt;<i>     Device: Mesa DRI Intel(R) HD Graphics 530 (Skylake GT2)  (0x191b)
</I>&gt;<i>     Version: 17.2.0
</I>&gt;<i>     Accelerated: yes
</I>&gt;<i>     Video memory: 3072MB
</I>&gt;<i>     Unified memory: yes
</I>&gt;<i>     Preferred profile: core (0x1)
</I>&gt;<i>     Max core profile version: 4.5
</I>&gt;<i>     Max compat profile version: 3.0
</I>&gt;<i>     Max GLES1 profile version: 1.1
</I>&gt;<i>     Max GLES[23] profile version: 3.2
</I>&gt;<i>
</I>
What GL version is osgEarth now depending upon?


&gt;<i> Have you tried on an NVIdia or AMD system?
</I>&gt;<i>
</I>&gt;<i> No, but if I'm not mistaken they have a full(?) compatibility profile.
</I>&gt;<i>
</I>
NVidia have been pretty reliable on maintaining compatibility, I can't
comment on AMD as I haven't used AMD for a number of years.

I don't have much time for chasing up all the various permutations of
hardwsare, drivers and OS's personally, but given the breadth of the OSG
community we generally can cover most things, even if it isn't right away.
When someone starts using a less common hardware/OS combination then we
have to rely upon them to give us feedback - exactly as you are doing right
now :-)


&gt;<i>
</I>&gt;<i> FYI, I'm using NVidia under Kubunty 16.04 as my main build system and
</I>&gt;<i> routinely mix latest GL features with just creating a normal graphics
</I>&gt;<i> context,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;&gt;<i> Are the osgEarth team aware of the issues you've had?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I once asked before investigating [1] but no-one reacted, I suppose they
</I>&gt;&gt;<i> are mostly using Windows. Now I have a better understanding of the
</I>&gt;&gt;<i> underlying issues (and indeed of what was missing in OSG itself), but
</I>&gt;&gt;<i> before reporting issues to the osgEarth team I'd like to understand what
</I>&gt;&gt;<i> the correct approach should be (if indeed they are doing something wrong).
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> My guess is that they probably haven't used Linix+Intel with the drivers
</I>&gt;<i> that you are using so haven't come across the issue.  Real-time graphics
</I>&gt;<i> under Linux has tended to mostly done with NVidia as Intel and AMD have had
</I>&gt;<i> sub-standard GL drivers for looooong time.
</I>&gt;<i>
</I>&gt;<i> I suspect it's not really a case of the osgEarth team doing something
</I>&gt;<i> wrong, but the Linux+Intel drivers adding a new constraint for keeping
</I>&gt;<i> things working sweetly.
</I>&gt;<i>
</I>&gt;<i> I don't think it's adding a constraint, rather than the mesa developers
</I>&gt;<i> focusing first on adding support for extensions required to expose the
</I>&gt;<i> newest possible version in the core profile, and then working on the
</I>&gt;<i> compatibility profile as time allows.
</I>&gt;<i>
</I>
&gt;<i>From an end users perspectives lack of compatibility profile is a
</I>constraint, if it weren't you wouldn't have had any problems.  From what
you describe it may well be a temporary constraint.



&gt;<i>
</I>&gt;<i> I'm starting to wonder if you aren't hitting upon the same issues that
</I>&gt;<i> Apple OSG users have had with Apple's decision to only support OpenGL 3+
</I>&gt;<i> features on a graphics context without compatibility.  While it seems a
</I>&gt;<i> uncontroversial decision at first glance it's ended up being a real pain
</I>&gt;<i> for OpenGL users needing to maintain long lived applications that happen to
</I>&gt;<i> rely upon both newer features when available as well as old fixed function
</I>&gt;<i> pipeline features.  The Apple approach is fine for clean room application
</I>&gt;<i> written recently such as new games but crap for the many companies that
</I>&gt;<i> develop software that has a useful life that's over a decade long.
</I>&gt;<i>
</I>&gt;<i> It is likely that the issues are of similar nature yes. But since, with
</I>&gt;<i> the changes from the PR + the proposed DisplaySettings change, I'm able to
</I>&gt;<i> run osgEarth fine on this system, I'd say the situation is not that bad
</I>&gt;<i> here, it's just a matter of clarifying how the profile version should be
</I>&gt;<i> set.
</I>&gt;<i>
</I>
Are you building the OSG with defaults?  Or are you building the OSG for
just GL3?

What viewer are using with osgEarth?  osgEarth itself is typically used as
NodeKit with end user application creating their own viewer and with it
graphics contexts.  This means even if osgEarth's own example programs
changed the way they create graphics context you'd end up with issues.

Have you tried running osgviewer with the osgEarth files?  osgviewer by
default uses the ViewAcrossAllScreens() configuration which will pass the
DisplaySettings::instance() when creating the graphics context.
osgviewer also has the command line parameters (run osgivewer --help):

 --gl-flags &lt;mask&gt; Set the hint of which GL flags projfile mask to use when
                    creating graphics contexts.
  --gl-profile-mask
&lt;mask&gt;
                    Set the hint of which GL context profile mask to use
when
                    creating graphics contexts.
  --gl-version
&lt;major.minor&gt;
                    Set the hint of which GL version to use when creating
                    graphics contexts.

You can also set the env vars (osgviewer --help-env):

  OSG_GL_CONTEXT_FLAGS
&lt;uint&gt;
                    Set the hint for the GL context flags to use when
creating
                    contexts.
  OSG_GL_CONTEXT_PROFILE_MASK
&lt;uint&gt;
                    Set the hint for the GL context profile mask to use when
                    creating contexts.
  OSG_GL_CONTEXT_VERSION
&lt;major.minor&gt;
                    Set the hint for the GL version to create contexts for.

Could you test these to see if it works with OSG master, without any of
your extra local modifications.  If they do work could you post the
settings you used.

Feedback on this might help guide what osgEarth example application might
be able to do better.

Robert.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20170821/12504d4a/attachment.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20170821/12504d4a/attachment.htm</A>&gt;
</PRE>


















<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006623.html">[osg-users] Specifying the GL context version to request
</A></li>
	<LI>Next message: <A HREF="006625.html">[osg-users] Specifying the GL context version to request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6624">[ date ]</a>
              <a href="thread.html#6624">[ thread ]</a>
              <a href="subject.html#6624">[ subject ]</a>
              <a href="author.html#6624">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
