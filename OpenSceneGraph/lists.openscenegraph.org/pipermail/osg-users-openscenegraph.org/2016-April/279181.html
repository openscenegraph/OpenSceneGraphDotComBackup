<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] OpenGL CoreProfile / error in on OS X
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20OpenGL%20CoreProfile%20/%20error%20in%20on%20OS%20X&In-Reply-To=%3C57223889.6010001%40hitmuri.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="002957.html">
   <LINK REL="Next"  HREF="279184.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] OpenGL CoreProfile / error in on OS X</H1>
<!--htdig_noindex-->
    <B>Florent Berthaut</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20OpenGL%20CoreProfile%20/%20error%20in%20on%20OS%20X&In-Reply-To=%3C57223889.6010001%40hitmuri.net%3E"
       TITLE="[osg-users] OpenGL CoreProfile / error in on OS X">florent at hitmuri.net
       </A><BR>
    <I>Thu Apr 28 09:21:29 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="002957.html">[osg-users] Odd Font/Text issue
</A></li>
        <LI>Next message: <A HREF="279184.html">[osg-users] osgViewer::Viewer fullscreen dual monitor issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#279181">[ date ]</a>
              <a href="thread.html#279181">[ thread ]</a>
              <a href="subject.html#279181">[ subject ]</a>
              <a href="author.html#279181">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi all,

I am trying to port my GNU/Linux project (with OSG 3.4.0) to OS X.
I first installed OSG with Macports.

However the glsl shaders do not compile with anything above version 110, 
whereas i need at least version 3 and when available 4.2 (for image load 
store features).

I saw this post, which relates to the same issue (choosing OpenGL Core 
Profile instead of Compatibility profile):
<A HREF="http://forum.openscenegraph.org/viewtopic.php?t=9992&amp;highlight=osx">http://forum.openscenegraph.org/viewtopic.php?t=9992&amp;highlight=osx</A>

It would seem that the issue has been fixed, but looking at the source 
code of OSG 3.4.0, 3.5.0 and 3.5.1, it does not seem that the correct 
calls have been added.
I tried adding them before recompiling OSG but then i get a bunch of errors.

If i change the shaders syntax and use version 110, in order to match 
compatibility profile on OSX, they compile but the application then crashes.
Here is backtrace of the crash :

0 com.apple.driver.AppleIntelHD4000GraphicsGLDriver 0x000000010f85dd5c 
IntelVertexArray::setElemData(unsigned int, unsigned int, unsigned 
short, unsigned int) + 308
1   com.apple.driver.AppleIntelHD4000GraphicsGLDriver 0x000000010f85dc1a 
IntelVertexArray::extractState(GLDVertexArrayDataRec const*, unsigned 
long long) + 170
2   libGPUSupportMercury.dylib        0x00007fff92e075bb 
gpusLoadCurrentVertexArray + 195
3   com.apple.driver.AppleIntelHD4000GraphicsGLDriver 0x000000010f85b179 
Gen7::updateDispatch(GLDContextRec*, GLDRenderDispatch*, unsigned int*) 
+ 1393
4   GLEngine                          0x00007fff8ee5dad4 
gleDoDrawDispatchCore + 533
5   GLEngine                          0x00007fff8ee00636 
gleSetupAndDrawArraysOrElementsOutOfLine_ListExec + 886
6   GLEngine                          0x00007fff8ed8aa6a gleCallList + 170
7   libosgUtil.130.dylib              0x000000010779085d 
osgUtil::RenderLeaf::render(osg::RenderInfo&amp;, osgUtil::RenderLeaf*)


Is there something specific I need to do in my code in order to activate 
the OpenGL Core Profile ?


Thanks in advance,

Regards,

Florent


-- 
<A HREF="http://hitmuri.net/">http://hitmuri.net</A>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20160428/e62092ad/attachment-0002.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20160428/e62092ad/attachment-0002.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002957.html">[osg-users] Odd Font/Text issue
</A></li>
	<LI>Next message: <A HREF="279184.html">[osg-users] osgViewer::Viewer fullscreen dual monitor issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#279181">[ date ]</a>
              <a href="thread.html#279181">[ thread ]</a>
              <a href="subject.html#279181">[ subject ]</a>
              <a href="author.html#279181">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
