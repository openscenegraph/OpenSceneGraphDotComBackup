<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] combining Quats
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20combining%20Quats&In-Reply-To=%3Cbf5b0d19-f0b0-2b8f-113b-d5509f04d6d3%40gmx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="281681.html">
   <LINK REL="Next"  HREF="005463.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] combining Quats</H1>
<!--htdig_noindex-->
    <B>Sebastian Messerschmidt</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20combining%20Quats&In-Reply-To=%3Cbf5b0d19-f0b0-2b8f-113b-d5509f04d6d3%40gmx.de%3E"
       TITLE="[osg-users] combining Quats">sebastian.messerschmidt at gmx.de
       </A><BR>
    <I>Wed Feb  1 00:48:28 PST 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="281681.html">[osg-users] combining Quats
</A></li>
        <LI>Next message: <A HREF="005463.html">[osg-users] combining Quats
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5460">[ date ]</a>
              <a href="thread.html#5460">[ thread ]</a>
              <a href="subject.html#5460">[ subject ]</a>
              <a href="author.html#5460">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Trajce,

Did I miss the question :-) If it is working: fine. :-)

In general you are extracting the heading I guess (with the 
modelOrientation) and put it on top the tilted normal, which will put 
you on in this pose. The problem might be, that you introduce unwanted 
roll with this. I can give you some code (not based on OSG, but you'll 
get the idea) adapting a EulerAngle pose to a terrain normal using a 
local tangent plane.

Cheers
Sebastian




&gt;<i> Hi community,
</I>&gt;<i>
</I>&gt;<i> this is sort of easy math question (btw, I missed that part in my
</I>&gt;<i> classes ;-) ) I want to check it with you.
</I>&gt;<i>
</I>&gt;<i> It is about node following terrain. my node is MatrixTransform and I
</I>&gt;<i> have to set it in world coordinates. The node has it's own rotation and
</I>&gt;<i> I just need to take the terrain normal into account. Here is the
</I>&gt;<i> pseudocode that produces some acceptable results (not sure if they are
</I>&gt;<i> correct though, thus asking you for hints)
</I>&gt;<i>
</I>&gt;<i> Vec3 terrainNormal;
</I>&gt;<i>
</I>&gt;<i> Quat terrainOrientation;
</I>&gt;<i> terrainOrientation.makeRotate(Vec3(0,0,1), terrainNormal);
</I>&gt;<i>
</I>&gt;<i> Quat modelOrientation;
</I>&gt;<i> modelOrientation.makeRotate(Vec3(0,1,0), whatever);
</I>&gt;<i>
</I>&gt;<i> Quat q;
</I>&gt;<i> q = terrainOrientation * modelOrientation; // not sure about this
</I>&gt;<i>
</I>&gt;<i> MatrixTransform mxt = ...
</I>&gt;<i> mxt-&gt;setMatrix(Matrixd:;rotate(q) * ...);
</I>&gt;<i>
</I>&gt;<i> Any hints?
</I>&gt;<i>
</I>&gt;<i> Thanks a bunch as always!
</I>&gt;<i> Nick
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> trajce nikolov nick
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="281681.html">[osg-users] combining Quats
</A></li>
	<LI>Next message: <A HREF="005463.html">[osg-users] combining Quats
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5460">[ date ]</a>
              <a href="thread.html#5460">[ thread ]</a>
              <a href="subject.html#5460">[ subject ]</a>
              <a href="author.html#5460">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
