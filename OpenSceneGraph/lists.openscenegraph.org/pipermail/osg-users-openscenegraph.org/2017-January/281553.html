<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Heap Corruption
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Heap%20Corruption&In-Reply-To=%3C1484040228.m2f.69942%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="005368.html">
   <LINK REL="Next"  HREF="005331.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Heap Corruption</H1>
<!--htdig_noindex-->
    <B>Th&#195;&#169;o Nassour</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Heap%20Corruption&In-Reply-To=%3C1484040228.m2f.69942%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Heap Corruption">osgforum at tevs.eu
       </A><BR>
    <I>Tue Jan 10 01:23:48 PST 2017</I>
    <P><UL>
        <LI>Previous message: <A HREF="005368.html">[osg-users] osgQt and osg (CMake)
</A></li>
        <LI>Next message: <A HREF="005331.html">[osg-users] Heap Corruption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#281553">[ date ]</a>
              <a href="thread.html#281553">[ thread ]</a>
              <a href="subject.html#281553">[ subject ]</a>
              <a href="author.html#281553">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I am working on an application with the current configuration : 
WPF, CLI/C++ (for the communication between c++ and c#), c++ for OSG.
I am using VS2015 C++11.

I am getting always Heap Corruption Exception :
Here is the Stack trace:

     ucrtbased.dll!_calloc_base
()    Unknown
     ucrtbased.dll!_free_dbg
()    Unknown
     osg130-osgd.dll!operator delete(void * block) Line 21    C++
     osg130-osgd.dll!std::_Deallocate(void * _Ptr, unsigned __int64 _Count, unsigned __int64 _Sz) Line 139    C++
     osg130-osgd.dll!std::allocator&lt;char&gt;::deallocate(char * _Ptr, unsigned __int64 _Count) Line 639    C++
     osg130-osgd.dll!std::basic_stringbuf&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;::overflow(int _Meta) Line 182    C++
     msvcp140d.dll!std::basic_streambuf&lt;char,std::char_traits&lt;char&gt; &gt;::xsputn(const char * _Ptr, __int64 _Count) Line 411    C++
     msvcp140d.dll!std::basic_streambuf&lt;char,std::char_traits&lt;char&gt; &gt;::sputn(const char * _Ptr, __int64 _Count) Line 209    C++
     osg130-osgUtild.dll!std::operator&lt;&lt;&lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char,std::char_traits&lt;char&gt; &gt; &amp; _Ostr, const char * _Val) Line 806    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Drawable &amp; drawable) Line 1036    C++
     osg130-osgd.dll!osg::NodeVisitor::apply(osg::Geometry &amp; drawable) Line 92    C++
     osg130-osgd.dll!osg::Geometry::accept(osg::NodeVisitor &amp; nv) Line 39    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Geode &amp; node) Line 974    C++
     osg130-osgd.dll!osg::Geode::accept(osg::NodeVisitor &amp; nv) Line 37    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Transform &amp; node) Line 1247    C++
     osg130-osgd.dll!osg::NodeVisitor::apply(osg::MatrixTransform &amp; node) Line 157    C++
     osg130-osgd.dll!osg::MatrixTransform::accept(osg::NodeVisitor &amp; nv) Line 37    C++
     osg130-osgd.dll!osg::Switch::traverse(osg::NodeVisitor &amp; nv) Line 41    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Group &amp; node) Line 1224    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Switch &amp; node) Line 1315    C++
&gt;<i>    SICLAV.OsgRendering.dll!SICLAV::nodes::Tree3D::accept(osg::NodeVisitor &amp; nv) Line 31    C++
</I>     osg130-osgd.dll!osg::Switch::traverse(osg::NodeVisitor &amp; nv) Line 41    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Group &amp; node) Line 1224    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Switch &amp; node) Line 1315    C++
     osg130-osgd.dll!osg::Switch::accept(osg::NodeVisitor &amp; nv) Line 40    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Transform &amp; node) Line 1247    C++
     osg130-osgd.dll!osg::NodeVisitor::apply(osg::MatrixTransform &amp; node) Line 157    C++
     osg130-osgd.dll!osg::MatrixTransform::accept(osg::NodeVisitor &amp; nv) Line 37    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Transform &amp; node) Line 1247    C++
     osg130-osgd.dll!osg::NodeVisitor::apply(osg::MatrixTransform &amp; node) Line 157    C++
     osg130-osgd.dll!osg::MatrixTransform::accept(osg::NodeVisitor &amp; nv) Line 37    C++
     osg130-osgd.dll!osg::Switch::traverse(osg::NodeVisitor &amp; nv) Line 41    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Group &amp; node) Line 1224    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Switch &amp; node) Line 1315    C++
     SICLAV.OsgRendering.dll!SICLAV::nodes::View3D::accept(osg::NodeVisitor &amp; nv) Line 54    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Group &amp; node) Line 1224    C++
     osg130-osgd.dll!osg::Group::accept(osg::NodeVisitor &amp; nv) Line 38    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::handle_cull_callbacks_and_traverse(osg::Node &amp; node) Line 322    C++
     osg130-osgUtild.dll!osgUtil::CullVisitor::apply(osg::Group &amp; node) Line 1224    C++
     osg130-osgd.dll!osg::Group::accept(osg::NodeVisitor &amp; nv) Line 38    C++
     osg130-osgd.dll!osg::Group::traverse(osg::NodeVisitor &amp; nv) Line 63    C++
     osg130-osgd.dll!osg::NodeVisitor::traverse(osg::Node &amp; node) Line 189    C++
     osg130-osgUtild.dll!osgUtil::SceneView::cullStage(const osg::Matrixd &amp; projection, const osg::Matrixd &amp; modelview, osgUtil::CullVisitor * cullVisitor, osgUtil::StateGraph * rendergraph, osgUtil::RenderStage * renderStage, osg::Viewport * viewport) Line 896    C++
     osg130-osgUtild.dll!osgUtil::SceneView::cull() Line 757    C++
     osg130-osgViewerd.dll!osgViewer::Renderer::cull_draw() Line 832    C++
     osg130-osgViewerd.dll!osgViewer::Renderer::operator()(osg::GraphicsContext * __formal) Line 909    C++
     osg130-osgd.dll!osg::GraphicsContext::runOperations() Line 772    C++
     osg130-osgd.dll!osg::RunOperations::operator()(osg::GraphicsContext * context) Line 140    C++
     osg130-osgd.dll!osg::GraphicsOperation::operator()(osg::Object * object) Line 54    C++
     osg130-osgd.dll!osg::OperationThread::run() Line 435    C++
     osg130-osgd.dll!osg::GraphicsThread::run() Line 41    C++
     ot20-OpenThreadsd.dll!000007feecd65efd()    Unknown
     ucrtbased.dll!__crt_unique_heap_ptr&lt;char const ,struct __crt_internal_free_policy&gt;::detach(void)    Unknown
     ucrtbased.dll!_register_onexit_function
()    Unknown
     kernel32.dll!BaseThreadInitThunk
()    Unknown
     ntdll.dll!RtlUserThreadStart
()    Unknown

And i have : this one Also :

---------------------------
Microsoft Visual C++ Runtime Library
---------------------------
Debug Assertion Failed!

Program: ...aces\SICLAV\SICLAV\SICLAV.WPF\bin\x64\Debug\SICLAV.vshost.exe
File: minkernel\crts\ucrt\src\appcrt\heap\debug_heap.cpp
Line: 888
Expression: _CrtIsValidHeapPointer(block)
For information on how your program can cause an assertion
failure, see the Visual C++ documentation on asserts.


Can any one Helps ? 
Thank you!

Cheers,
Th&#233;o[/b]

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=69942#69942">http://forum.openscenegraph.org/viewtopic.php?p=69942#69942</A>






</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005368.html">[osg-users] osgQt and osg (CMake)
</A></li>
	<LI>Next message: <A HREF="005331.html">[osg-users] Heap Corruption
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#281553">[ date ]</a>
              <a href="thread.html#281553">[ thread ]</a>
              <a href="subject.html#281553">[ subject ]</a>
              <a href="author.html#281553">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
