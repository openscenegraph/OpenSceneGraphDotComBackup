<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Most efficient way to get the gl_ModelViewMatrix of	PREVIOUS frame?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Most%20efficient%20way%20to%20get%20the%20gl_ModelViewMatrix%20of%0A%09PREVIOUS%20frame%3F&In-Reply-To=%3C1466511643.m2f.67713%40forum.openscenegraph.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="003457.html">
   <LINK REL="Next"  HREF="003449.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Most efficient way to get the gl_ModelViewMatrix of	PREVIOUS frame?</H1>
<!--htdig_noindex-->
    <B>Philipp Meyer</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Most%20efficient%20way%20to%20get%20the%20gl_ModelViewMatrix%20of%0A%09PREVIOUS%20frame%3F&In-Reply-To=%3C1466511643.m2f.67713%40forum.openscenegraph.org%3E"
       TITLE="[osg-users] Most efficient way to get the gl_ModelViewMatrix of	PREVIOUS frame?">philipp.meyer at fh-bielefeld.de
       </A><BR>
    <I>Tue Jun 21 05:20:43 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="003457.html">[osg-users] OpenSceneGraph Travis + Coverity scan up and running
</A></li>
        <LI>Next message: <A HREF="003449.html">[osg-users] Most efficient way to get the gl_ModelViewMatrix of	PREVIOUS frame?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#279646">[ date ]</a>
              <a href="thread.html#279646">[ thread ]</a>
              <a href="subject.html#279646">[ subject ]</a>
              <a href="author.html#279646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I am currently working on a Shader that is supposed to color fragments approaching the camera red and fragments departing the camera green.
So for example, if an object in the scene is traveling towards the camera, it should be rendered red, otherwise green.

For that, my basic idea was to compute the distance of each fragment to the camera, and then subtract the distance of the same fragment from the previous frame. If the result is negative, the fragment would approach the camera and therefore be red, otherwise green.

The challenge here is to get the fragment position from the previous frame though.
&gt;<i>From my understanding, the fragments position relative to the camera (0,0,0,1) is calculated by interpolating
</I>gl_Vertex * gl_ModelViewMatrix, where ModelViewMatrix is calculated as (viewmatrix * modelmatrix).

So, what I would need is something like &quot;gl_ModelViewMatrixPreviousFrame&quot;.
While it is relatively easy to pass the previous viewmatrix to the shader by setting a uniform on the parent camera in OSG and updating it in the program render loop, how would one go about passing the old modelMatrix? The model matrix can be different for every primitive in the scene, so wouldn't I need a million uniforms for that? How would that even work?

Thank you!

Cheers,
Philipp

------------------
Read this topic online here:
<A HREF="http://forum.openscenegraph.org/viewtopic.php?p=67713#67713">http://forum.openscenegraph.org/viewtopic.php?p=67713#67713</A>






</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003457.html">[osg-users] OpenSceneGraph Travis + Coverity scan up and running
</A></li>
	<LI>Next message: <A HREF="003449.html">[osg-users] Most efficient way to get the gl_ModelViewMatrix of	PREVIOUS frame?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#279646">[ date ]</a>
              <a href="thread.html#279646">[ thread ]</a>
              <a href="subject.html#279646">[ subject ]</a>
              <a href="author.html#279646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
