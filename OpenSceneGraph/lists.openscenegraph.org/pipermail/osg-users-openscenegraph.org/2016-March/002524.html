<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [osg-users] Running OSG models on OpenGLES2.0
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Running%20OSG%20models%20on%20OpenGLES2.0&In-Reply-To=%3CCALm6U%2BqRnP2LVMKFe2Vw6Dhm32gEdsn-Xdpb2nYnPWKcYwHg-w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <LINK REL="Previous"  HREF="002523.html">
   <LINK REL="Next"  HREF="002525.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[osg-users] Running OSG models on OpenGLES2.0</H1>
<!--htdig_noindex-->
    <B>Christian Buchner</B> 
    <A HREF="mailto:osg-users%40lists.openscenegraph.org?Subject=Re%3A%20%5Bosg-users%5D%20Running%20OSG%20models%20on%20OpenGLES2.0&In-Reply-To=%3CCALm6U%2BqRnP2LVMKFe2Vw6Dhm32gEdsn-Xdpb2nYnPWKcYwHg-w%40mail.gmail.com%3E"
       TITLE="[osg-users] Running OSG models on OpenGLES2.0">christian.buchner at gmail.com
       </A><BR>
    <I>Mon Mar 14 05:07:18 PDT 2016</I>
    <P><UL>
        <LI>Previous message: <A HREF="002523.html">[osg-users] Running OSG models on OpenGLES2.0
</A></li>
        <LI>Next message: <A HREF="002525.html">[osg-users] Running OSG models on OpenGLES2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2524">[ date ]</a>
              <a href="thread.html#2524">[ thread ]</a>
              <a href="subject.html#2524">[ subject ]</a>
              <a href="author.html#2524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi,

I am not sure if the original poster is aware of this, the
osgvertexattributes osg sample code is able to generate shaders from fixed
function pipeline state sets in the scene graph and applies these shaders
to the geometry.

<A HREF="http://trac.openscenegraph.org/projects/osg//browser/OpenSceneGraph/trunk/examples/osgvertexattributes/osgvertexattributes.cpp">http://trac.openscenegraph.org/projects/osg//browser/OpenSceneGraph/trunk/examples/osgvertexattributes/osgvertexattributes.cpp</A>

Christian

2016-03-14 11:02 GMT+01:00 Sebastian Messerschmidt &lt;
<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">sebastian.messerschmidt at gmx.de</A>&gt;:

&gt;<i> Am 14.03.2016 um 09:16 schrieb Hyun Kwon:
</I>&gt;<i>
</I>&gt;<i> Hi Sebastian,
</I>&gt;<i>
</I>&gt;<i> Thanks for the reply.
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i> *From:* osg-users [<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-bounces at lists.openscenegraph.org</A>] on behalf
</I>&gt;<i> of Sebastian Messerschmidt [<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">sebastian.messerschmidt at gmx.de</A>]
</I>&gt;<i> *Sent:* Sunday, March 13, 2016 4:03 AM
</I>&gt;<i> *To:* OpenSceneGraph Users
</I>&gt;<i> *Subject:* Re: [osg-users] Running OSG models on OpenGLES2.0
</I>&gt;<i>
</I>&gt;<i> Hi Hyun,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Chris,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I tried most of examples. Now I'm focusing on glsl_simple.osgt as it looks
</I>&gt;<i> simple, but only the second row of shapes shows. If I modify the vertex
</I>&gt;<i> shader a little, I get to see both first/second row.
</I>&gt;<i>
</I>&gt;<i> Can you tell us which platform you are using?  You usually don't have to
</I>&gt;<i> add precision qualifiers to make shaders work.
</I>&gt;<i>
</I>&gt;<i> I have Xilinx ZynqMP SoC with MALI 400MP, and I'm running Ubuntu on it. I
</I>&gt;<i> also have Yocto built rootfs. I've integrated the MALI OpenGLES2
</I>&gt;<i> library/driver there, and I'm building OSG manually. It fails to compile if
</I>&gt;<i> I don't add the precision for float &amp; int in shaders. The OSG build
</I>&gt;<i> configuration is more or less as below (it's for 3.4.0), with some addition
</I>&gt;<i> to point to EGL/OPENGLES2 libraries and headers:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> I've received some OSG model (file.osg) from someone, and I was able to
</I>&gt;<i> run it on the desktop (OpenGL). I was told the OSG model runs on
</I>&gt;<i> OpenGLES2.0. For me to run it on OpenGLES2, I added the precision
</I>&gt;<i> qualifiers to build, but the result still doesn't look correct. I'm not
</I>&gt;<i> sure if more / what modification is needed. For example, I modified the OSG
</I>&gt;<i> shader generator, but it didn't help. Does OSG layers completely abstract
</I>&gt;<i> underlying APIs (OpenGL, OpenGLES,,,), meaning the OSG models are API
</I>&gt;<i> independent? or does each OSG model have some API specific code? For
</I>&gt;<i> example, I don't see any precision qualifiers in OSG examples, and does
</I>&gt;<i> that mean those models are not for OpenGLES2.0?
</I>&gt;<i>
</I>&gt;<i> OSG doesn't completely abstract the APIs, but it can be built specifically
</I>&gt;<i> to work with OpenGL ES, by using the compiler flags you used. You will
</I>&gt;<i> however have to put some work into it, since you will have to write
</I>&gt;<i> shaders. Since you are not telling us which &quot;shader generator&quot; you are
</I>&gt;<i> using, it is hard to guess what you are trying to achieve.
</I>&gt;<i> There is not something like &quot;models for OpenGLES2.0&quot;. You will have to
</I>&gt;<i> write appropriate shaders and might have to run some visitors to change
</I>&gt;<i> fixed function pipeline functions in to uniforms/attributes of the model.
</I>&gt;<i> For instance osg::Material is not working outside the compatibility
</I>&gt;<i> -profiles, so might have to run a visitor, that parses osg::Material
</I>&gt;<i> instances and replaces them with uniforms or per-vertex attributes which
</I>&gt;<i> you will have to evaluate in the shader.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I'm trying to figure out where the issue comes from: OSG model, OSG
</I>&gt;<i> layers, OpenGLES library.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Chris asked you for an example model that is not working. You mentioned
</I>&gt;<i> the glsl-simple model, which from a glance doesn't have ES-compatible code.
</I>&gt;<i> The easiest thing to do is to start with a model(preferably not containing
</I>&gt;<i> shaders) and a simple ES-Shader.
</I>&gt;<i> Unfortunately the examples here are relatively rare. Might be a great
</I>&gt;<i> opportunity to create some minimalistic core/ES-based shader example and to
</I>&gt;<i> extend the OpenGL-ES pseudo loader.
</I>&gt;<i>
</I>&gt;<i> If there are already OSG models confirmed to work with OpenGLES2, I'd use
</I>&gt;<i> those to validate my platform. But, none of examples in OpenSceneGraph-Data
</I>&gt;<i> shows correct results on my platform (nothing displayed except the
</I>&gt;<i> glsl_simple.osgt) comparing to results from desktop with OpenGL. Once my
</I>&gt;<i> platform is confirmed to work, I will be able to focus on debugging the
</I>&gt;<i> model. With lack of OSG / shader experience, I can't easily tell where the
</I>&gt;<i> issue comes from, and I'm looking for references for validation.
</I>&gt;<i>
</I>&gt;<i> Can't you try some other GLES applications(plain OpenGL-ES without OSG)
</I>&gt;<i> and check their shader code? I believe there is a problem with your
</I>&gt;<i> system/driver, as there is no need to explicitly issuing the precision in
</I>&gt;<i> normal cases.
</I>&gt;<i> All models should work in theory if you have some minimal shader for it.
</I>&gt;<i> Out of my head a minimal shader should look like the following. It will
</I>&gt;<i> display a red-colored version of your geometry.
</I>&gt;<i>
</I>&gt;<i> Vertex:
</I>&gt;<i> #version 100
</I>&gt;<i> attribute vec4 osg_Vertex;
</I>&gt;<i> uniform mat4 osg_ModelViewProjectionMatrix;
</I>&gt;<i>
</I>&gt;<i> void main()
</I>&gt;<i> {
</I>&gt;<i>     gl_Position = osg_ModelViewProjectionMatrix * osg_Vertex;
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Fragment:
</I>&gt;<i>
</I>&gt;<i> #version 100
</I>&gt;<i>
</I>&gt;<i> void main()
</I>&gt;<i> {
</I>&gt;<i>     gl_FragColor = vec4(1,0,0,1);
</I>&gt;<i> }
</I>&gt;<i>
</I>&gt;<i> Setting this shader to you scene should display everything correct. If my
</I>&gt;<i> code is valid, it should compile without any precision qualifiers.
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> Sebastian
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> -hyun
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> -hyun
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers
</I>&gt;<i> Sebastian
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> *From:* osg-users [<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users-bounces at lists.openscenegraph.org</A>] on behalf
</I>&gt;<i> of Chris Hanson [ &lt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">xenon at alphapixel.com</A>&gt;<A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">xenon at alphapixel.com</A>]
</I>&gt;<i>
</I>&gt;<i> *Sent:* Friday, March 11, 2016 5:27 PM
</I>&gt;<i>
</I>&gt;<i> *To:* OpenSceneGraph Users
</I>&gt;<i>
</I>&gt;<i> *Subject:* Re: [osg-users] Running OSG models on OpenGLES2.0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> OGL ES requires a shader.&#8203;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Many of the OSG-Data models don't have shaders built into them, and will
</I>&gt;<i> not transform and rasterize as a result.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Which OSG model did you try that had most surfaces transparent?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This email and any attachments are intended for the sole use of the named
</I>&gt;<i> recipient(s) and contain(s) confidential information that may be
</I>&gt;<i> proprietary, privileged or copyrighted under applicable law. If you are not
</I>&gt;<i> the intended recipient, do not read, copy, or forward this email message or
</I>&gt;<i> any attachments. Delete this email message and any attachments immediately.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i>
</I>&gt;<i> osg-users mailing list
</I>&gt;<i>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> This email and any attachments are intended for the sole use of the named
</I>&gt;<i> recipient(s) and contain(s) confidential information that may be
</I>&gt;<i> proprietary, privileged or copyrighted under applicable law. If you are not
</I>&gt;<i> the intended recipient, do not read, copy, or forward this email message or
</I>&gt;<i> any attachments. Delete this email message and any attachments immediately.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">listosg-users at lists.openscenegraph.orghttp</A>://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> osg-users mailing list
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">osg-users at lists.openscenegraph.org</A>
</I>&gt;<i> <A HREF="../../../listinfo.cgi/osg-users-openscenegraph.html">http://lists.openscenegraph.org/listinfo.cgi/osg-users-openscenegraph.org</A>
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="../attachments/20160314/1b3202cc/attachment-0003.html">http://lists.openscenegraph.org/pipermail/osg-users-openscenegraph.org/attachments/20160314/1b3202cc/attachment-0003.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002523.html">[osg-users] Running OSG models on OpenGLES2.0
</A></li>
	<LI>Next message: <A HREF="002525.html">[osg-users] Running OSG models on OpenGLES2.0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2524">[ date ]</a>
              <a href="thread.html#2524">[ thread ]</a>
              <a href="subject.html#2524">[ subject ]</a>
              <a href="author.html#2524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="../../../listinfo.cgi/osg-users-openscenegraph.html">More information about the osg-users
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
